{"version":3,"sources":["utils/baseUtils.js","utils/clipboardUtils.js","components/Base/EditableTable/EditableTable.js","components/App/Main/Configs/Query/queryFields.js","apis/network.js","components/App/Main/Configs/Query/Tabs/PreviewBase.js","imgs/icons.js","components/App/Main/Configs/Core/ModalArrayFields.js","components/App/Main/Configs/Query/Tabs/PreviewTable.js","components/App/Main/Configs/Query/Tabs/PreviewSQL.js","components/App/Main/Configs/Query/Query.js","components/App/Main/Configs/Save/SaveFormLogic.js","components/App/Main/Configs/Save/SaveForm.js","components/App/Main/Configs/Flow/FlowEditor/Node/FlowNodeWidget.tsx","components/App/Main/Configs/Flow/FlowEditor/Node/FlowNodeFactory.tsx","components/App/Main/Configs/Flow/FlowEditor/Diagram/FlowDiagramModel.ts","components/App/Main/Configs/Flow/FlowEditor/Node/BaseNodeModel.tsx","components/App/Main/Configs/Flow/FlowEditor/Port/FlowPortModel.ts","components/App/Main/Configs/Flow/FlowEditor/Port/FlowPortIcons.tsx","components/App/Main/Configs/Flow/FlowEditor/Port/FlowPortWidget.tsx","components/App/Main/Configs/Flow/FlowEditor/Node/Models/BranchModel.tsx","components/App/Main/Configs/Flow/FlowEditor/Node/Models/AuthGetUserModel.tsx","components/App/Main/Configs/Flow/FlowEditor/Node/Models/NetworkModel.tsx","components/App/Main/Configs/Flow/FlowEditor/Node/Models/QueryConfigModel.tsx","components/App/Main/Configs/Flow/FlowEditor/Node/Models/ArrayModels.tsx","components/App/Main/Configs/Flow/FlowEditor/SerializeDiagram.tsx","components/App/Main/Configs/Flow/TreeVariables/AddVarModal.js","components/App/Main/Configs/Flow/FlowEditor/Node/Models/VariableModels.tsx","components/App/Main/Configs/Flow/TreeVariables/TreeVariables.tsx","components/App/Main/Configs/Flow/GeneralFields.tsx","components/App/Main/Configs/Flow/FlowEditor/Port/FlowPortFactory.tsx","components/App/Main/Configs/Flow/Flow.js","components/App/Main/Main.tsx","components/App/LeftSide/Configs/Header/SelectDataBase.js","components/App/LeftSide/Configs/TreeConfigs.js","components/App/LeftSide/Configs/Header/MigrateModal.tsx","components/App/LeftSide/Configs/Header/Header.tsx","components/App/LeftSide/Configs/Configs.js","components/App/LeftSide/Jira.tsx","components/App/LeftSide/LeftSide.tsx","utils/redux.ts","components/App/Main/Ssh/Ssh.tsx","components/App/Main/Jira/tasksConfig.tsx","components/App/Main/Jira/Jira.tsx","components/App/App.js","imgs/logo.png","components/Login/Login.js","imgs/logo_.png","constants/PATHS.js","reducers/index.js","store.js","serviceWorker.js","constants/menu.js","imgs/logo-small.svg","imgs/toggle-btn-left.svg","imgs/toggle-btn-right.svg","init.js","index.js"],"names":["size","object","Object","keys","length","fillCls","port","getLinks","uuid","replace","c","crypto","getRandomValues","Uint8Array","toString","notificationError","error","message","response","console","log","data","status","description","fallbackCopyTextToClipboard","text","textArea","document","createElement","value","style","top","left","position","body","appendChild","focus","select","execCommand","openNotificationWithIcon","err","removeChild","type","title","msg","notification","indexCol","dataKey","width","align","fixed","colDefProps","component","defaultState","colWidths","colStyles","scrollbarSize","selectedCells","editingCell","editValue","undefined","TableStateContext","createContext","isEditing","rowIndex","colIndex","state","isSelectedCell","findIndex","cell","isSelectedRow","isInput","columns","column","find","col","index","isCheckBox","rowCls","join","colCellCls","cellCls","validateValue","trim","includes","JSON","stringify","colStyle","reduce","total","ColGroup","cols","i","push","scrollTopMax","HeaderRow","useContext","cells","className","HeaderCell","rest","columnResizerRef","useRef","setState","onChangeValue","useEffect","draggingColIndex","window","addEventListener","onDragColumn","onDragColumnStop","removeEventListener","dragColIndex","e","prevState","clientX","current","offsetParent","offsetParentRect","getBoundingClientRect","x","scrollLeft","widths","map","resizable","ref","onMouseDown","Body","sortableContainer","props","BodyRows","rowData","BodyRow","sortableElement","BodyCell","onCellClick","valuePropName","generalProps","CellIndex","onClick","onClickCellContextMenu","onAddRow","onRemoveRow","onRemoveSelectedRows","key","sortableHandle","CellText","onPasteCells","overlay","Item","InsertRowAboveOutlined","InsertRowBelowOutlined","DeleteRowOutlined","trigger","textInput","bordered","onPaste","pasteArray","clipboardData","getData","split","CellInput","onChangeInput","input","onChange","target","onKeyPress","preventDefault","CellCheckbox","onChangeInputWithSave","checkbox","checked","CellSelect","defaultOpen","EditableTable","useMemo","row","headerRef","bodyRef","useState","initState","getTargetScrollBarSize","isMounted","useMounted","onKeyDownHandler","onKeyUpHandler","setSelectedCell","editing","addSelectedCell","setEditingCell","moveToSelected","direction","_rowIndex","_colIndex","keyCode","onKeyPressHandler","contains","_isEditing","_isInput","_isCheckBox","moveTo","saveStateValue","onChangeValueHandler","metaKey","ctrlKey","onCopyCells","stopPropagation","onChangeCheckBoxFromKey","sRow","sCol","fRow","fCol","fields","frIndex","scIndex","fcIndex","iRow","iCol","clearMatrix","_value","copyObjects","copyRows","rowString","navigator","clipboard","writeText","then","newRow","forEach","arr","splice","Provider","detail","eRowIndex","eColIndex","isSelect","shiftKey","srIndex","selectMatrix","values","_data","nextRowIndex","selectedRows","filter","display","flexDirection","onScroll","currentTarget","mergedScrollLeft","onSortEnd","oldIndex","newIndex","item","nextState","selectedRowIndex","changeIndexRow","useDragHandle","flex","selectOptions","visible","typeData","typeField","showSearch","options","label","EyeOutlined","SortAscendingOutlined","ArrowsAltOutlined","instance","axios","create","baseURL","timeout","headers","catchHandler","location","href","Promise","reject","genericRequest","catch","apiGetReq","url","method","apiPostReq","requestLoadConfig","requestLoadData","params","catchNotification","FilterInput","span","myRef","placeholder","FilterDatePicker","date","FilterArray","id","name","loadInitData","callBack","array","f","subscribe","path","Array","isArray","render","buttonProps","toolTipProps","dispatch","modalConfig","bodyStyle","height","form","noPadding","PreviewBase","Component","loaded","setLoaded","onlineUpdateFilters","setOnlineUpdateFilters","fixWidthColumn","infinityMode","zebraStyle","selectable","nodeAssociated","styleState","setStyleState","filters","setFilters","formData","useSelector","rtd","query","config","setTimeout","onChangeStyleState","StyleCheckBox","onChangeFilterState","filterItem","marginBottom","justifyContent","paddingRight","icon","ReloadOutlined","gutter","FilterComponent","field","filterFields","filterSigns","renderFilters","defaultFilter","requestLoadRows","sql","hierarchical","flat","configuration","get","SqlSvg","xmlns","viewBox","strokeWidth","stroke","fill","strokeLinecap","strokeLinejoin","d","points","x1","y1","x2","y2","QuerySvg","ColumnSvg","SaveSvg","FlowSvg","cx","cy","r","LogOutSvg","JiraSvg","gradientUnits","offset","stopColor","SqlIcon","Icon","QueryIcon","ColumnIcon","SaveIcon","FlowIcon","LogOutIcon","JiraIcon","convertHierarchyFieldStringToTable","hierarchyField","convertHierarchyFieldTableToString","convertSharedForRolesStringToTable","sharedForRoles","parse","convertSharedForRolesTableToString","convertSharedForUsersStringToTable","sharedForUsers","convertSharedForUsersTableToString","LargeModalArrayFields","modalTitle","buttonLabel","stringToTable","tableToString","buttonSize","SmallModalArrayFields","itemProps","setSubscribeProps","backgroundColor","Table","Sql","setData","res","minSize","maxSize","defaultSize","overflow","getParams","Input","normalize","Col","children","CheckBoxCol","child","EditableTableItem","Query","visibleGenInfo","setVisibleGenInfo","onClickCollapsePanelExtra","CollapsePanelExtra","layout","onValuesChange","changedValues","allValues","dataBase","readOnly","newData","set","success","configName","onFinish","activeKey","ghost","Panel","header","extra","marginTop","TabPane","tab","margin","FileSearchOutlined","PreviewTable","PreviewSQL","ApiOutlined","ScheduleOutlined","prefixCls","prefixTreeCls","Div","dataPath","dataType","SaveFormLogic","logic","setLogic","editPath","setEditPath","setFormData","formType","setFormType","tableNames","setTableNames","tableFields","setTableFields","onClickLogicParams","fData","objectPath","fieldType","primaryKey","excludePrimaryKey","autoGenerateCode","getFieldsByTable","slice","onClickAddChild","newLogic","onClickAddField","onClickDeleteField","del","equalsPaths","a","b","tableName","logicFields","justify","Option","fieldName","onDropdownVisibleChange","open","optionFilterProp","filterOption","option","toLowerCase","indexOf","table","filed","columnName","defaultChecked","fieldsFields","listHeight","validators","getLogicRender","ForkOutlined","shape","CloseOutlined","SisternodeOutlined","Fragment","SaveForm","saveConfig","setSaveConfig","wrapperCol","initialValues","saveObject","onSaveAndUpdateHandler","onFinishFailed","errorInfo","alignItems","paddingBottom","htmlType","noStyle","NodePorts","engine","node","PortsIn","getInPortsRender","PortsOut","getOutPortsRender","FlowNodeWidget","isSelected","getOptions","FlowNodeFactory","model","event","this","initialConfig","AbstractReactFactory","FlowDiagramModel","variables","v","variable","fi","DiagramModel","InExecPortDidFire","entity","maximumLinks","linksSize","links","remove","BaseNodeModel","ports","addPort","getPorts","registerListener","eventDidFire","DefaultNodeModel","FlowPortModel","hiddenLabel","DefaultPortModel","in","factory","link","DefaultLinkModel","PortIcon","ExecPort","VarPort","ListPort","isExistLinks","post","PortWrapper","PortBody","InputVariable","defaultValue","InputPort","getValue","setValue","BranchModel","BranchPortsIn","BranchPortsOut","getPort","AuthGetUserIdModel","AuthGetUserIdPortsIn","AuthGetUserIdPortsOut","AuthGetListUserRolesModel","AuthGetListUserRolesPortsOut","RequestModel","RequestPortsOut","getTypeFromNodeType","nodeType","charAt","ResponseModel","ResponsePortsIn","QueryConfigModel","QueryConfigPortsIn","QueryConfigPortsOut","StringListLengthModel","ListLengthPortsIn","ListLengthPortsOut","JsonListLengthModel","serializeDiagramToBack","diagram","linkModels","layers","models","nodesModels","resultNodes","nodeKey","posts","resultNode","inPorts","outPorts","resultPort","source","sourcePort","targetPort","flows","AddVarModal","PlusOutlined","labelCol","optionConverter","DATA_TYPES","GetVariableModel","GetVariablePortsOut","SetVariableModel","SetVariablePortsIn","SetVariablePortsOut","TreeVariables","treeDataVars","setTreeDataVars","updateTreeDataVars","onClickTitleContextMenu","addNode","Point","repaintCanvas","menu","LogoutOutlined","LoginOutlined","Divider","EditOutlined","DeleteOutlined","AppstoreAddOutlined","addVariable","blockNode","defaultExpandAll","showIcon","selectedKeys","treeData","titleRender","GeneralFields","visibleFields","setVisibleFields","FormOutlined","EyeInvisibleOutlined","FlowPortFactory","AbstractModelFactory","NODE_TYPES","PORT_TYPES","treeDataNodes","parseTree","obj","keyItem","FolderFilled","REQUEST","items","dateType","itemType","toUpperCase","getResponseItems","BRANCH","GET_FLAT_DATA","STRING_LIST_LENGTH","JSON_LIST_LENGTH","GET_USER_ID_FROM_HEADERS","GET_USER_ROLES_FROM_HEADERS","createNodeFactories","getNodeFactories","registerFactory","BranchFactory","Flow","createEngine","getStateMachine","getCurrentState","dragNewLink","allowLooseLinks","getPortFactories","deserializeModel","uiDiagram","setModel","execDiagram","serialize","SaveOutlined","AppstoreOutlined","onSelect","getNodes","Main","activeTabKey","setActiveTabKey","tabs","setTabs","NODE_TYPE_TABS","onOpenTab","onTabClick","targetKey","newActiveKey","lastIndex","filteredTabs","content","SelectDataBase","databases","db","DatabaseFilled","color","listConfigsToTree","list","parentKey","roots","isGroup","NODE_TYPE_ICONS","isLeaf","parentId","findByPrams","rowKey","callback","findByKey","savaPositionRecursively","ModalWithInput","parentNode","nodeNormalize","request","onOk","onCancel","newName","confirm","okText","cancelText","newNode","TreeConfigs","setRightPanelData","expandedKeys","setExpandedKeys","setTreeData","positionUrls","QUERY_CONFIG","SAVE_CONFIG","FLOW_CONFIG","loadConfigs","urlQueryConfigs","urlSaveConfigs","urlFlowConfigs","queryConfigs","saveConfigs","flowConfigs","QUERY_CONFIGS","SAVE_CONFIGS","FLOW_CONFIGS","onDrop","info","dropKey","dragKey","dragNode","dropPos","pos","dropPosition","Number","getDragObj","dragObj","dropNode","dropToGap","unshift","onExpand","addGroup","addConfig","renameConfig","removeConfig","copyConfig","userId","loggingQueries","_treeData","updateTreeData","CopyOutlined","TitleContextMenu","menuItems","renderTitle","nodeData","placement","mouseEnterDelay","customSql","ApartmentOutlined","EllipsisOutlined","renderTreePlaceholder","m","Title","level","draggable","renderTree","MigrateModal","hidden","setModalData","openModal","scrollable","Header","useDispatch","onChangeDataBase","setDatabases","selectedDB","setSelectedDB","onClickReload","toolsMenu","dataBaseSource","dataBaseTarget","DeploymentUnitOutlined","padding","borderBottom","ToolOutlined","Configs","setDataBase","Jira","username","password","hash","credentials","setCredentials","allowClear","btoa","auth","srv","JIRA_FILTER","FilterFilled","loadFilters","LeftSide","SplitPaneProps","splitPaneSize","setSplitPaneSize","onClickTreeNodeHandler","setDataStore","timestamp","moment","dispatchToStore","tabPosition","defaultActiveKey","blockedSize","Ssh","cmd","setCmd","commands","command","CodeFilled","ExclamationCircleOutlined","serverName","TextArea","autoSize","minRows","maxRows","defFieldParams","configRenders","cellRenderer","issuetype","src","iconUrl","cellData","priority","statusCategory","colorName","jql","setJql","onPressEnter","marginRight","customColumnProps","jiraAuth","resolve","issues","createConfigTab","SSH_SERVER","App","background","alt","Content","allowResize","tailLayout","Login","history","isAuth","setIsAuth","URLSearchParams","append","redirect","rules","required","Password","pathPrefix","process","PATHS","PATH_PREFIX","LOGIN","APP","reducer","combineReducers","rtdReducer","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","trace","traceLimit","compose","store","createStore","rootReducer","applyMiddleware","thunk","Boolean","hostname","match","HomeOutlined","DEBUG_LIB","BugOutlined","CONFIGURATIONS_PORTAL_GET","DatabaseOutlined","CONFIGURATIONS_GET","CONFIGURATIONS_PORTAL_SAVE","DOCUMENTATION","ReadOutlined","MONITORING","MonitorOutlined","TESTING","IssuesCloseOutlined","TESTING_LIST","TESTING_LOGS","PLAYGROUND","CodeSandboxOutlined","locale","ReactDOM","ru_RU","exact","getElementById","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.e1c0a152.chunk.js","sourcesContent":["import {notification} from 'antd';\n\nexport const noop = () => {};\n\nexport const size = (object) => Object.keys(object).length\nexport const fillCls = (port) => size(port.getLinks()) > 0 ? 'fill' : ''\n\nexport const flatten = (arrayOfArrays) =>\n\tarrayOfArrays.reduce(\n\t\t(flattened, item) =>\n\t\t\tflattened.concat(Array.isArray(item) ? flatten(item) : [item]),\n\t\t[]\n\t);\n\nexport const getTableRowKeys = (data, rowKey) => {\n\tconst rowKeys = data.map((item) => {\n\t\tif (item.children && item.children.length) {\n\t\t\treturn [item[rowKey], getTableRowKeys(item.children, rowKey)];\n\t\t}\n\t\treturn item[rowKey];\n\t});\n\treturn [...rowKeys];\n};\n\nexport const uuid = () => {\n\treturn ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, (c) =>\n\t\t(\n\t\t\tc ^\n\t\t\t(crypto.getRandomValues(new Uint8Array(1))[0] & (15 >> (c / 4)))\n\t\t).toString(16)\n\t);\n};\n\nexport const parseQueryParams = (params) => {\n\tlet result = {};\n\n\tparams = params.trim().replace(/^[?#&]/, '');\n\t// ?code=NvSLRq\n\tfor (const param of params.split('&')) {\n\t\tlet p = param.split('=');\n\t\tif (p.length > 1) {\n\t\t\tresult[p[0]] = p[1];\n\t\t}\n\t}\n\treturn result;\n};\n\nexport const notificationError = (error, message) => {\n\tif (error.response) {\n\t\tconsole.log(error.response.data);\n\t\tconsole.log(error.response.status);\n\t}\n\n\tnotification.error({\n\t\tmessage: `[${error.response.status}] ${message}`,\n\t\tdescription: error.response.data.error,\n\t});\n};\n\nexport const getParentPath = (currentPath) => {\n\tconst arrayPath = currentPath.split('/');\n\treturn arrayPath.slice(0, arrayPath.length - 1).join('/');\n}\n","import {notification} from 'antd';\n\nexport const copyTextToClipboard = text => {\n\tif (!navigator.clipboard) {\n\t\tfallbackCopyTextToClipboard(text);\n\t\treturn;\n\t}\n\tnavigator.clipboard.writeText(text)\n\t\t.then(\n\t\t\t() => {}, //openNotificationWithIcon('success', 'Успешно', `Успешно копировано в буфер обмена`),\n\t\t\t() => openNotificationWithIcon('error', 'Ошибка', `Ошибка копирования в буфер обмена`)\n\t);\n};\n\nconst fallbackCopyTextToClipboard = text => {\n\tlet textArea = document.createElement('textarea');\n\ttextArea.value = text;\n\n\t// Avoid scrolling to bottom\n\ttextArea.style.top = '0';\n\ttextArea.style.left = '0';\n\ttextArea.style.position = 'fixed';\n\n\tdocument.body.appendChild(textArea);\n\ttextArea.focus();\n\ttextArea.select();\n\n\ttry {\n\t\tlet successful = document.execCommand('copy');\n\t\tif (successful) {\n\t\t\t// openNotificationWithIcon(\n\t\t\t// \t'success',\n\t\t\t// \t'Успешно',\n\t\t\t// \t`[${text}] успешно копирован в буфер обмена`\n\t\t\t// );\n\t\t} else {\n\t\t\topenNotificationWithIcon(\n\t\t\t\t'error',\n\t\t\t\t'Ошибка',\n\t\t\t\t`[${text}] НЕ успешно копирован в буфер обмена`\n\t\t\t);\n\t\t}\n\t} catch (err) {\n\t\topenNotificationWithIcon(\n\t\t\t'error',\n\t\t\t'Ошибка',\n\t\t\t`[${text}] НЕ успешно копирован в буфер обмена`\n\t\t);\n\t}\n\tdocument.body.removeChild(textArea);\n};\n\nconst openNotificationWithIcon = (type, title, msg) => {\n\tnotification[type]({\n\t\tmessage: title,\n\t\tdescription: msg\n\t});\n};\n","import React, {createContext, useContext, useEffect, useMemo, useRef, useState} from 'react';\n\nimport {Checkbox, Dropdown, Input, Menu, Select} from \"antd\";\nimport { InsertRowAboveOutlined, InsertRowBelowOutlined, DeleteRowOutlined } from \"@ant-design/icons\";\nimport {Layout} from \"rt-design\";\nimport {useMounted} from \"rt-design/lib/components/utils/baseUtils\";\nimport { getTargetScrollBarSize } from 'rc-util/lib/getScrollBarSize';\nimport { sortableContainer, sortableElement, sortableHandle } from 'react-sortable-hoc';\n\nimport {copyTextToClipboard} from \"../../../utils/clipboardUtils\";\n\nconst indexCol = {dataKey: 'index', width: 35, align: 'center', fixed: 'left'};\nconst colDefProps = {component: 'input'};\nconst defaultState = { colWidths: [], colStyles:[], scrollbarSize: 0, selectedCells: [], editingCell: {}, editValue: undefined}\nconst TableStateContext = createContext({});\n\nconst isEditing = (rowIndex, colIndex, state) =>\n    state && state.editingCell.colIndex === colIndex && state.editingCell.rowIndex === rowIndex;\nconst isSelectedCell = (rowIndex, colIndex, state) =>\n    state && state.selectedCells.findIndex(cell => cell.colIndex === colIndex && cell.rowIndex === rowIndex) !== -1;\nconst isSelectedRow = (rowIndex, state) =>\n    state && state.selectedCells.findIndex(cell => cell.rowIndex === rowIndex) !== -1\nconst isInput = (columns, colIndex) => {\n    const column = columns.find((col, index) => index === colIndex)\n    return column ? column.component === 'input' : false;\n}\nconst isSelect = (columns, colIndex) => {\n    const column = columns.find((col, index) => index === colIndex)\n    return column ? column.component === 'select' : false;\n}\nconst isCheckBox = (columns, colIndex) => {\n    const column = columns.find((col, index) => index === colIndex)\n    return column ? column.component === 'checkbox' : false;\n}\n\n/** Get row style classes */\nconst rowCls = (rowIndex, state) => [\n    'editable-table-row',\n    isSelectedRow(rowIndex, state) ? 'editable-table-row-selected' : undefined,\n].join(' ')\n\n/** Get cell style classes */\nconst colCellCls = ({col, colIndex, columns}) => [\n    'editable-table-cell',\n    colIndex === 0 ? 'editable-table-cell-index' : undefined,\n    col.align ? `cell-align-${col.align}` : undefined,\n    col.fixed === 'left' ? 'editable-table-cell-fix-left' : undefined,\n    col.fixed === 'left'\n        ? (columns.find((col, index) => (colIndex < index && col.fixed === 'left')) ? undefined : 'editable-table-cell-fix-left-last')\n        : undefined\n].join(' ')\n\nconst cellCls = ({rowIndex, colIndex, state}) => [\n    isSelectedCell(rowIndex, colIndex, state)? 'editable-table-cell-selected' : undefined,\n    isEditing(rowIndex, colIndex, state) ? 'editable-table-cell-editing' : undefined,\n].join(' ')\n\nexport const validateValue = (value) => {\n    // console.log('validateValue typeof', typeof value, value);\n    if(value === 'null') return null;\n    switch (typeof value){\n        case \"string\":\n            if(value.length > 0 || value.trim()) {\n                if (value.includes('\\\"')) // value.includes('\\'') ||\n                    return JSON.stringify(value.trim());\n                else\n                    value.trim();\n            } else return null;\n        default:\n            return value\n    }\n}\n\nconst colStyle = (columns, colIndex, col, colWidths) => {\n    const style = {};\n    if(col.fixed === 'left') {\n        if (colWidths && colWidths.length > 0)\n            style.left = columns.reduce((total, col, index) => (index < colIndex && col.fixed === 'left') ? total + colWidths[index] : total, 0);\n    }\n    return style;\n}\n\nconst ColGroup = ({colWidths = [], scrollbarSize, body}) => {\n    const cols = [];\n    for(let i = 0; i < colWidths.length; i++){\n        const width = colWidths[i];\n        if(width)\n            cols.push(<col key={i} style={{width}}/>)\n        else\n            cols.push(<col key={i} style={{width}}/>)\n    }\n    if(scrollbarSize && body && body.scrollTopMax > 0)\n        cols.push(<col key={colWidths.length} style={{width: scrollbarSize}}/>)\n    // console.log(\"ColGroup: \", scrollbarSize, body);\n    return <colgroup>{cols}</colgroup>;\n}\nconst HeaderRow = ({rowIndex}) => {\n    const {state, columns} = useContext(TableStateContext);\n    const cells = [];\n    for(let i = 0; i < columns.length; i++){\n        // const style = {}\n        // columns[i].fixed === 'left' && (style.left = leftStyleForFixCol(columns, i, state))\n        // console.log('HeaderRow style', style)\n        cells.push(<HeaderCell key={i} rowIndex={rowIndex} col={columns[i]} colIndex={i} style={state.colStyles[i]}/>)\n    }\n    return <tr key={`editable-table-row-${rowIndex}`} className={rowCls(rowIndex)}>{cells}</tr>\n}\nconst HeaderCell = ({rowIndex, col, colIndex, ...rest}) => {\n\n    /** ===================== Ref ====================== */\n    const columnResizerRef = useRef(null)\n\n    /** ===================== Context ====================== */\n    const {state, columns, setState, onChangeValue} = useContext(TableStateContext);\n\n    /** ===================== Effect ====================== */\n    useEffect(() => {\n        // if(columnResizerRef.current) {\n        if(state.draggingColIndex === colIndex) {\n            // console.log('ColWidthDragging addEventListener');\n            window.addEventListener('mousemove', onDragColumn, false);\n            window.addEventListener('mouseup', onDragColumnStop, false);\n        }\n        return () => {\n            // if(columnResizerRef.current) {\n            if(state.draggingColIndex === colIndex) {\n                // console.log('ColWidthDragging removeEventListener')\n                window.removeEventListener('mousemove', onDragColumn, false);\n                window.removeEventListener('mouseup', onDragColumnStop, false);\n            }\n        };\n    }, [state.draggingColIndex])\n\n    /** ===================== Handlers ====================== */\n    const onDragColumnStart = (dragColIndex) => (e) => {\n        // Если есть редактируемое значение - сохранить и закрыть\n        if(state.editValue) {\n            // console.log('onDragColumnStart state.editValue', state.editValue);\n            const {rowIndex, colIndex} = state.editingCell;\n            onChangeValue(rowIndex, colIndex, state.editValue)\n            setState(prevState => ({...prevState, editingCell: {}, editValue: undefined, draggingColIndex: dragColIndex}));\n        } else {\n            setState(prevState => ({...prevState, draggingColIndex: dragColIndex}))\n        }\n    }\n\n    const onDragColumnStop = (e) => {\n        if(state.draggingColIndex === colIndex) {\n            // console.log('onDragColumnStop', state.draggingColIndex, colIndex);\n            setState(prevState => ({...prevState, draggingColIndex: -1}))\n        }\n    }\n\n    const onDragColumn = (e) => {\n        // console.log('onDragColumn');\n        let clientX = e.clientX;\n        if (!columnResizerRef.current)\n            return;\n        const {offsetParent} = columnResizerRef.current;\n        const offsetParentRect = offsetParent.getBoundingClientRect();\n        const x = clientX + offsetParent.scrollLeft - offsetParentRect.left;\n        setState(prevState => {\n            const widths = [...prevState.colWidths];\n            widths[colIndex] = x;\n            const colStyles = columns.map((col, colIndex) => colStyle(columns, colIndex, col, widths))\n            return {...prevState, colWidths: widths, colStyles: colStyles}\n        })\n    }\n\n    /** ===================== Render ====================== */\n    // console.log(`editable-table-cell-${rowIndex}-${colIndex}`, col.className);\n    return <th key={`editable-table-cell-${rowIndex}-${colIndex}`}\n        className={[col.className, cellCls({rowIndex, colIndex, state})].join(' ')}\n        {...rest}\n    >\n        <div className={'title'}>{col.title}</div>\n        {col.resizable &&\n            <div\n                ref={state.draggingColIndex === colIndex ? columnResizerRef : undefined}\n                className={`column-resizer`}\n                onMouseDown={onDragColumnStart(colIndex)}\n            />}\n    </th>\n}\nconst Body = sortableContainer((props) =>\n    <tbody className=\"editable-table-tbody\"><BodyRows {...props}/></tbody>);\nconst BodyRows = ({data = []}) => {\n    return data.map((rowData, rowIndex) =>\n        <BodyRow key={`editable-table-row-${rowIndex}`} index={rowIndex} rowIndex={rowIndex} rowData={rowData}/>)\n}\nconst BodyRow = sortableElement(({rowIndex, rowData}) => {\n    const {state, columns} = useContext(TableStateContext);\n    const cells = [];\n    for(let i = 0; i < columns.length; i++){\n        // const style = {}\n        // columns[i].fixed === 'left' && (style.left = leftStyleForFixCol(columns, i, state))\n        cells.push(<BodyCell key={i} rowIndex={rowIndex} rowData={rowData} colIndex={i} col={columns[i]} style={state.colStyles[i]}/>)\n    }\n    return <tr className={rowCls(rowIndex, state)}>{cells}</tr>\n})\nconst BodyCell = ({rowIndex, rowData, colIndex, col, ...rest}) => {\n    const {state, onCellClick} = useContext(TableStateContext);\n    let cell;\n    const valuePropName = col.component === 'checkbox' ? 'checked' : 'value';\n    const generalProps = {\n        [valuePropName]: col.component === 'checkbox' ? rowData[col.dataKey] : state.editValue,\n        bordered: false,\n        size: 'small'\n    }\n    if(colIndex === 0)\n        cell = <CellIndex rowData={rowData} col={col}/>\n    else if(col.component === 'checkbox')\n        cell = <CellCheckbox {...generalProps} rowIndex={rowIndex} colIndex={colIndex}/>\n    else if(isEditing(rowIndex, colIndex, state))\n        if(col.component === 'select')\n            cell = <CellSelect {...generalProps} rowIndex={rowIndex} colIndex={colIndex} col={col}/>\n        else\n            cell = <CellInput {...generalProps}/>\n    else\n        cell = <CellText rowIndex={rowIndex} rowData={rowData} colIndex={colIndex} col={col}/>\n\n    return (\n        <td key={`editable-table-cell-${rowIndex}-${colIndex}`}\n            {...rest}\n            className={[col.className, cellCls({rowIndex, colIndex, state})].join(' ')}\n            onClick={onCellClick({col, colIndex, rowIndex, rowData})}\n        >\n            {cell}\n        </td>\n    )\n}\n\n// const Components = {\n//     text: CellText,\n//     input: CellInput,\n//     select: CellSelect,\n//     checkbox: CellCheckbox\n// }\n\nconst onClickCellContextMenu = ({rowIndex, onAddRow, onRemoveRow, onRemoveSelectedRows}) => ({key}) => {\n    // console.log('click', e);\n    switch (key){\n        case 'addUp': onAddRow(rowIndex); break;\n        case 'addDown': onAddRow(rowIndex + 1); break;\n        case 'addLast': onAddRow(null); break;\n        case 'remove': onRemoveRow(rowIndex); break;\n        case 'removeSelected': onRemoveSelectedRows(); break;\n\n    }\n}\n\nconst CellContextMenu = (props) => (\n    <Menu onClick={onClickCellContextMenu(props)} className={'context-menu'}>\n        <Menu.Item key=\"addUp\"><InsertRowAboveOutlined />Добавить строку выше</Menu.Item>\n        <Menu.Item key=\"addDown\"><InsertRowBelowOutlined />Добавить строку ниже</Menu.Item>\n        <Menu.Item key=\"addLast\"><InsertRowBelowOutlined />Добавить строку в конец</Menu.Item>\n        <Menu.Item key=\"remove\"><DeleteRowOutlined />Удалить строку</Menu.Item>\n        <Menu.Item key=\"removeSelected\"><DeleteRowOutlined />Удалить выбранные строки</Menu.Item>\n    </Menu>\n);\n\n// const CellIndex = sortableHandle((props) => <CellText {...props} />);\nconst CellIndex = sortableHandle(({rowData, col}) => <div className={'text'}>{rowData[col.dataKey]}</div>);\n\nconst CellText = ({rowIndex, rowData, colIndex, col, ...rest}) => {\n    const {state, onPasteCells, onAddRow, onRemoveRow, onRemoveSelectedRows} = useContext(TableStateContext);\n    const value = () => {\n        if (rowData[col.dataKey] === undefined) return '<undefined>';\n        else if (rowData[col.dataKey] === null) return '<null>';\n        else return `${rowData[col.dataKey]}`;\n    }\n    const cls = () => {\n        if(rowData[col.dataKey] === undefined || rowData[col.dataKey] === null)\n            return 'null-text';\n        else\n            return 'text';\n    }\n    return (\n        <Dropdown\n            overlay={CellContextMenu({rowIndex, onAddRow, onRemoveRow, onRemoveSelectedRows})}\n            trigger={['contextMenu']}\n        >\n            <Input {...rest}\n               ref={(textInput) => {\n                   isSelectedCell(rowIndex, colIndex, state) && textInput && textInput.focus()\n               }}\n               className={cls()}\n               value={value()}\n               bordered={false}\n               size={'small'}\n               onPaste={(e) => {\n                   const pasteArray = (e.clipboardData || window.clipboardData).getData('text').trim().split(\"\\n\");\n                   onPasteCells(pasteArray)\n               }}\n            />\n        </Dropdown>\n    )\n}\n\n\nconst CellInput = (props) => {\n    const {onChangeInput} = useContext(TableStateContext);\n    // console.log('CellInput => ', props);\n    return (\n        <Input {...props}\n               ref={(input) => { input && input.focus() }}\n               onChange={e => onChangeInput(e.target.value)}\n               onKeyPress={e => {e.key === 'Enter' && e.preventDefault()}}\n        /> )\n}\n\nconst CellCheckbox = ({rowIndex, colIndex, ...rest}) => {\n    const {onChangeInputWithSave, state} = useContext(TableStateContext);\n    return (\n        <Checkbox\n            {...rest}\n            ref={(checkbox) => {\n                isSelectedCell(rowIndex, colIndex, state) && checkbox && checkbox.focus()\n            }}\n            onChange={e => onChangeInputWithSave(rowIndex, colIndex, e.target.checked)}\n        /> )\n}\n\nconst CellSelect = ({rowIndex, colIndex, col, ...rest}) => {\n    const {onChangeInputWithSave} = useContext(TableStateContext);\n    return (\n        <Select\n            {...rest}\n            {...col.props}\n            ref={(select) => { select && select.focus() }}\n            style={{width: '100%', ...col.props?.style}}\n            defaultOpen={true}\n            onChange={value => onChangeInputWithSave(rowIndex, colIndex, value)}\n        />)\n}\n\n\n\nconst EditableTable = (props) => {\n\n    /** ===================== Memos ====================== */\n    const mergeColumns = () => {\n        // console.log(\"mergeColumns\");\n        const columns = [\n            {...indexCol},\n            ...props.columns\n        ]\n        return columns.map((col, colIndex) => ({\n            ...colDefProps,\n            ...col,\n            className: colCellCls({col, colIndex, columns})\n        }))\n    }\n    const mergeData = () => (props.data && props.data.map((row, index) => ({...row, index}))) || []\n    const columns = useMemo(mergeColumns, [props.columns]);\n    const data = useMemo(mergeData, [props.data]);\n\n    /** ===================== Refs ====================== */\n    const headerRef = useRef(null)\n    const bodyRef = useRef(null);\n\n    /** ===================== States ====================== */\n    const initState = (columns) => {\n        // console.log(\"initState\");\n        const colWidths = columns.map(col => col.width);\n        const colStyles = columns.map((col, colIndex) => colStyle(columns, colIndex, col, colWidths));\n        // console.log(\"initState\", colStyles);\n        return {...defaultState, colWidths, colStyles};\n    }\n    const [state, setState] = useState(initState(columns));\n    // const setState = (param) => {\n    //     console.log(\"setState\", param);\n    //     __setState(param)\n    // }\n    const scrollbarSize = getTargetScrollBarSize(bodyRef.current).width;\n\n    const isMounted = useMounted()\n\n    /** ===================== Effects ====================== */\n    // useEffect(() => {\n    //     console.log('setScrollbarSize');\n        // setScrollbarSize(getTargetScrollBarSize(bodyRef.current).width);\n    // }, []);\n\n    useEffect(() => {\n        if(isMounted) {\n            // console.log('Update columns', columns);\n            setState({...state, colWidths: columns.map(col => col.width)});\n        }\n    }, [columns]);\n\n    useEffect(() => {\n        if(isMounted) {\n            // console.log('Update colStyles', state.colWidths);\n            // setState({...state, colStyles:  columns.map((col, colIndex) => colStyle(columns, colIndex, col, state.colWidths))});\n        }\n    }, [state.colWidths])\n\n    useEffect(() => {\n        // console.log('LocalState addEventListener')\n        window.addEventListener('keydown', onKeyDownHandler, false);\n        window.addEventListener('keyup', onKeyUpHandler, false);\n        return () => {\n            // console.log('LocalState removeEventListener')\n            window.removeEventListener('keydown', onKeyDownHandler, false);\n            window.removeEventListener('keyup', onKeyUpHandler, false);\n        };\n    }, [state])\n\n    /** ===================== Set State functions ====================== */\n    const onChangeInput = (value) => {\n        // console.log('onChangeInput => ', value);\n        setState({...state, editValue: value});\n    }\n    const onChangeInputWithSave = (rowIndex, colIndex, value) => {\n        // console.log('onChangeInputWithSave => ', value);\n        onChangeInput(value);\n        onChangeValueHandler(rowIndex, colIndex, value)\n    }\n    const onChangeCheckBoxFromKey = (rowIndex, colIndex) => {\n        const dataKey = columns.find((col, index) => index === colIndex).dataKey\n        onChangeValueHandler(rowIndex, colIndex, !data[rowIndex][dataKey])\n    }\n    const setSelectedCell = (rowIndex, colIndex, editing = false, editValue = undefined) => {\n        // console.log('setSelectedCell => ', editValue);\n        setState({\n            ...state,\n            selectedCells: [{rowIndex, colIndex}],\n            editingCell: editing ? {rowIndex, colIndex} : {},\n            editValue: editValue\n        });\n    }\n    const addSelectedCell = (rowIndex, colIndex) => {\n        setState(prevState => ({...prevState, selectedCells: [...prevState.selectedCells, {rowIndex, colIndex}]}))\n    }\n    const setEditingCell = (rowIndex, colIndex, editValue = undefined) => {\n        if(editValue === undefined){\n            const dataKey = columns.find((col, index) => index === colIndex).dataKey\n            setSelectedCell(rowIndex, colIndex, true, data[rowIndex][dataKey]);\n        } else {\n            setSelectedCell(rowIndex, colIndex, true, editValue);\n        }\n    }\n    const moveToSelected = (direction, rowIndex, colIndex, editing, editValue = undefined) => {\n        let _rowIndex = rowIndex, _colIndex = colIndex;\n        switch (direction){\n            case 'up':    _rowIndex = _rowIndex - 1 >= 0 ? _rowIndex - 1 : _rowIndex; break;\n            case 'right': _colIndex = columns.length > _colIndex + 1 ? _colIndex + 1 : _colIndex; break;\n            case 'down':  _rowIndex =    data.length > _rowIndex + 1 ? _rowIndex + 1 : _rowIndex; break;\n            case 'left':  _colIndex = _colIndex - 1 > 0 ? _colIndex - 1 : _colIndex; break;\n            default: break;\n        }\n        console.log('moveTo: direction: [%s], _colIndex: [%s], _rowIndex: [%s], editing: [%s], editValue: [%s]', direction, _colIndex, _rowIndex, editing, editValue);\n        setSelectedCell(_rowIndex, _colIndex, editing, editValue);\n    }\n\n    const changeIndexRow = (oldIndex, newIndex) => {\n        if (newIndex >= 0 && newIndex < data.length) {\n            let arr = [...data]; // Копируем массив\n            const item = arr.splice(oldIndex, 1); // Удаляем элемент со старого места\n            // console.log('_changeIndexRow => ',item);\n            arr.splice(newIndex > 0 ? newIndex : 0, 0, item[0]); // Ставим элемент на новое место\n            // console.log(\"changeIndexRow\", arr);\n            if(state.selectedCells && state.selectedCells.length > 0){\n                setState(prevState => {\n                    let nextState = {...prevState};\n                    const selectedRowIndex = state.selectedCells[0].rowIndex\n                    // Если переместилы выделенную строку\n                    if(selectedRowIndex === oldIndex) {\n                        nextState.selectedCells[0].rowIndex = newIndex;\n                        nextState.editingCell.rowIndex = newIndex;\n                    } else if(oldIndex <= selectedRowIndex && selectedRowIndex <= newIndex) {\n                        nextState.selectedCells[0].rowIndex -= 1;\n                        nextState.editingCell.rowIndex -= 1;\n                    } else if(newIndex <= selectedRowIndex && selectedRowIndex <= oldIndex) {\n                        nextState.selectedCells[0].rowIndex += 1;\n                        nextState.editingCell.rowIndex += 1;\n                    }\n                    return nextState;\n                })\n            }\n            props.onChange(arr);\n        }\n    };\n\n    const clearMatrix = (sRow, sCol, fRow, fCol) => {\n        const fields = [...data];\n        let srIndex = sRow < fRow ? sRow : fRow;\n        let frIndex = sRow > fRow ? sRow : fRow;\n        let scIndex = sCol < fCol ? sCol : fCol;\n        let fcIndex = sCol > fCol ? sCol : fCol;\n        for(let iRow = srIndex; iRow <= frIndex; iRow++){\n            for(let iCol = scIndex; iCol <= fcIndex; iCol++) {\n                const dataKey = columns.find((col, index) => index === iCol).dataKey\n                fields[iRow][dataKey] = null;\n            }\n        }\n        props.onChange(fields);\n    }\n\n    const selectMatrix = (sRow, sCol, fRow, fCol) => {\n        let srIndex = sRow < fRow ? sRow : fRow;\n        let frIndex = sRow > fRow ? sRow : fRow;\n        let scIndex = sCol < fCol ? sCol : fCol;\n        let fcIndex = sCol > fCol ? sCol : fCol;\n        setSelectedCell(sRow, sCol);\n        for(let iRow = srIndex; iRow <= frIndex; iRow++){\n            for(let iCol = scIndex; iCol <= fcIndex; iCol++) {\n                if(!(iRow === sRow && iCol === sCol)) {\n                    addSelectedCell(iRow, iCol);\n                    // console.log(\"addSelectedCell\", iRow, iCol)\n                }\n            }\n        }\n    }\n\n    /** ===================== Handlers ====================== */\n    const onKeyDownHandler = (e) => {\n        (e.keyCode === 9 || (48 <= e.keyCode && e.keyCode <= 90)) && onKeyPressHandler(e);\n        // (e.keyCode === 9 || e.keyCode === 67) && onKeyPressHandler(e);\n    }\n    const onKeyUpHandler = (e) => {\n        // console.log('onKeyUpHandler e', e);\n        (e.keyCode !== 9 && (e.keyCode < 48 || 90 < e.keyCode)) && onKeyPressHandler(e);\n        // e.keyCode !== 9 && onKeyPressHandler(e);\n    }\n    const onKeyPressHandler = (e) => {\n        const bodyRefContain = bodyRef && bodyRef.current && bodyRef.current.contains(e.target);\n\n        // console.log('onKeyPressHandler bodyRefContain', bodyRefContain);\n        if(bodyRefContain && state.selectedCells.length > 0) {\n            const {rowIndex, colIndex} = state.selectedCells[state.selectedCells.length - 1];\n            const _isEditing = isEditing(rowIndex, colIndex, state);\n            const _isInput = isInput(columns, colIndex);\n            const _isCheckBox = isCheckBox(columns, colIndex);\n\n\n            const moveTo = (direction) => moveToSelected(direction, rowIndex, colIndex, false);\n            const saveStateValue = () => onChangeValueHandler(rowIndex, colIndex, state.editValue);\n            const saveValue = (value) => onChangeValueHandler(rowIndex, colIndex, value);\n\n            // console.log('onKeyPressHandler e', e);\n            if(!e.metaKey &&  !e.ctrlKey && 48 <= e.keyCode && e.keyCode <= 90 && !_isEditing) {\n                // console.log(\"Латинские буквы и цыфры => \", e);\n                moveToSelected(null, rowIndex, colIndex, true, e.key);\n                // e.stopPropagation();\n                e.preventDefault();\n            } else if((e.metaKey || e.ctrlKey) && e.keyCode === 67){\n                onCopyCells();\n                e.preventDefault();\n                // e.preventDefault();\n            } else if((e.metaKey || e.ctrlKey) && e.keyCode === 86){\n                // onPasteCells();\n                // e.preventDefault();\n            } else {\n                switch (e.keyCode) {\n                    case 9: // Tab\n                        _isEditing && saveStateValue();\n                        moveTo('right');\n                        e.stopPropagation();\n                        e.preventDefault();\n                        break;\n                    case 13: // Enter\n                        if (_isEditing) {\n                            if(_isInput)\n                                saveStateValue();\n                            moveTo('down');\n                        } else\n                            !_isCheckBox && setEditingCell(rowIndex, colIndex);\n                        e.stopPropagation();\n                        e.preventDefault();\n                        break;\n                    case 27: // Esc\n                        moveTo(null);\n                        break;\n                    case 32: // Space\n                        // console.log(\"Space\", rowIndex, colIndex)\n                        _isCheckBox && onChangeCheckBoxFromKey(rowIndex, colIndex);\n                        !_isCheckBox && !_isEditing && moveToSelected(null, rowIndex, colIndex, true, e.key);\n                        e.preventDefault();\n                        break;\n                    case 37: // LEFT\n                        !_isEditing && moveTo('left'); break;\n                    case 38: // UP // _isEditing && _isInput && saveStateValue();\n                        !_isEditing && moveTo('up'); break;\n                    case 39: // RIGHT\n                        !_isEditing && moveTo('right'); break;\n                    case 40: // DOWN // _isEditing && _isInput && saveStateValue();\n                       !_isEditing && moveTo('down'); break;\n                    case 8: // Backspace\n                    case 46: // Delete\n                        // !_isEditing && saveValue(null) && setSelectedCell(rowIndex, colIndex);\n                        if(!_isEditing) {\n                            const {rowIndex: startRow, colIndex: startCol} = state.selectedCells[0];\n                            clearMatrix(startRow, startCol, rowIndex, colIndex);\n                        }\n                        e.preventDefault();\n                        break;\n                }\n            }\n        }\n    }\n    const onChangeValueHandler = (rowIndex, colIndex, value) => {\n        // console.log('onChangeHandler => ', rowIndex, colIndex, value);\n        const dataKey = columns.find((col, index) => index === colIndex).dataKey\n        const _value = validateValue(value);\n        const fields = [...data];\n        fields[rowIndex][dataKey] = _value;\n        props.onChange(fields);\n    }\n\n    const onScrollBody = ({ currentTarget, scrollLeft }) => {\n        const mergedScrollLeft = typeof scrollLeft === 'number' ? scrollLeft : currentTarget.scrollLeft;\n        const target = headerRef.current\n        if (!target) {\n            return;\n        }\n        if (typeof target === 'function') {\n            target(mergedScrollLeft);\n            // console.log('forceScroll function');\n        } else if (target.scrollLeft !== mergedScrollLeft) {\n            // eslint-disable-next-line no-param-reassign\n            target.scrollLeft = mergedScrollLeft;\n            // console.log('forceScroll target.scrollLeft');\n        }\n    }\n    const onSortEnd = ({oldIndex, newIndex}) => {changeIndexRow(oldIndex, newIndex);}\n\n    const onCellClickHandler = ({rowIndex, rowData, colIndex, col}) => (e) => {\n        // console.log('onCellClickHandler', rowIndex, colIndex, rowData, col);\n        if(colIndex === 0) return;\n        // One click\n        if(e.detail === 1) {\n            // console.log('One click', e);\n            if(state.editValue) {\n                const {rowIndex: eRowIndex, colIndex: eColIndex} = state.editingCell;\n                if(rowIndex === eRowIndex && colIndex === eColIndex)\n                    return;\n                isInput(columns, eColIndex) && onChangeValueHandler(eRowIndex, eColIndex, state.editValue);\n                isSelect(columns, eColIndex) && moveToSelected('down', eRowIndex, eColIndex, false);\n                setSelectedCell(rowIndex, colIndex);\n            } else {\n                if(e.shiftKey){\n                    const {rowIndex: startRow, colIndex: startCol} = state.selectedCells[0];\n                    selectMatrix(startRow, startCol, rowIndex, colIndex);\n                } else if(e.metaKey || e.ctrlKey){\n                    const {rowIndex: startRow, colIndex: startCol} = state.selectedCells[0];\n                    // setSelectedCell(startRow, startCol);\n                    addSelectedCell(rowIndex, colIndex);\n                } else {\n                    // !isSelectedCell(rowIndex, colIndex, state) &&\n                    setSelectedCell(rowIndex, colIndex);\n                }\n            }\n\n        }\n        // Double click\n        else if(e.detail === 2) {\n            // console.log('Double click');\n            !isCheckBox(columns, colIndex) && !isEditing(rowIndex, colIndex, state) && setEditingCell(rowIndex, colIndex);\n        }\n    }\n    const onCopyCells = () => {\n        // console.log('onCopy', state.selectedCells)\n        if(state.selectedCells && state.selectedCells.length > 0){\n            let copyObjects = {}, copyRows = []\n            for(let i = 0; i < state.selectedCells.length; i++){\n                const {rowIndex, colIndex} = state.selectedCells[i];\n                const dataKey = columns.find((col, index) => index === colIndex).dataKey\n                if(copyObjects[rowIndex])\n                    copyObjects[rowIndex].push(data[rowIndex][dataKey])\n                else {\n                    copyObjects[rowIndex] = [];\n                    copyObjects[rowIndex].push(data[rowIndex][dataKey])\n                }\n            }\n            // console.log('copyObjects', copyObjects);\n            for(let key in copyObjects){\n                // copyRows.push('\\\"' + copyObjects[key].join('\\\",\\\"') + '\\\"');\n                let rowString = \"\";\n                for(let i = 0; i < copyObjects[key].length; i++){\n                    const value = validateValue(copyObjects[key][i])\n                    if(value !== null)\n                            rowString += i === 0 ? `${value}` : `,${value}`;\n                    else\n                        rowString += i === 0 ? '' : `,`;\n                }\n                // copyRows.push(copyObjects[key].join(','));\n                copyRows.push(rowString);\n            }\n            // console.log('copyRows', copyRows);\n            // console.log('copyRow', copyRows.join('\\n'));\n            copyTextToClipboard( copyRows.join('\\n') || null);\n        }\n    }\n    const onPasteCells = (values) => {\n        // console.log('onPasteCells', values)\n        if(state.selectedCells && state.selectedCells.length > 0){\n                // const values = text.trim().split(\"\\n\");\n                const {rowIndex, colIndex} = state.selectedCells[0];\n                const dataKey = columns.find((col, index) => index === colIndex).dataKey\n                let _data = [...data];\n                let nextRowIndex = rowIndex;\n                let value;\n                for(let i = 0; i < values.length; i++){\n                    value = validateValue(values[i]);\n                    // console.log('validateValue result ', value)\n                    if(nextRowIndex >= data.length)\n                        _data.push({ [dataKey]: value })\n                    else\n                        _data[nextRowIndex][dataKey] = value;\n                    nextRowIndex += 1;\n                }\n                props.onChange(_data);\n        }\n    }\n\n    const onAddRow = (rowIndex) => {\n        const newRow = {};\n        if(data.length > 0) {\n            for (let key in data[0])\n                newRow[key] = null;\n        } else {\n            columns.forEach(col => newRow[col.dataKey] = null)\n        }\n\n        let arr = [...data];\n        if(rowIndex === null)\n            arr.splice(data.length, 0, newRow);\n        else if (rowIndex === -1)\n            arr.splice(0, 0, newRow);\n        else\n            arr.splice(rowIndex, 0, newRow);\n        props.onChange(arr);\n        // console.log('onAddRow', rowIndex);\n    }\n\n    const onRemoveRow = (rowIndex) => {\n        let arr = [...data];\n        arr.splice(rowIndex, 1); // Удаляем элемент со старого места\n        props.onChange(arr);\n        // console.log('onRemoveRow', rowIndex);\n    }\n\n    const onRemoveSelectedRows = () => {\n        // console.log('onRemoveSelectedRows');\n        if(state.selectedCells && state.selectedCells.length > 0){\n            let arr = [...data];\n            const selectedRows = state.selectedCells.map(cell => cell.rowIndex);\n\n            // for(let index in state.selectedCells){\n            //     const cell = state.selectedCells[index]\n            arr = arr.filter((row) => !selectedRows.includes(row.index))\n            // }\n            props.onChange(arr);\n\n        }\n    }\n\n    console.log('# Render editable-table', state.selectedCells && state.selectedCells.length);\n    return (\n        <TableStateContext.Provider value={{\n            state: state,\n            columns: columns,\n            setState: setState,\n            onCellClick: onCellClickHandler,\n            onChangeInput: onChangeInput,\n            onChangeInputWithSave: onChangeInputWithSave,\n            onChangeValue: onChangeValueHandler,\n            onPasteCells: onPasteCells,\n            onAddRow: onAddRow,\n            onRemoveRow: onRemoveRow,\n            onRemoveSelectedRows: onRemoveSelectedRows,\n        }}>\n            <Layout>\n                <div ref={headerRef} className={'editable-table-header'}>\n                    <table className={'editable-table'}>\n                        <ColGroup colWidths={state.colWidths} scrollbarSize={scrollbarSize} body={bodyRef.current}/>\n                        <thead className=\"editable-table-thead\">\n                            <HeaderRow rowIndex={-1}/>\n                        </thead>\n                    </table>\n                </div>\n                <div ref={bodyRef}\n                     className={'editable-table-body'}\n                     style={{display: 'flex', flexDirection: 'column'}}\n                     onScroll={onScrollBody}\n                >\n                    <table className={'editable-table'}>\n                        <ColGroup colWidths={state.colWidths}/>\n                        <Body data={data} onSortEnd={onSortEnd} useDragHandle/>\n                    </table>\n                    <Dropdown\n                        trigger={['contextMenu']}\n                        overlay={\n                            <Menu onClick={() => onAddRow(data.length)}>\n                                <Menu.Item key=\"addUp\"><InsertRowBelowOutlined />Добавить строку</Menu.Item>\n                            </Menu>}\n                    >\n                        <div style={{display: 'flex', flex: 'auto'}}/>\n                    </Dropdown>\n                </div>\n            </Layout>\n        </TableStateContext.Provider>\n    );\n};\n\nEditableTable.propTypes = {\n\n};\n\nexport default EditableTable;\n","import React from \"react\";\nimport {EyeOutlined, SortAscendingOutlined, ArrowsAltOutlined} from \"@ant-design/icons\";\nimport { Tooltip } from 'antd';\n\nconst selectOptions = {\n    visible: [null, true, false],\n    typeData: ['uuid', 'text', 'json', 'int', 'timestamp', 'date', 'time', 'bool', 'double'],\n    typeField: [ null, 'column', 'link', 'linkBack', 'custom', 'customAggregate'],\n    align: ['left', 'center', 'right']\n}\n// aliasOrName: \"id\"\n// filterInside: null\n// orderByInside: null\n// width: 350\n\nexport const columns = [{\n    title: 'Наименование',\n    dataKey: 'name',\n    width: 250,\n    resizable: true,\n    fixed: 'left',\n}, {\n    title: 'Псевдоним',\n    dataKey: 'alias',\n    width: 200,\n    resizable: true,\n    // fixed: 'left',\n}, {\n    title: 'Заголовок',\n    dataKey: 'header',\n    resizable: true,\n    width: 250\n}, {\n    title: 'Align',\n    dataKey: 'align',\n    component: 'select',\n    props: {\n        showSearch: true,\n        options: selectOptions.align.map(item => ({ label: `${item}`, value: item }))\n    },\n    width: 75\n}, {\n    title: 'T data',\n    dataKey: 'typeData',\n    component: 'select',\n    props: {\n        showSearch: true,\n        options: selectOptions.typeData.map(item => ({ label: `${item}`, value: item }))\n    },\n    width: 75\n}, {\n    title: 'T field',\n    dataKey: 'typeField',\n    component: 'select',\n    props: {\n        showSearch: true,\n        options: selectOptions.typeField.map(item => ({ label: `${item}`, value: item }))\n    },\n    width: 120\n}, {\n    title: 'Width',\n    dataKey: 'width',\n    width: 50\n}, {\n    title: <Tooltip title=\"Visible\"><EyeOutlined /></Tooltip>,\n    dataKey: 'visible',\n    align: 'center',\n    width: 25,\n    component: 'checkbox',\n}, {\n    title: <Tooltip title=\"Sortable\"><SortAscendingOutlined /></Tooltip>,\n    dataKey: 'sortable',\n    align: 'center',\n    component: 'checkbox',\n    width: 25\n}, {\n    title: <Tooltip title=\"Resizable\"><ArrowsAltOutlined /></Tooltip>,\n    dataKey: 'resizable',\n    align: 'center',\n    component: 'checkbox',\n    width: 25\n}, {\n    title: 'Ссылка',\n    dataKey: 'linkPath',\n    resizable: true,\n    width: 200\n}, {\n    title: 'Поле ссылки',\n    dataKey: 'linkView',\n    resizable: true,\n    width: 200\n}, {\n    title: 'Filter fields',\n    dataKey: 'filterFields',\n    resizable: true,\n    width: 150\n}, {\n    title: 'Filter signs',\n    dataKey: 'filterSigns',\n    resizable: true,\n    width: 150\n}, {\n    title: 'Default filter',\n    dataKey: 'defaultFilter',\n    resizable: true,\n    width: 115\n}, {\n    title: 'Default sort',\n    dataKey: 'defaultSort',\n    resizable: true,\n    width: 115\n\n}, {\n    title: 'Filter inside',\n    dataKey: 'filterInside',\n    resizable: true,\n    width: 115\n}, {\n    title: 'Order by inside',\n    dataKey: 'orderByInside',\n    resizable: true,\n    width: 125\n\n}]","import axios from 'axios';\nimport {notification} from \"antd\";\n\nconst DEFAULT_HEADERS = {\n\t'Content-type': 'application/json',\n};\n\nconst instance = axios.create({\n\tbaseURL: '/',\n\ttimeout: 1200000,\n\theaders: DEFAULT_HEADERS,\n});\n\nconst catchHandler = (err) => {\n\tif (err.response) {\n\t\t// console.log(\"catchHandler error.response.data => \", err.response);\n\t\tif (err.response.status === 401) {\n\t\t\twindow.location.href = \"/login\"\n\t\t}\n\t}\n\treturn Promise.reject(err);\n}\n\nexport const genericRequest = (options) => {\n\treturn instance({\n\t\t...options,\n\t})\n\t\t.then(response => {\n\t\t\t// console.log(\"genericRequest.response => \", response);\n\t\t\treturn response\n\t\t})\n\t\t.catch(catchHandler);\n}\n\nexport const apiGetDataBases = () =>\n\tgenericRequest({\n\t\tmethod: 'GET',\n\t\turl: '/api/databases'\n\t})\n\nexport const apiGetReq = (url) =>\n\tgenericRequest({\n\t\tmethod: 'GET',\n\t\turl: `/api${url}`\n\t})\n\nexport const apiPostReq = (url, data) =>\n\tgenericRequest({\n\t\tmethod: 'POST',\n\t\turl: `/api${url}`,\n\t\tdata: data\n\t})\nexport const apiDeleteReq = (url) =>\n\tgenericRequest({\n\t\tmethod: 'DELETE',\n\t\turl: `/api${url}`\n\t})\n\nexport const requestLoadConfig = (url) => () =>\n\tgenericRequest({\n\t\tmethod: 'GET',\n\t\turl: `/api${url}`,\n\t})\n\nexport const requestLoadData = (url) => ({params, data}) =>\n\tgenericRequest({\n\t\tmethod: 'POST',\n\t\turl: `/api${url}`,\n\t\tparams, data\n\t})\n\nexport const catchNotification = (err) => {\n\tconsole.error(err?.response?.data);\n\tnotification.error({\n\t\tmessage: 'Ошибка загрузки данных',\n\t\tdescription: err?.response?.data?.error\n\t});\n}","import React, {useEffect, useRef, useState} from \"react\";\nimport {useSelector} from \"react-redux\";\nimport {Button, Space, Spin, Input, Row} from \"antd\";\nimport {ReloadOutlined} from \"@ant-design/icons\";\nimport {Modal, Custom, Checkbox, Layout, DatePicker} from \"rt-design\";\nimport {requestLoadData, requestLoadConfig} from \"../../../../../../apis/network\";\nimport {EditableTableItem, Col} from \"../Query\";\nimport {validateValue} from \"../../../../../Base/EditableTable/EditableTable\";\n\nconst FilterInput = ({span, label, value, onChange}) => {\n    const myRef = useRef();\n    useEffect(() => {\n        myRef.current && myRef.current.focus()\n    }, [value])\n    return <Col span={span} label={label}>\n        <Input\n            size={'small'}\n            ref={myRef}\n            placeholder={`Введите ${label}`}\n            value={value}\n            onChange={(e) => onChange(validateValue(e.target.value))}\n        />\n    </Col>\n}\nconst FilterDatePicker = ({span, label, value, onChange}) => {\n    return <Col span={span} label={label}>\n        <DatePicker\n            size={'small'}\n            value={value}\n            onChange={(date) => onChange(date)}\n        />\n    </Col>\n}\nconst FilterArray = ({id, span, label, name, value, onChange}) => {\n\n    useEffect(() => {\n        // console.log('FilterArray mounted');\n    }, [])\n\n    const arrayToObject = (array) => ({ [name]: array ? array.map(f => ({name: f}) ) : [] })\n    const objectToArray = (object) => Array.isArray(object[name]) ? object[name].map(f => f.name) : []\n\n    const loadInitData = (callBack) => {\n        // console.log('FilterArray loadInitData', arrayToObject(value));\n        callBack(arrayToObject(value))\n    };\n    const subscribeOnChange = ({value}) => {\n        // onChange(value)\n        // console.log(\"FilterArray subscribe => \", objectToArray(value));\n        onChange(objectToArray(value))\n    }\n\n    return (\n        <Col span={span} label={label}>\n            <Custom\n                // itemProps={{name: name}}\n                subscribe={[{\n                    name: `${id}.${name}`,\n                    path: `rtd.query.config.${id}.preview.filters.${name}`,\n                    onChange: subscribeOnChange,\n                }]}\n                render={() => {\n                    // console.log('Custom', value);\n                    return (\n                        <Modal\n                            buttonProps={{\n                                size: 'small',\n                                label: `Элементов: ${value ? value.length : 0}`,\n                                type: 'default',\n                                style: {width: '100%'}\n                            }}\n                            toolTipProps={{title: label}}\n                            dispatch={{path: `query.config.${id}.preview.filters.${name}`}}\n                            modalConfig={{\n                                type: 'save',\n                                title: label,\n                                width: 600,\n                                bodyStyle: {height: 500},\n                                form: {\n                                    name: 'TableList',\n                                    noPadding: true,\n                                    loadInitData: loadInitData\n                                },\n                            }}\n                        >\n                            <EditableTableItem name={name} columns={[{title: 'Наименование', dataKey: 'name'}]}/>\n                        </Modal>\n                    )\n                }}\n            />\n        </Col>\n    )\n}\n\nconst PreviewBase = ({data, type, Component}) => {\n    const [loaded, setLoaded] = useState(false);\n    const [onlineUpdateFilters, setOnlineUpdateFilters] = useState(true);\n    const [styleState, setStyleState] = useState({\n        fixWidthColumn: true,\n        infinityMode: false,\n        zebraStyle: false,\n        selectable: false,\n        nodeAssociated: true,\n    });\n    const [filters, setFilters] = useState({})\n\n    const formData = useSelector((state) => state?.rtd?.query?.config?.[data.id]?.form)\n    // `query.config.${data.id}.form`\n    //dispatch={{path: `query.config.${data.id}.form`}}\n    useEffect(() => {\n        if(!loaded){\n            setTimeout(() => setLoaded(true), 20);\n        }\n    }, [loaded])\n\n    useEffect(() => {\n        onlineUpdateFilters && setLoaded(false)\n    }, [filters])\n\n    const requestLoadRowsHandler = () => {\n        // console.log(\"requestLoadRowsHandler => \", formData);\n        if(type === 'SQL')\n            if(formData)\n                return requestLoadData(formData.url.data.sql)\n            else\n                return requestLoadData(data.url.data.sql)\n        else if(formData)\n            return formData.hierarchical\n                ? requestLoadData(formData.url.data.hierarchical)\n                : requestLoadData(formData.url.data.flat)\n        else\n            return data.hierarchical\n                ? requestLoadData(data.url.data.hierarchical)\n                : requestLoadData(data.url.data.flat)\n    }\n\n    const onClickReload = () => setLoaded(false)\n\n    const onChangeStyleState = (name) => (e) => {\n        const value = e.target.checked;\n        setLoaded(false)\n        setStyleState({...styleState, [name]: value})\n    }\n\n    const StyleCheckBox = ({name, label}) => {\n        return <Checkbox\n            checked={styleState[name]}\n            onChange={onChangeStyleState(name)}>{label}</Checkbox>\n    }\n\n    const onChangeFilterState = (filterItem) => (value) => {\n        if(value)\n            setFilters({...filters, [filterItem]: value})\n        else\n            setFilters({...filters, [filterItem]: undefined})\n    }\n\n    const renderFilters = () => {\n        const id = formData ? formData.id : data.id;\n        const fields = formData ? formData.fields : data.fields;\n        let FilterComponent;\n        return fields.map(field => {\n            if (field?.filterFields && field?.filterSigns) {\n                let filterFields = field.filterFields.split('/');\n                let filterSigns = field.filterSigns.split('/');\n                // console.log('renderFilters', filterFields, filterSigns)\n                if(filterFields.length === filterSigns.length) {\n                    return filterFields.map((filterItem, index) => {\n                        if (filterSigns[index] === 'in')\n                            FilterComponent = FilterArray;\n                        else if(['timestamp', 'date'].includes(field.typeData))\n                            FilterComponent = FilterDatePicker;\n                        else\n                            FilterComponent = FilterInput;\n                        return <FilterComponent\n                            key={index}\n                            id={id}\n                            span={3}\n                            label={`${filterItem} [${filterSigns[index]}]`}\n                            name={filterItem}\n                            value={filters[filterItem]}\n                            onChange={onChangeFilterState(filterItem)}\n                            // onChange={(value) => { setFilters({...filters, [filterItem]: value}) }}\n                        />\n                    });\n                }\n            }\n        })\n    }\n\n    return (\n        <Layout>\n            <Space direction={\"vertical\"} style={{marginBottom: '8px'}}>\n                <div style={{display: \"flex\", justifyContent: 'space-between', paddingRight: '8px'}}>\n                    <Space>\n                        <Button size={'small'} icon={<ReloadOutlined/>} onClick={onClickReload}>Reload preview</Button>\n                        <Checkbox\n                            checked={onlineUpdateFilters}\n                            onChange={(e) => setOnlineUpdateFilters(e.target.checked)}>\n                            Online update filter\n                        </Checkbox>\n                    </Space>\n                    <Space>\n                        <StyleCheckBox name={'fixWidthColumn'} label={'Fix width column'}/>\n                        {/*<StyleCheckBox name={'infinityMode'} label={'Infinity mode'}/>*/}\n                        <StyleCheckBox name={'selectable'} label={'Selectable'}/>\n                        <StyleCheckBox name={'zebraStyle'} label={'Zebra style'}/>\n                        <StyleCheckBox name={'nodeAssociated'} label={'Node associated'}/>\n                    </Space>\n                </div>\n                <Row gutter={8}>\n                    {renderFilters()}\n                </Row>\n            </Space>\n            {loaded\n                ? <Layout>\n                    <Component\n                        {...styleState}\n                        defaultFilter={filters}\n                        requestLoadRows={requestLoadRowsHandler()}\n                        requestLoadConfig={requestLoadConfig(data.url.configuration.get)}\n                    />\n                </Layout>\n                : <Spin />\n            }\n        </Layout>\n    )\n}\n\nexport default PreviewBase;\n","import React from \"react\";\nimport Icon from \"@ant-design/icons\";\n\nconst SqlSvg = () => (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"icon icon-tabler icon-tabler-code\" width=\"12\" height=\"12\"\n         viewBox=\"0 0 24 24\" strokeWidth=\"1.5\" stroke=\"#000000\" fill=\"none\" strokeLinecap=\"round\"\n         strokeLinejoin=\"round\">\n        <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"/>\n        <polyline points=\"7 8 3 12 7 16\"/>\n        <polyline points=\"17 8 21 12 17 16\"/>\n        <line x1=\"14\" y1=\"4\" x2=\"10\" y2=\"20\"/>\n    </svg>\n);\n\nconst QuerySvg = () => (\n    <svg width=\"1em\" height=\"1em\" viewBox=\"0 0 13 12\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\">\n        <path d=\"M12.5357 0C12.2789 0 9.51786 0 9.51786 0H6.5H0.464286C0.207478 0 0 0.210795 0 0.47171V11.5283C0 11.7892 0.207478 12 0.464286 12H12.5357C12.7925 12 13 11.7892 13 11.5283V0.47171C13 0.210795 12.7925 0 12.5357 0ZM11.9167 4.69565H9.20833V2.6087H11.9167V4.69565ZM11.9167 7.82609H9.20833V5.73913H11.9167V7.82609ZM4.875 5.73913H8.125V7.82609H4.875V5.73913ZM8.125 4.69565H4.875V2.6087H8.125V4.69565ZM1.08333 5.73913H3.79167V7.82609H1.04464L1.08333 5.73913ZM1.08333 2.6087H3.79167V4.68851H1.04464L1.08333 2.6087ZM1.08333 8.86957H3.79167V10.9565H1.08333V8.86957ZM4.875 8.86957H8.125V10.9565H4.875V8.86957ZM11.9167 10.9565H9.20833V8.86957H11.9167V10.9565Z\"/>\n    </svg>\n)\n\nconst ColumnSvg = () => (\n    <svg width=\"1em\" height=\"1em\" viewBox=\"0 0 13 12\" fill=\"currentColor\" stroke=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n        <path d=\"M12.5357 0C12.2789 0 9.51786 0 9.51786 0H6.5H0.464286C0.207478 0 0 0.210795 0 0.47171V11.5283C0 11.7892 0.207478 12 0.464286 12H12.5357C12.7925 12 13 11.7892 13 11.5283V0.47171C13 0.210795 12.7925 0 12.5357 0ZM11.9167 4.69565H9.20833V2.6087H11.9167V4.69565ZM11.9167 7.82609H9.20833V5.73913H11.9167V7.82609ZM4.875 5.73913H8.125V7.82609H4.875V5.73913ZM8.125 4.69565H4.875V2.6087H8.125V4.69565ZM1.08333 5.73913H3.79167V7.82609H1.04464L1.08333 5.73913ZM1.08333 2.6087H3.79167V4.68851H1.04464L1.08333 2.6087ZM1.08333 8.86957H3.79167V10.9565H1.08333V8.86957ZM4.875 8.86957H8.125V10.9565H4.875V8.86957ZM11.9167 10.9565H9.20833V8.86957H11.9167V10.9565Z\"/>\n        <path d=\"M3.875 1V11H1V1H3.875Z\" strokeWidth=\"2\"/>\n        <path d=\"M5.14587 0V12\" stroke=\"white\"/>\n    </svg>\n\n)\n\nconst SaveSvg = () => (\n    <svg width=\"1em\" height=\"1em\"  viewBox=\"0 0 28 28\" fill=\"none\" stroke=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\">\n        <path d=\"M8.5 1H2C1.44772 1 1 1.44772 1 2V26C1 26.5523 1.44772 27 2 27H7M8.5 1V6.5C8.5 7.05228 8.94772 7.5 9.5 7.5H18.5C19.0523 7.5 19.5 7.05228 19.5 6.5V1M8.5 1H19.5M19.5 1H20.5622C20.8413 1 21.1077 1.11664 21.297 1.32172L26.7348 7.2127C26.9053 7.39743 27 7.63959 27 7.89098V26C27 26.5523 26.5523 27 26 27H21M7 27V19C7 18.4477 7.44772 18 8 18H14H20C20.5523 18 21 18.4477 21 19V27M7 27H21\" strokeWidth=\"3\"/>\n    </svg>\n)\n\nconst FlowSvg = () => (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"icon icon-tabler icon-tabler-route\" width=\"1em\" height=\"1em\"\n         viewBox=\"0 0 24 24\" strokeWidth=\"2\" fill=\"none\" stroke=\"currentColor\" strokeLinecap=\"round\"\n         strokeLinejoin=\"round\">\n        <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"/>\n        <circle cx=\"6\" cy=\"19\" r=\"2\"/>\n        <circle cx=\"18\" cy=\"5\" r=\"2\"/>\n        <path d=\"M12 19h4.5a3.5 3.5 0 0 0 0 -7h-8a3.5 3.5 0 0 1 0 -7h3.5\"/>\n    </svg>\n)\n\nconst LogOutSvg = () => (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"icon icon-tabler icon-tabler-logout\" width=\"16\" height=\"16\"\n         viewBox=\"0 0 24 24\" strokeWidth=\"2\" stroke=\"currentColor\" fill=\"none\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n        <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"/>\n        <path d=\"M14 8v-2a2 2 0 0 0 -2 -2h-7a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h7a2 2 0 0 0 2 -2v-2\"/>\n        <path d=\"M7 12h14l-3 -3m0 6l3 -3\"/>\n    </svg>\n)\n\nconst UsersSvg = () => (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"icon icon-tabler icon-tabler-users\" width=\"1em\" height=\"1em\"\n         viewBox=\"0 0 24 24\" strokeWidth=\"2\" stroke=\"currentColor\" fill=\"none\" strokeLinecap=\"round\"\n         strokeLinejoin=\"round\">\n        <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"/>\n        <circle cx=\"9\" cy=\"7\" r=\"4\"/>\n        <path d=\"M3 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2\"/>\n        <path d=\"M16 3.13a4 4 0 0 1 0 7.75\"/>\n        <path d=\"M21 21v-2a4 4 0 0 0 -3 -3.85\"/>\n    </svg>\n)\n\nconst JiraSvg = () => (\n    <svg width=\"1em\" height=\"1em\" viewBox=\"0 0 23 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n        <path d=\"M22.7287 11.337L12.47 0.99448L11.4835 0L3.78949 7.7569L0.271265 11.3039C-0.0904216 11.6685 -0.0904216 12.2652 0.271265 12.663L7.30772 19.7569L11.4835 24L19.1776 16.2431L19.3091 16.1105L22.7287 12.663C23.0904 12.2983 23.0904 11.7017 22.7287 11.337ZM11.4835 15.547L7.96535 12L11.4835 8.453L15.0018 12L11.4835 15.547Z\" fill=\"#2684FF\"/>\n        <path d=\"M11.4837 8.4531C9.18206 6.1327 9.18206 2.35365 11.4508 0.0332031L3.75671 7.7901L7.93256 12.0001L11.4837 8.4531Z\" fill=\"url(#paint0_linear)\"/>\n        <path d=\"M15.0019 12L11.4836 15.547C13.7852 17.8674 13.7852 21.6464 11.4836 24L19.2105 16.2099L15.0019 12Z\" fill=\"url(#paint1_linear)\"/>\n        <defs>\n            <linearGradient id=\"paint0_linear\" x1=\"10.8561\" y1=\"4.85952\" x2=\"5.90266\" y2=\"9.77282\" gradientUnits=\"userSpaceOnUse\">\n                <stop offset=\"0.176\" stopColor=\"#0052CC\"/>\n                <stop offset=\"1\" stopColor=\"#2684FF\"/>\n            </linearGradient>\n            <linearGradient id=\"paint1_linear\" x1=\"12.1565\" y1=\"19.0892\" x2=\"17.1001\" y2=\"14.1858\" gradientUnits=\"userSpaceOnUse\">\n                <stop offset=\"0.176\" stopColor=\"#0052CC\"/>\n                <stop offset=\"1\" stopColor=\"#2684FF\"/>\n            </linearGradient>\n        </defs>\n    </svg>\n)\n\nexport const SqlIcon = (props) => <Icon component={SqlSvg} className={'anticon-sql'} {...props}/>\nexport const QueryIcon = (props) => <Icon component={QuerySvg} className={'anticon-table'} {...props}/>\nexport const ColumnIcon = (props) => <Icon component={ColumnSvg} className={'anticon-column'} {...props}/>\nexport const SaveIcon = (props) => <Icon component={SaveSvg} className={'anticon-save'} {...props}/>\nexport const FlowIcon = (props) => <Icon component={FlowSvg} className={'anticon-flow'} {...props}/>\nexport const LogOutIcon = (props) => <Icon component={LogOutSvg} className={'anticon-logout'} {...props}/>\nexport const UsersIcon = (props) => <Icon component={UsersSvg} className={'anticon-users'} {...props}/>\nexport const JiraIcon = (props) => <Icon component={JiraSvg} className={'anticon-jira'} {...props}/>","import {\n    Custom,\n    Modal,\n} from \"rt-design\";\nimport React from \"react\";\nimport {Col, EditableTableItem} from \"../Query/Query\";\n\nexport const convertHierarchyFieldStringToTable = (value) => ({hierarchyField: value && value.length > 0 ? value.split('/').map(f => ({name: f})) : []})\nexport const convertHierarchyFieldTableToString = (value) => Array.isArray(value.hierarchyField) ? value.hierarchyField.map(f => f.name).join('/') : \"\"\n\nexport const convertSharedForRolesStringToTable = (value) => ({sharedForRoles: value && value.length > 0 ? JSON.parse(value).map(f => ({name: f})) : []})\nexport const convertSharedForRolesTableToString = (value) => Array.isArray(value.sharedForRoles) ? JSON.stringify(value.sharedForRoles.map(f => f.name)) : null\n\nexport const convertSharedForUsersStringToTable = (value) => ({sharedForUsers: value && value.length > 0 ? JSON.parse(value).map(f => ({name: f})) : []})\nexport const convertSharedForUsersTableToString = (value) => Array.isArray(value.sharedForUsers) ? JSON.stringify(value.sharedForUsers.map(f => f.name)) : null\n\nexport const LargeModalArrayFields = (props) => { // 'hierarchyField'\n    const {id, span, type, buttonLabel, modalTitle, name, stringToTable, tableToString} = props;\n    // const loadInitData = (value) => (callBack) => {\n    //     const _value = stringToTable(value)\n    //     // console.log('loadInitData', _value);\n    //     callBack(_value)\n    // };\n    // const subscribeOnChange = ({value, setSubscribeProps}) => {\n    //     const _value = tableToString(value)\n    //     // console.log(\"subscribe => \", _value);\n    //     setSubscribeProps({value: _value});\n    // }\n    return (\n        <Col span={span} label={modalTitle}>\n            <SmallModalArrayFields {...props} buttonSize={'middle'}/>\n            {/*<Custom*/}\n            {/*    itemProps={{name: name}}*/}\n            {/*    subscribe={[{*/}\n            {/*        name: `${id}.${name}`,*/}\n            {/*        path: `rtd.query.config.${id}.modals.${name}`,*/}\n            {/*        onChange: subscribeOnChange,*/}\n            {/*    }]}*/}\n            {/*    render={({value}) => {*/}\n            {/*        // console.log('Custom', value);*/}\n            {/*        return (*/}\n            {/*            <Modal*/}\n            {/*                buttonProps={{*/}\n            {/*                    label: `Элементов: ${stringToTable(value)[name].length}`,*/}\n            {/*                    type: 'default',*/}\n            {/*                    style: {width: '100%', backgroundColor: '#dbe7f7'}*/}\n            {/*                }}*/}\n            {/*                toolTipProps={{title: modalTitle}}*/}\n            {/*                dispatch={{path: `query.config.${id}.modals.${name}`}}*/}\n            {/*                modalConfig={{*/}\n            {/*                    type: 'editOnLocal',*/}\n            {/*                    title: modalTitle,*/}\n            {/*                    width: 600,*/}\n            {/*                    bodyStyle: {height: 500},*/}\n            {/*                    form: {*/}\n            {/*                        name: 'TableList',*/}\n            {/*                        noPadding: true,*/}\n            {/*                        loadInitData: loadInitData(value)*/}\n            {/*                    },*/}\n            {/*                }}*/}\n            {/*            >*/}\n            {/*                <EditableTableItem name={name} columns={[{title: 'Наименование', dataKey: 'name'}]}/>*/}\n            {/*            </Modal>*/}\n            {/*        )*/}\n            {/*    }}*/}\n            {/*/>*/}\n        </Col>\n    )\n}\n\nexport const SmallModalArrayFields = ({id, type, buttonLabel, buttonSize = 'small', modalTitle, name, stringToTable, tableToString}) => { // 'hierarchyField'\n\n    const loadInitData = (value) => (callBack) => {\n        const _value = stringToTable(value)\n        // console.log('loadInitData', _value);\n        callBack(_value)\n    };\n    const subscribeOnChange = ({value, setSubscribeProps}) => {\n        const _value = tableToString(value)\n        // console.log(\"subscribe => \", _value);\n        setSubscribeProps({value: _value});\n    }\n    return (\n        <Custom\n            itemProps={{name: name}}\n            subscribe={[{\n                name: `${id}.${name}`,\n                path: `rtd.${type}.config.${id}.modals.${name}`,\n                onChange: subscribeOnChange,\n            }]}\n            render={({value}) => {\n                // console.log('Custom', value);\n                return (\n                    <Modal\n                        buttonProps={{\n                            label: buttonLabel({length: stringToTable(value)[name].length}),// `Элементов: ${stringToTable(value)[name].length}`,\n                            type: 'default',\n                            size: buttonSize,\n                            style: {width: '100%', backgroundColor: '#dbe7f7'}\n                        }}\n                        toolTipProps={{title: modalTitle}}\n                        dispatch={{path: `${type}.config.${id}.modals.${name}`}}\n                        modalConfig={{\n                            type: 'save',\n                            title: modalTitle,\n                            width: 600,\n                            bodyStyle: {height: 500},\n                            form: {\n                                name: 'TableList',\n                                noPadding: true,\n                                loadInitData: loadInitData(value)\n                            },\n                        }}\n                    >\n                        <EditableTableItem name={name} columns={[{title: 'Наименование', dataKey: 'name'}]}/>\n                    </Modal>\n                )\n            }}\n        />\n    )\n}","import React from 'react';\nimport {Table} from \"rt-design\";\nimport PreviewBase from \"./PreviewBase\";\n\nexport default props => <PreviewBase {...props} Component={Table} />;","import React, {useEffect, useState} from 'react';\nimport SplitPane, {Size} from 'react-split-pane';\nimport PreviewBase from \"./PreviewBase\";\nimport {Layout, TextArea, Text} from \"rt-design\";\nimport {Col, Row, Space} from \"antd\";\n\nconst Sql = ({defaultFilter, requestLoadRows}) => {\n\n    const [data, setData] = useState({});\n\n    useEffect(() => {\n        requestLoadRows({data: defaultFilter})\n            .then(res => {setData(res.data)})\n            .catch(err => console.log(err));\n    }, [])\n\n    const getParams = () => {\n        let render = [];\n        if(!data.params)\n            return null;\n        const params = JSON.parse(data.params)\n        for(const key in params){\n            render.push(\n                <Row className={'preview-sql-param-row'}>\n                    <Col span={8} className={'preview-sql-param-key'}>{key}</Col>\n                    <Col span={16} className={'preview-sql-param-value'}>{Array.isArray(params[key]) ? params[key].join(', ') : params[key]}</Col>\n                </Row>)\n        }\n        return render;\n    }\n\n    return (\n        <Layout className={'preview-sql'}>\n            <SplitPane\n                // className={'Catalog'} style={{width: '30%'}}\n                split='vertical'\n                minSize={'30%'}\n                maxSize={'70%'}\n                defaultSize={'30%'}\n            >\n                <Space direction={\"vertical\"} size={0} className={'preview-sql-params'} style={{width: '100%', overflow: 'auto'}}>\n                    {getParams()}\n                </Space>\n                <div style={{display: 'flex', width: '100%'}}>\n                    <TextArea value={data.sql}/>\n                </div>\n            </SplitPane>\n\n            {/*<div style={{display: 'flex', height: '100%'}}>*/}\n            {/*   */}\n            {/*</div>*/}\n        </Layout>\n    )\n}\n\nexport default props => <PreviewBase {...props} type={'SQL'} Component={Sql} />;","import React, {useEffect, useState} from 'react';\nimport PropTypes from 'prop-types';\nimport {\n    Col as AntCol,\n    Row,\n    Space,\n    Tabs,\n    Result,\n    notification, Collapse, Button, Spin\n} from \"antd\";\nimport {\n    Form,\n    FormBody,\n    Input as RtInput,\n    Checkbox as RtCheckBox,\n    Custom,\n    Modal,\n    Layout,\n    TextArea,\n    Table,\n    RadioGroup\n} from \"rt-design\";\nimport EditableTable, {validateValue} from \"../../../../Base/EditableTable/EditableTable\";\nimport {columns} from \"./queryFields\";\nimport {\n    InsertRowLeftOutlined,\n    ConsoleSqlOutlined,\n    FileSearchOutlined,\n    ApiOutlined,\n    ScheduleOutlined,\n    DatabaseOutlined, ReloadOutlined\n} from \"@ant-design/icons\";\nimport {\n    apiPostReq,\n    catchNotification, requestLoadConfig,\n} from \"../../../../../apis/network\";\nimport PreviewBase from \"./Tabs/PreviewBase\";\nimport {ColumnIcon, SqlIcon, UsersIcon} from \"../../../../../imgs/icons\";\nimport {\n    convertHierarchyFieldStringToTable,\n    convertHierarchyFieldTableToString,\n    convertSharedForRolesStringToTable,\n    convertSharedForRolesTableToString,\n    convertSharedForUsersStringToTable,\n    convertSharedForUsersTableToString,\n    LargeModalArrayFields\n} from \"../Core/ModalArrayFields\";\nimport ModalLoadFields from \"./ModalLoadFields\";\nimport PreviewTable from \"./Tabs/PreviewTable\";\nimport PreviewSQL from \"./Tabs/PreviewSQL\";\n\nconst Input = ({span, name, label}) => {\n    return <Col span={span} label={label}>\n        {/*<AntInput value={configData[name]} onChange={onChange('value')}/>*/}\n        <RtInput itemProps={{name: name, normalize: value => validateValue(value) }}/>\n    </Col>\n}\nexport const Col = ({children, span, label}) => {\n    return (\n        <AntCol span={span}>\n            <Space direction={\"vertical\"} size={0} style={{width: '100%'}}>\n                <span>{label}</span>\n                {children}\n            </Space>\n        </AntCol>\n    )\n}\n\nconst CheckBoxCol = ({span, children}) => (\n    <AntCol span={span} style={{justifyContent: 'flex-end', display: 'flex', flexDirection: 'column'}}>\n        {Array.isArray(children)\n            ? children.map((child, index) => (<div key={index}>{child}</div>))\n            : <div>{children}</div>\n        }\n    </AntCol>\n)\n\nexport const EditableTableItem = ({name, columns}) => (\n    <Custom\n        itemProps={{name: name}}\n        render={({onChange, value}) => {\n            return (\n                <Layout style={{width: '100%'}}>\n                    <EditableTable\n                        // rowKey={'name'}\n                        columns={columns}\n                        data={value}\n                        // data={data.fields}\n                        onChange={onChange}\n                        // onChange={ (fields) => {\n                        //     // const _data = {...configData};\n                        //     // _data.fields = fields;\n                        //     // setConfigData(_data)\n                        //     console.log(\"onChange fields => \", fields)\n                        // }}\n                    />\n                </Layout>\n            );\n        }}\n    />\n)\n\nconst Query = props => {\n\n    // const {data} = props;\n\n    const [loaded, setLoaded] = useState(false);\n    const [data, setData] = useState(props.data);\n    const [visibleGenInfo, setVisibleGenInfo] = useState([]);\n\n    useEffect(() => {\n        if(!loaded){\n            requestLoadConfig(data.url.configuration.get)()\n                .then(res => {\n                    setData({...data, ...res.data})\n                    setLoaded(true);\n                })\n                .catch(catchNotification)\n        }\n    }, [loaded])\n\n    const onChange = (valuePropName) => (event) => {\n        const value = event && event.target && valuePropName in event.target\n            ? event.target[valuePropName]\n            : event\n        console.log(\"onChange => \", value);\n    }\n\n    const onValuesFromChange = (changedValues, allValues) => {\n        // console.log('changedValues ', changedValues)\n        // console.log('data ', data)\n        if (data.dataBase.readOnly) {\n            notification.error({\n                message: 'База доступна только на чтение'\n            });\n        } else {\n            const newData = {...data, ...allValues};\n            apiPostReq(data.url.configuration.set, newData)\n                .then(res => {\n                    // setLocalData(newData)\n                    notification.success({message: `Save [${data.configName}]`})\n                })\n                .catch(err => catchNotification(err))\n        }\n    }\n\n    // return (\n    //     <EditableTable\n    //         // data={value}\n    //         data={data.fields}\n    //         // onChange={onChange}\n    //         onChange={(fields) => {\n    //             // const _data = {...configData};\n    //             // _data.fields = fields;\n    //             // setConfigData(_data)\n    //             console.log(\"onChange fields => \", fields)\n    //         }}\n    //     />\n    // )\n\n    const onChangeCollapsePanel = (key) => {\n        // console.log(key);\n        setVisibleGenInfo(key);\n    }\n\n    const onClickCollapsePanelExtra = (e) => {\n        e.stopPropagation();\n        setLoaded(false);\n    }\n    const CollapsePanelExtra = () =>\n        <Button size={\"small\"} icon={<ReloadOutlined/>} onClick={onClickCollapsePanelExtra}>Reload config</Button>\n\n    if(loaded)\n    return (\n        <Form\n            layout={'vertical'}\n            name={'query-config-from'}\n            className={'query-config'}\n            loadInitData={(callBack) => callBack(data)}\n            onValuesChange={onValuesFromChange}\n            onFinish={(values) => console.log('query-config-from', values)}\n            dispatch={{path: `query.config.${data.id}.form`}}\n        >\n            <FormBody noPadding={true}>\n                <Collapse activeKey={visibleGenInfo} onChange={onChangeCollapsePanel} bordered={false} ghost={true}>\n                    <Collapse.Panel header={'Общая информация'} extra={<CollapsePanelExtra/>}\n                                    className={'query-config-header'} key=\"qwerty\">\n                        <Row gutter={8}>\n                            {/*<RtInput itemProps={{name: 'dataBase', hidden: true}}/>*/}\n                            <Input span={6} label={'Описание'} name={'description'}/>\n                            <Input span={6} label={'Имя таблицы'} name={'tableName'}/>\n                            {/*<ModalLoadFields span={3} modalTitle={'Загрузить поля'} dataBase={data.dataBase}/>*/}\n                            <LargeModalArrayFields\n                                id={data.id}\n                                span={3}\n                                type={'query'}\n                                buttonLabel={({length}) => <span>Fields: {length}</span>}\n                                modalTitle={'Скрытые поля'}\n                                name={'hierarchyField'}\n                                stringToTable={convertHierarchyFieldStringToTable}\n                                tableToString={convertHierarchyFieldTableToString}\n                            />\n                            <LargeModalArrayFields\n                                id={data.id}\n                                span={3}\n                                type={'query'}\n                                buttonLabel={({length}) => <span>Users: {length}</span>}\n                                modalTitle={'Доступ пользователям'}\n                                name={'sharedForUsers'}\n                                stringToTable={convertSharedForUsersStringToTable}\n                                tableToString={convertSharedForUsersTableToString}\n                            />\n                            <LargeModalArrayFields\n                                id={data.id}\n                                span={3}\n                                type={'query'}\n                                buttonLabel={({length}) => <span>Roles: {length}</span>}\n                                modalTitle={'Доступ ролям'}\n                                name={'sharedForRoles'}\n                                stringToTable={convertSharedForRolesStringToTable}\n                                tableToString={convertSharedForRolesTableToString}\n                            />\n                        </Row>\n                        <Row gutter={8} style={{marginTop: 8}}>\n                            <Input span={6} label={'Поле с иконкой иерархии'} name={'hierarchyView'}/>\n                            <Input span={6} label={'Пользовательские настройки'} name={'userSettings'}/>\n                            <CheckBoxCol span={6}>\n                                <RtCheckBox itemProps={{name: 'hierarchical', valuePropName: 'checked'}}>\n                                    Иерархичная таблица\n                                </RtCheckBox>\n                                <RtCheckBox itemProps={{name: 'hierarchyLazyLoad', valuePropName: 'checked'}}>\n                                    Ленивая загрузка таблицы\n                                </RtCheckBox>\n                            </CheckBoxCol>\n                            <CheckBoxCol span={6}>\n                                <RtCheckBox itemProps={{name: 'loggingQueries', valuePropName: 'checked'}}>\n                                    Логирование запросов\n                                </RtCheckBox>\n                            </CheckBoxCol>\n                        </Row>\n                    </Collapse.Panel>\n                </Collapse>\n                <Tabs className={'app-page-tabs app-page-tabs-horizontal'} style={{marginTop: 8}}>\n                    <Tabs.TabPane key=\"1\" tab={<span><ColumnIcon style={{margin: '0 4px 0 0'}}/>Поля</span>}>\n                        <EditableTableItem name={'fields'} columns={columns}/>\n                    </Tabs.TabPane>\n                    <Tabs.TabPane key=\"2\" tab={<span><SqlIcon style={{margin: '0 4px 0 0'}}/>Custom SQL</span>}>\n                        {/*<Result title=\"Раздел [Custom SQL] в разработке\" style={{margin: 'auto'}}/>*/}\n                        <TextArea itemProps={{name: 'customSql', normalize: value => value}}/>\n                    </Tabs.TabPane>\n                    <Tabs.TabPane key=\"4\"\n                                  tab={<span><FileSearchOutlined style={{margin: '0 4px 0 0'}}/>Preview table</span>}>\n                        {/*<Result title=\"Раздел [PreView] в разработке\" style={{margin: 'auto'}}/>*/}\n                        <PreviewTable data={data}/>\n                    </Tabs.TabPane>\n                    <Tabs.TabPane key=\"3\"\n                                  tab={<span><FileSearchOutlined style={{margin: '0 4px 0 0'}}/>Preview SQL</span>}>\n                        {/*<Result title=\"Раздел [Preview SQL] в разработке\" style={{margin: 'auto'}}/>*/}\n                        <PreviewSQL data={data}/>\n                    </Tabs.TabPane>\n                    <Tabs.TabPane key=\"5\" tab={<span><ApiOutlined style={{margin: '0 4px 0 0'}}/>Test Request</span>}>\n                        <Result title=\"Раздел [Test Request] в разработке\" style={{margin: 'auto'}}/>\n                    </Tabs.TabPane>\n                    <Tabs.TabPane key=\"6\"\n                                  tab={<span><ScheduleOutlined style={{margin: '0 4px 0 0'}}/>Auto tests</span>}>\n                        <Result title=\"Раздел [Auto tests] в разработке\" style={{margin: 'auto'}}/>\n                    </Tabs.TabPane>\n                </Tabs>\n            </FormBody>\n        </Form>\n    )\n    else\n        return <Spin/>\n};\n\n// customSql: null\n\nQuery.propTypes = {};\n\nexport default Query;","import React, {useState, useEffect} from 'react';\nimport {Button, Input, Row, Col, Checkbox, Select, notification} from 'antd';\nimport objectPath from 'object-path';\nimport {\n\tForkOutlined,\n\tTableOutlined,\n\tInsertRowRightOutlined,\n\tSisternodeOutlined,\n\tCloseOutlined,\n} from '@ant-design/icons';\nimport {notificationError} from '../../../../../utils/baseUtils';\nimport {apiGetReq} from \"../../../../../apis/network\";\nimport {ColumnIcon, QueryIcon} from \"../../../../../imgs/icons\";\n\nconst prefixCls = 'save-form-logic';\nconst prefixTreeCls = `${prefixCls}-tree`;\n\nconst Div = (props) => {\n\treturn (\n\t\t<div\n\t\t\tclassName={props.className}\n\t\t\tstyle={props.style}\n\t\t\tonClick={() => {\n\t\t\t\t// setActive('active');\n\t\t\t\tprops.onClick(props.dataPath, props.dataType);\n\t\t\t}}\n\t\t>\n\t\t\t{props.children}\n\t\t</div>\n\t);\n};\n\nconst SaveFormLogic = (props) => {\n\tconst [logic, setLogic] = useState(undefined);\n\tconst [editPath, setEditPath] = useState(undefined);\n\tconst [formData, setFormData] = useState({});\n\tconst [formType, setFormType] = useState('params');\n\n\t// Данные для селектов\n\tconst [tableNames, setTableNames] = useState([]);\n\tconst [tableFields, setTableFields] = useState([]);\n\n\tconst {onChange, value, dataBase} = props;\n\n\tuseEffect(() => {\n\t\tsetLogic(value);\n\t\t// console.log('props ->', value)\n\t}, [value]);\n\n\tconst onClickLogicParams = (path, dataType) => {\n\t\t// console.log(\n\t\t// \t'onClickLogicParams path => ',\n\t\t// \tpath.slice(0, path.length - 2)\n\t\t// );\n\t\tconsole.log(\"onClickLogicParams => \", path);\n\t\t// console.log(\"onClickLogicParams => \", objectPath.get(logic, path));\n\t\tlet fData = objectPath.get(logic, path);\n\t\tif(dataType === 'params') {\n\t\t\tif(Array.isArray(path) && path.length === 0) {\n\t\t\t\tfData.fieldType = fData.fieldType !== undefined ? fData.fieldType : 'root';\n\t\t\t\tfData.primaryKey = fData.primaryKey !== undefined ? fData.primaryKey : 'id';\n\t\t\t}\n\n\t\t\tfData.excludePrimaryKey = fData.excludePrimaryKey !== undefined ? fData.excludePrimaryKey : true;\n\t\t\tfData.autoGenerateCode = fData.autoGenerateCode !== undefined ? fData.autoGenerateCode : false;\n\t\t}\n\t\tsetFormData(fData);\n\t\tsetFormType(dataType);\n\t\tsetEditPath(path);\n\t\tgetFieldsByTable(\n\t\t\tobjectPath.get(logic, [\n\t\t\t\t...path.slice(0, path.length - 2),\n\t\t\t\t'tableName',\n\t\t\t])\n\t\t);\n\t};\n\n\tconst onClickAddChild = (path) => {\n\t\tlet newLogic = {...logic};\n\t\tobjectPath.push(newLogic, [...path, 'children'], {});\n\t\tonChange(newLogic);\n\t};\n\n\tconst onClickAddField = (path) => {\n\t\tlet newLogic = {...logic};\n\t\tobjectPath.push(newLogic, [...path, 'fields'], {});\n\t\tonChange(newLogic);\n\t};\n\n\tconst onClickDeleteField = (path) => {\n\t\t// console.log(\"onClickDeleteField path => \", path);\n\t\tlet newLogic = {...logic};\n\t\tobjectPath.del(newLogic, path);\n\t\tonChange(newLogic);\n\t};\n\n\tconst onChangeInput = (name, value) => {\n\t\t// For form\n\t\tconst data = {...formData, [name]: value};\n\t\tsetFormData(data);\n\n\t\t// console.log(\"onChangeInput data => \", data);\n\t\t// console.log(\"onChangeInput editPath => \", editPath);\n\t\t// console.log(\"onChangeInput newLogic => \", newLogic);\n\n\t\t// Load columns after select table\n\t\tif(name === 'tableName')\n\t\t\tgetFieldsByTable(value);\n\n\t\tlet newLogic = {};\n\t\tif (editPath && editPath.length > 0) {\n\t\t\tnewLogic = {...logic};\n\t\t\tobjectPath.set(newLogic, editPath, data);\n\t\t} else newLogic = {...newLogic, ...data};\n\n\t\tconsole.log('onChangeInput newLogic => ', newLogic);\n\n\t\tonChange(newLogic);\n\t};\n\n\tconst equalsPaths = (a, b) => {\n\t\tif(a)\n\t\t\treturn a.join('.') === b.join('.');\n\t\telse\n\t\t\treturn false;\n\t};\n\n\tconst getLogicRender = (logic, path) => {\n\t\t// console.log('editPath === path> ', editPath, path, equalsArray(editPath, path));\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclassName={`${prefixTreeCls}${path.length > 0 ? '-child' : ''}`}\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tclassName={`${prefixTreeCls}-params ${\n\t\t\t\t\t\tequalsPaths(editPath, path) ? 'active' : ''\n\t\t\t\t\t}`}\n\t\t\t\t>\n\t\t\t\t\t<ForkOutlined />\n\t\t\t\t\t<Div\n\t\t\t\t\t\tonClick={onClickLogicParams}\n\t\t\t\t\t\tstyle={{flex: '1'}}\n\t\t\t\t\t\tdataPath={path}\n\t\t\t\t\t\tdataType={'params'}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className={`${prefixTreeCls}-field`}>\n\t\t\t\t\t\t\t[{logic.fieldName}] type of [{logic.fieldType}]\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/*<div className={`${prefixTreeCls}-field`}>primaryKey:       {logic.primaryKey}</div>*/}\n\t\t\t\t\t\t<div className={`${prefixTreeCls}-field`}>\n\t\t\t\t\t\t\t{logic.tableName}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Div>\n\t\t\t\t\t{path.length > 0 ? (\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tsize={'small'}\n\t\t\t\t\t\t\tshape='circle'\n\t\t\t\t\t\t\ticon={<CloseOutlined />}\n\t\t\t\t\t\t\tonClick={() => onClickDeleteField(path)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : null}\n\t\t\t\t\t{/*<Button size={'small'} onClick={() => onClickAddChild(path)}>Add child</Button>*/}\n\t\t\t\t\t{/*<div className={`${prefixTreeCls}-field`}>autoGenerateCode: {logic.autoGenerateCode}</div>*/}\n\t\t\t\t</div>\n\t\t\t\t<div className={`${prefixTreeCls}-fields`}>\n\t\t\t\t\t<div className={`${prefixTreeCls}-fields-header`}>\n\t\t\t\t\t\t<QueryIcon />\n\t\t\t\t\t\t<div>Fields</div>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tsize={'small'}\n\t\t\t\t\t\t\tshape='round'\n\t\t\t\t\t\t\tonClick={() => onClickAddField(path)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tAdd field\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t\t{logic.fields &&\n\t\t\t\t\t\tlogic.fields.map((field, index) => {\n\t\t\t\t\t\t\tconst dataPath = [...path, 'fields', index];\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<Div\n\t\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t\t\tclassName={`${prefixTreeCls}-fields-params ${\n\t\t\t\t\t\t\t\t\t\tequalsPaths(editPath, dataPath)\n\t\t\t\t\t\t\t\t\t\t\t? 'active'\n\t\t\t\t\t\t\t\t\t\t\t: ''\n\t\t\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\t\t\tonClick={onClickLogicParams}\n\t\t\t\t\t\t\t\t\tdataType={'fields'}\n\t\t\t\t\t\t\t\t\tdataPath={dataPath}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tclassName={`${prefixTreeCls}-fields-params-data`}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{/*<InsertRowRightOutlined />*/}\n\t\t\t\t\t\t\t\t\t\t<ColumnIcon/>\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t[{field.name}] type of [{field.type}\n\t\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tsize={'small'}\n\t\t\t\t\t\t\t\t\t\tshape='circle'\n\t\t\t\t\t\t\t\t\t\ticon={<CloseOutlined />}\n\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\tonClickDeleteField(dataPath)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Div>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t\t<div className={`${prefixTreeCls}-children`}>\n\t\t\t\t\t<div className={`${prefixTreeCls}-children-header`}>\n\t\t\t\t\t\t<SisternodeOutlined />\n\t\t\t\t\t\t<div>Children</div>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tsize={'small'}\n\t\t\t\t\t\t\tshape='round'\n\t\t\t\t\t\t\tonClick={() => onClickAddChild(path)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tAdd child\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t\t{logic.children &&\n\t\t\t\t\t\tlogic.children.map((child, index) => (\n\t\t\t\t\t\t\t<React.Fragment key={index}>\n\t\t\t\t\t\t\t\t{getLogicRender(child, [\n\t\t\t\t\t\t\t\t\t...path,\n\t\t\t\t\t\t\t\t\t'children',\n\t\t\t\t\t\t\t\t\tindex,\n\t\t\t\t\t\t\t\t])}\n\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t))}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t};\n\n\tconst getTableNames = (open) => {\n\t\t// console.log(\"onDropdownVisibleChange open => \", open)\n\t\tif (open) {\n\t\t\t// /{dataSourceName}/configurations/save/tables\n\t\t\tapiGetReq(`/${dataBase.name}/configurations/save/tables`)\n\t\t\t// apiGetDbTable()\n\t\t\t\t.then((response) => {\n\t\t\t\t\tsetTableNames(response.data);\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tnotificationError(error, 'Ошибка загрузки данных');\n\t\t\t\t});\n\t\t} else {\n\t\t\tsetTableNames([]);\n\t\t}\n\t};\n\n\tconst getFieldsByTable = (tableName) => {\n\t\t//\"/{dataSourceName}/configurations/save/fields/{tableName}\"\n\t\tapiGetReq(`/${dataBase.name}/configurations/save/fields/${tableName}`)\n\t\t// apiGetDbFieldsByTable(tableName)\n\t\t\t.then((response) => {\n\t\t\t\tsetTableFields(response.data);\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\tnotificationError(error, 'Ошибка загрузки данных');\n\t\t\t});\n\t};\n\n\tconst logicFields = (\n\t\t<>\n\t\t\t<Row justify='center' align='middle' gutter={[0, 8]}>\n\t\t\t\t<Col span={8}>\n\t\t\t\t\t<span>Field type: </span>\n\t\t\t\t</Col>\n\t\t\t\t<Col span={16}>\n\t\t\t\t\t<Select\n\t\t\t\t\t\tvalue={formData && formData.fieldType}\n\t\t\t\t\t\tstyle={{width: '100%'}}\n\t\t\t\t\t\tonChange={(e) => onChangeInput('fieldType', e)}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Select.Option value='root'>root</Select.Option>\n\t\t\t\t\t\t<Select.Option value='array'>array</Select.Option>\n\t\t\t\t\t\t<Select.Option value='object'>object</Select.Option>\n\t\t\t\t\t</Select>\n\t\t\t\t</Col>\n\t\t\t</Row>\n\t\t\t<Row justify='center' align='middle' gutter={[0, 8]}>\n\t\t\t\t<Col span={8}>\n\t\t\t\t\t<span>Field name: </span>\n\t\t\t\t</Col>\n\t\t\t\t<Col span={16}>\n\t\t\t\t\t<Input\n\t\t\t\t\t\tvalue={formData && formData.fieldName}\n\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\tonChangeInput('fieldName', e.target.value)\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t</Col>\n\t\t\t</Row>\n\t\t\t<Row justify='center' align='middle' gutter={[0, 8]}>\n\t\t\t\t<Col span={8}>\n\t\t\t\t\t<span>Table name: </span>\n\t\t\t\t</Col>\n\t\t\t\t<Col span={16}>\n\t\t\t\t\t<Select\n\t\t\t\t\t\tshowSearch={true}\n\t\t\t\t\t\tonDropdownVisibleChange={getTableNames}\n\t\t\t\t\t\tvalue={formData && formData.tableName}\n\t\t\t\t\t\tstyle={{width: '100%'}}\n\t\t\t\t\t\tonChange={(e) => onChangeInput('tableName', e)}\n\t\t\t\t\t\toptionFilterProp=\"children\"\n\t\t\t\t\t\tfilterOption={(input, option) =>\n\t\t\t\t\t\t\toption.children.toLowerCase().indexOf(input.toLowerCase()) >= 0\n\t\t\t\t\t\t}\n\t\t\t\t\t>\n\t\t\t\t\t\t{tableNames.map((table, index) => (\n\t\t\t\t\t\t\t<Select.Option key={index} value={table}>\n\t\t\t\t\t\t\t\t{table}\n\t\t\t\t\t\t\t</Select.Option>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</Select>\n\t\t\t\t</Col>\n\t\t\t</Row>\n\t\t\t<Row justify='center' align='middle' gutter={[0, 8]}>\n\t\t\t\t<Col span={8}>\n\t\t\t\t\t<span>Primary key: </span>\n\t\t\t\t</Col>\n\t\t\t\t<Col span={16}>\n\t\t\t\t\t{/*<Input*/}\n\t\t\t\t\t{/*\tvalue={formData && formData.primaryKey}*/}\n\t\t\t\t\t{/*\tonChange={(e) =>*/}\n\t\t\t\t\t{/*\t\tonChangeInput('primaryKey', e.target.value)*/}\n\t\t\t\t\t{/*\t}*/}\n\t\t\t\t\t{/*/>*/}\n\t\t\t\t\t<Select\n\t\t\t\t\t\tvalue={formData && formData.primaryKey}\n\t\t\t\t\t\tstyle={{width: '100%'}}\n\t\t\t\t\t\tonChange={(e) => onChangeInput('primaryKey', e)}\n\t\t\t\t\t>\n\t\t\t\t\t\t{tableFields.map((filed, index) => (\n\t\t\t\t\t\t\t<Select.Option key={index} value={filed.columnName}>\n\t\t\t\t\t\t\t\t{filed.columnName} [{filed.dataType}]\n\t\t\t\t\t\t\t</Select.Option>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</Select>\n\t\t\t\t</Col>\n\t\t\t</Row>\n\t\t\t<Row justify='center' align='middle' gutter={[0, 8]}>\n\t\t\t\t<Col span={8}>\n\t\t\t\t\t<span>Exclude primary key: </span>\n\t\t\t\t</Col>\n\t\t\t\t<Col span={16}>\n\t\t\t\t\t<Checkbox\n\t\t\t\t\t\tdefaultChecked={false}\n\t\t\t\t\t\tchecked={formData && formData.excludePrimaryKey}\n\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\tonChangeInput('excludePrimaryKey', e.target.checked)\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t</Col>\n\t\t\t</Row>\n\t\t\t<Row justify='center' align='middle' gutter={[0, 8]}>\n\t\t\t\t<Col span={8}>\n\t\t\t\t\t<span>Auto generate code: </span>\n\t\t\t\t</Col>\n\t\t\t\t<Col span={16}>\n\t\t\t\t\t<Checkbox\n\t\t\t\t\t\tdefaultChecked={false}\n\t\t\t\t\t\tchecked={formData && formData.autoGenerateCode}\n\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\tonChangeInput('autoGenerateCode', e.target.checked)\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t</Col>\n\t\t\t</Row>\n\t\t</>\n\t);\n\n\tconst fieldsFields = (\n\t\t<>\n\t\t\t<Row justify='center' align='middle' gutter={[0, 8]}>\n\t\t\t\t<Col span={8}>\n\t\t\t\t\t<span>name: </span>\n\t\t\t\t</Col>\n\t\t\t\t<Col span={16}>\n\t\t\t\t\t<Select\n\t\t\t\t\t\tvalue={formData && formData.name}\n\t\t\t\t\t\tstyle={{width: '100%'}}\n\t\t\t\t\t\tonChange={(e) => onChangeInput('name', e)}\n\t\t\t\t\t>\n\t\t\t\t\t\t{tableFields.map((filed, index) => (\n\t\t\t\t\t\t\t<Select.Option key={index} value={filed.columnName}>\n\t\t\t\t\t\t\t\t{filed.columnName} [{filed.dataType}]\n\t\t\t\t\t\t\t</Select.Option>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</Select>\n\n\t\t\t\t\t{/*<Input value={formData && formData.name} onChange={(e) => onChangeInput('name', e.target.value)}/>*/}\n\t\t\t\t</Col>\n\t\t\t</Row>\n\t\t\t<Row justify='center' align='middle' gutter={[0, 8]}>\n\t\t\t\t<Col span={8}>\n\t\t\t\t\t<span>type: </span>\n\t\t\t\t</Col>\n\t\t\t\t<Col span={16}>\n\t\t\t\t\t<Select\n\t\t\t\t\t\tlistHeight={300}\n\t\t\t\t\t\tvalue={formData && formData.type}\n\t\t\t\t\t\tstyle={{width: '100%'}}\n\t\t\t\t\t\tonChange={(e) => onChangeInput('type', e)}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Select.Option value='uuid'>uuid</Select.Option>\n\t\t\t\t\t\t<Select.Option value='text'>text</Select.Option>\n\t\t\t\t\t\t<Select.Option value='json'>json</Select.Option>\n\t\t\t\t\t\t<Select.Option value='int'>int</Select.Option>\n\t\t\t\t\t\t<Select.Option value='timestamp'>\n\t\t\t\t\t\t\ttimestamp\n\t\t\t\t\t\t</Select.Option>\n\t\t\t\t\t\t<Select.Option value='date'>date</Select.Option>\n\t\t\t\t\t\t<Select.Option value='time'>time</Select.Option>\n\t\t\t\t\t\t<Select.Option value='bool'>bool</Select.Option>\n\t\t\t\t\t\t<Select.Option value='double'>double</Select.Option>\n\t\t\t\t\t\t<Select.Option value='parentResult'>\n\t\t\t\t\t\t\tparentResult\n\t\t\t\t\t\t</Select.Option>\n\t\t\t\t\t\t<Select.Option value='password'>password</Select.Option>\n\t\t\t\t\t</Select>\n\t\t\t\t\t{/*<Input value={formData && formData.type} onChange={(e) => onChangeInput('type', e)}/>*/}\n\t\t\t\t</Col>\n\t\t\t</Row>\n\t\t\t<Row justify='center' align='middle' gutter={[0, 8]}>\n\t\t\t\t<Col span={8}><span>validators: </span></Col>\n\t\t\t\t<Col span={16}>\n\t\t\t\t\t<Input\n\t\t\t\t\t\tvalue={formData && formData.validators}\n\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\tonChangeInput('validators', e.target.value)\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t</Col>\n\t\t\t</Row>\n\t\t</>\n\t);\n\n\treturn (\n\t\t<div className={prefixCls}>\n\t\t\t{logic && getLogicRender(logic, [])}\n\t\t\t<div className={`${prefixCls}-sub-form`}>\n\t\t\t\t{editPath && (formType === 'params' ? logicFields : fieldsFields)}\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default SaveFormLogic;\n","import React, {useState, useEffect} from 'react';\nimport {Form, Input, Button, notification, Row, Col, Space, Spin} from 'antd';\nimport SaveFormLogic from './SaveFormLogic';\nimport {Select} from 'rt-design';\nimport {getParentPath, notificationError} from '../../../../../utils/baseUtils';\nimport {apiPostReq, catchNotification, requestLoadConfig} from \"../../../../../apis/network\";\nimport {\n\tconvertSharedForRolesStringToTable, convertSharedForRolesTableToString,\n\tconvertSharedForUsersStringToTable,\n\tconvertSharedForUsersTableToString, LargeModalArrayFields,\n} from \"../Core/ModalArrayFields\";\nimport {ReloadOutlined} from \"@ant-design/icons\";\n\nconst SaveForm = ({data}) => {\n\n\tconst [loaded, setLoaded] = useState(false);\n\tconst [saveConfig, setSaveConfig] = useState(null);\n\n\tuseEffect(() => {\n\t\tif(!loaded){\n\t\t\trequestLoadConfig(data.url.configuration.get)()\n\t\t\t\t.then(res => {\n\t\t\t\t\tconst config = {...data, ...res.data}\n\t\t\t\t\tconfig.logic = JSON.parse(config.logic);\n\t\t\t\t\tsetSaveConfig(config);\n\t\t\t\t\tsetLoaded(true);\n\t\t\t\t})\n\t\t\t\t.catch(catchNotification)\n\t\t}\n\t}, [loaded])\n\n\tconst onClickReloadConfig = (e) => {\n\t\tsetLoaded(false);\n\t}\n\n\tconst onSaveAndUpdateHandler = (values) => {\n\t\tif(data.dataBase.readOnly){\n\t\t\tnotification.error({\n\t\t\t\tmessage: 'База доступна только на чтение'\n\t\t\t});\n\t\t} else {\n\t\t\tlet saveObject = {\n\t\t\t\t...saveConfig,\n\t\t\t\t...values,\n\t\t\t\tlogic: JSON.stringify(values.logic),\n\t\t\t};\n\t\t\tapiPostReq(data.url.configuration.set, saveObject)\n\t\t\t\t.then(res => {\n\t\t\t\t\t// setLocalData(newData)\n\t\t\t\t\tnotification.success({message: `Save [${data.configName}]`})\n\t\t\t\t})\n\t\t\t\t.catch(err => catchNotification(err))\n\t\t}\n\t};\n\n\tconst onFinish = (values) => {\n\t\tconsole.log('Success:', values);\n\t\tonSaveAndUpdateHandler(values);\n\t};\n\n\tconst onFinishFailed = (errorInfo) => {\n\t\tconsole.log('Failed:', errorInfo);\n\t};\n\n\tconst prefixCls = 'save-form';\n\n\tif (loaded) {\n\t\treturn (\n\t\t\t<Form\n\t\t\t\tstyle={{\n\t\t\t\t\tflex: 1,\n\t\t\t\t\theight: '100%',\n\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\tflexDirection: 'column',\n\t\t\t\t\twidth: '100%',\n\t\t\t\t}}\n\t\t\t\twrapperCol={{span: 24}}\n\t\t\t\t// layout={'inline'}\n\t\t\t\tinitialValues={{...saveConfig}}\n\t\t\t\tonFinish={onFinish}\n\t\t\t\tonFinishFailed={onFinishFailed}\n\t\t\t>\n\t\t\t\t{/*<div className={`${prefixCls}-cmd-panel`}>*/}\n\n\t\t\t\t{/*</div>*/}\n\t\t\t\t<div className={`${prefixCls}-fields-panel`}>\n\t\t\t\t\t<Row gutter={8}>\n\t\t\t\t\t\t<Col span={9}>\n\t\t\t\t\t\t\t<Space direction={\"vertical\"} size={4} style={{width: '100%'}}>\n\t\t\t\t\t\t\t\t<span>Description</span>\n\t\t\t\t\t\t\t\t<Form.Item\n\t\t\t\t\t\t\t\t\tname={'description'}\n\t\t\t\t\t\t\t\t\tclassName={'mb-0'}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Input/>\n\t\t\t\t\t\t\t\t</Form.Item>\n\t\t\t\t\t\t\t</Space>\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t<Col span={5}>\n\t\t\t\t\t\t\t<LargeModalArrayFields\n\t\t\t\t\t\t\t\tid={data.id}\n\t\t\t\t\t\t\t\tspan={24}\n\t\t\t\t\t\t\t\ttype={'save'}\n\t\t\t\t\t\t\t\tbuttonLabel={({length}) => <span>Пользователей: {length}</span> }\n\t\t\t\t\t\t\t\tmodalTitle={'Доступ пользователям'}\n\t\t\t\t\t\t\t\tname={'sharedForUsers'}\n\t\t\t\t\t\t\t\tstringToTable={convertSharedForUsersStringToTable}\n\t\t\t\t\t\t\t\ttableToString={convertSharedForUsersTableToString}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t<Col span={5}>\n\t\t\t\t\t\t\t<LargeModalArrayFields\n\t\t\t\t\t\t\t\tid={data.id}\n\t\t\t\t\t\t\t\tspan={24}\n\t\t\t\t\t\t\t\ttype={'save'}\n\t\t\t\t\t\t\t\tbuttonLabel={({length}) => <span>Ролей: {length}</span> }\n\t\t\t\t\t\t\t\tmodalTitle={'Доступ ролям'}\n\t\t\t\t\t\t\t\tname={'sharedForRoles'}\n\t\t\t\t\t\t\t\tstringToTable={convertSharedForRolesStringToTable}\n\t\t\t\t\t\t\t\ttableToString={convertSharedForRolesTableToString}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t<Col span={5}>\n\t\t\t\t\t\t\t{/*<Col span={24} style={{alignItems:'end', height: '100%' paddingBottom: '4px'}}>*/}\n\t\t\t\t\t\t\t\t<Space style={{display: \"flex\", alignItems:'end', height: '100%', paddingBottom: '4px'}}>\n\t\t\t\t\t\t\t\t\t<Button icon={<ReloadOutlined/>} onClick={onClickReloadConfig}>Reload config</Button>\n\t\t\t\t\t\t\t\t\t<Button htmlType='submit' style={{backgroundColor: '#8dd28d', width: '100%'}}>Сохранить</Button>\n\t\t\t\t\t\t\t\t</Space>\n\t\t\t\t\t\t\t{/*</Col>*/}\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t</Row>\n\t\t\t\t</div>\n\t\t\t\t<Form.Item label='Logic' name='logic' noStyle={true}>\n\t\t\t\t\t<SaveFormLogic dataBase={data.dataBase}/>\n\t\t\t\t</Form.Item>\n\t\t\t</Form>\n\t\t);\n\t} else return <Spin/>;\n};\n\nSaveForm.propTypes = {};\n\nexport default SaveForm;\n","import * as React from 'react';\nimport {DiagramEngine} from \"@projectstorm/react-diagrams\";\nimport {BaseNodeModel} from \"./BaseNodeModel\";\n\nexport interface PortsProps {\n    engine: DiagramEngine;\n    node: BaseNodeModel //| GetVariableModel | SetVariableModel;\n}\n\nconst NodePorts = ({engine, node} : PortsProps) => {\n    const PortsIn = node.getInPortsRender;\n    const PortsOut = node.getOutPortsRender;\n    return (\n        <React.Fragment>\n            <div className=\"node-ports-in\">\n                <PortsIn engine={engine} node={node}/>\n                {/*{inPorts}*/}\n            </div>\n            <div className=\"node-ports-out\">\n                <PortsOut engine={engine} node={node}/>\n                {/*{outPorts}*/}\n            </div>\n        </React.Fragment>\n    )\n}\n\nexport const FlowNodeWidget = (props : PortsProps) => {\n    const {engine, node} = props\n    // console.log('FlowNodeWidget', props)\n    return (\n        <div className={['node-wrapper', 'node-branch', node.isSelected() ? 'node-selected' : undefined].join(' ')}>\n            <div className={'node-header'}>{node.getOptions().name}</div>\n            <div className={'node-body'} >\n                <NodePorts engine={engine} node={node}/>\n            </div>\n        </div>\n    )\n}","import * as React from 'react';\nimport { AbstractReactFactory } from '@projectstorm/react-canvas-core';\nimport { FlowNodeWidget } from './FlowNodeWidget';\nimport {DefaultNodeFactory, DiagramEngine} from \"@projectstorm/react-diagrams\";\nimport {BaseNodeModel} from \"./BaseNodeModel\";\n\ninterface NodeFactoryOptions {\n    type: string;\n    model: typeof BaseNodeModel\n}\n\nexport class FlowNodeFactory extends AbstractReactFactory<BaseNodeModel, DiagramEngine> {\n    model: typeof BaseNodeModel;\n    constructor(options: NodeFactoryOptions) {\n        // console.log('FlowNodeFactory', options)\n        super(options.type);\n        this.model = options.model\n    }\n\n    generateReactWidget(event: any): JSX.Element {\n        // console.log('generateReactWidget', event)\n        return <FlowNodeWidget engine={this.engine} node={event.model}/>;\n    }\n\n    generateModel(event: any) : BaseNodeModel {\n        // console.log('generateModel', event.initialConfig)\n        return new this.model(event.initialConfig);\n    }\n}\n","import {DiagramModel} from \"@projectstorm/react-diagrams\";\nimport { DiagramModelOptions, DeserializeEvent } from '@projectstorm/react-canvas-core';\n\nexport interface VariableModel {\n    id: string;\n    name: string;\n    type: string;\n    value: any;\n}\n\ninterface FlowDiagramOptions extends DiagramModelOptions{\n    name?: string;\n    variables?: VariableModel[];\n}\n\nexport class FlowDiagramModel extends DiagramModel {\n    variables: VariableModel[];\n    constructor(options: FlowDiagramOptions) {\n        super(options);\n        console.log('Recreate model');\n        this.variables = options?.variables || [];// [ {id: uuid(), type: 'bool', name: 'MyBoolVar', value: false} ]\n    }\n\n    deserialize(event: DeserializeEvent<this>) {\n        super.deserialize(event);\n        console.log('Deserialize FlowDiagramModel', event.data.variables);\n        this.variables = event.data.variables;\n    }\n\n    serialize() {\n        return {\n            ...super.serialize(),\n            variables: this.variables\n        };\n    }\n    getOptions() {\n        return this.options as FlowDiagramOptions;\n    }\n    getVariables() {\n        return this.variables;\n    }\n    getVariable(id: string) {\n        return this.variables.find(v => v.id === id);\n    }\n    addVariable(variable: VariableModel) {\n        this.variables.push(variable);\n    }\n    updateVariable(variable: VariableModel) {\n        const fi = this.variables.findIndex(v => v.id === variable.id);\n        if(fi !== -1)\n            this.variables[fi] = variable;\n\n    }\n    removeVariableByName(name: string) {\n        this.variables = this.variables.filter(v => v.name !== name);\n    }\n    removeVariableById(id: string) {\n        this.variables = this.variables.filter(v => v.id !== id);\n    }\n}","import * as React from \"react\";\nimport {DefaultLinkModel, DefaultNodeModel, DefaultPortModel, NodeModel, PortModel, DefaultNodeModelOptions} from \"@projectstorm/react-diagrams\";\nimport {size} from \"../../../../../../../utils/baseUtils\";\nimport {FlowPortModel} from \"../Port/FlowPortModel\";\nimport {PortsProps} from \"./FlowNodeWidget\";\nimport {DeserializeEvent} from \"@projectstorm/react-canvas-core\";\n\nconst InExecPortDidFire = (e: any) : void => {\n    // console.log(`[${e.entity.getOptions().name}] InExecPortDidFire`, e)\n    const port = e.entity;\n    if(port.getOptions().maximumLinks) {\n        const linksSize = size(port.links);\n        // console.log(`[${e.entity.getOptions().name}] InExecPortDidFire`, Object.values(port.links)[linksSize-1])\n        if(linksSize > port.getOptions().maximumLinks) {\n            (Object.values(port.links)[linksSize-1] as DefaultLinkModel).remove();\n        }\n        // else if(linksSize > 0){\n        //     const link = Object.values(port.links)[linksSize-1] as DefaultLinkModel\n        //     if(link.getSourcePort().getOptions().in && !link.getTargetPort().getOptions().in){\n        //         console.log('Change ports', link)\n        //         // link.switchPorts();\n        //         // const sourcePort = {...link.getSourcePort()}\n        //         // const targetPort = {...link.getTargetPort()}\n        //         // link.setSourcePort(targetPort as PortModel);\n        //         // link.setTargetPort(sourcePort as PortModel)\n        //     }\n        // }\n    }\n}\n\nexport class BaseNodeModel extends DefaultNodeModel {\n    constructor(options: DefaultNodeModelOptions, ports: FlowPortModel[] = []) {\n        super(options);\n        // console.log('BaseNodeModel', options);\n        ports.forEach(port => this.addPort(port));\n        Object.values(this.getPorts()).forEach(port => port.registerListener({\n            eventDidFire: InExecPortDidFire\n        }));\n    }\n\n    deserialize(event: DeserializeEvent<this>) {\n        super.deserialize(event);\n        // console.log('Deserialize BaseNodeModel', event.data);\n\n        //deserialize ports\n        // event.data.ports.forEach((port: any) => {\n        //     let portOb = (event.engine as DiagramEngine).getFactoryForPort(port.type).generateModel(port);\n        //     portOb.deserialize({\n        //         ...event,\n        //         data: port\n        //     });\n        //     // the links need these\n        //     event.registerModel(portOb);\n        //     this.addPort(portOb);\n        // });\n    }\n\n\n    // @ts-ignore\n    getPort(name: string) : FlowPortModel {\n        return this.ports[name] as FlowPortModel;\n    }\n\n    getInPortsRender = ({engine, node} : PortsProps) : JSX.Element => <React.Fragment/>\n    getOutPortsRender = ({engine, node} : PortsProps) : JSX.Element => <React.Fragment/>;\n}","import {\n    DefaultLinkModel,\n    DefaultPortModel,\n    PortModel,\n    DefaultPortModelOptions,\n    LinkModel, DefaultLinkModelOptions\n} from \"@projectstorm/react-diagrams\";\nimport {AbstractModelFactory, DeserializeEvent} from \"@projectstorm/react-canvas-core\";\nimport {size} from \"../../../../../../../utils/baseUtils\";\n\nexport interface FlowPortModelOptions extends DefaultPortModelOptions {\n    hiddenLabel?: boolean;\n}\nexport class FlowPortModel extends DefaultPortModel {\n    private value: any;\n\n    constructor(options: FlowPortModelOptions) {\n        super(options);\n        // console.log('Constructor FlowPortModel', options);\n\n    }\n\n    deserialize(event: DeserializeEvent<this>) {\n        super.deserialize(event);\n        // console.log('Deserialize FlowPortModel', event.data);\n        this.value = event.data.value;\n        (this.options as FlowPortModelOptions).hiddenLabel = event.data.hiddenLabel;\n        this.options.maximumLinks = event.data.maximumLinks;\n    }\n\n    serialize() {\n        return {\n            ...super.serialize(),\n            value: this.value,\n            hiddenLabel: (this.options as FlowPortModelOptions).hiddenLabel,\n            maximumLinks: this.options.maximumLinks\n        };\n    }\n\n    getValue() {\n        return this.value\n    }\n    setValue(value: any){\n        this.value = value;\n    }\n\n    getOptions() {\n        return this.options as FlowPortModelOptions;\n    }\n\n    canLinkToPort(port: PortModel): boolean {\n        if (port instanceof DefaultPortModel) {\n            console.log('canLinkToPort', this.options.in, port.getOptions().in, this.options.type, port.getOptions().type)\n            if(!this.options.in && port.getOptions().in && this.options.type === port.getOptions().type) {\n            // if (this.options.in !== port.getOptions().in && this.options.type === port.getOptions().type) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    createLinkModel(factory?: AbstractModelFactory<LinkModel>) : LinkModel {\n        console.log('createLinkModel', this.options);\n        if (this.options.maximumLinks) {\n            const linksSize = size(this.links);\n            if (this.options.maximumLinks === 1) {\n                Object.values(this.links).forEach(link => link.remove());\n                // const link = new DefaultLinkModel();\n                // link.registerListener({eventDidFire: (e) => console.log('Link registerListener', e),})\n                // const lPoint = link.getLastPoint();\n                // lPoint.registerListener({eventDidFire: (e) => console.log('Point registerListener', e)})\n                return new DefaultLinkModel();\n            } else if (this.options.maximumLinks <= linksSize) {\n                Object.values(this.links)[linksSize - 1].remove();\n                return new DefaultLinkModel();\n            }\n        }\n        return new DefaultLinkModel();\n    }\n}","import * as React from \"react\";\nimport {fillCls, size} from \"../../../../../../../utils/baseUtils\";\nimport {FlowPortModel} from \"./FlowPortModel\";\n\nexport interface PortIconProps{\n    port: FlowPortModel;\n}\n\nexport const PortIcon = ({port} : PortIconProps) => {\n    const portType = port.getOptions().type;\n    switch (portType){\n        case 'exec': return <ExecPort port={port}/>;\n        case 'bool': return <VarPort port={port}/>\n        case 'byte': return <VarPort port={port}/>\n        case 'int': return <VarPort port={port}/>\n        case 'int64': return <VarPort port={port}/>\n        case 'float': return <VarPort port={port}/>\n        case 'name': return <VarPort port={port}/>\n        case 'string': return <VarPort port={port}/>\n        case 'stringList': return <ListPort port={port}/>\n        case 'text': return <VarPort port={port}/>\n        case 'headers': return <VarPort port={port}/>\n        case 'json': return <VarPort port={port}/>\n        case 'jsonList': return <ListPort port={port}/>\n        case 'object': return <VarPort port={port}/>\n        default: return <VarPort port={port}/>\n    }\n}\n\nexport const ExecPort = ({port} : PortIconProps) => (\n    <div className={`port-exec ${fillCls(port)}`}>\n        <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" stroke={'currentColor'} xmlns=\"http://www.w3.org/2000/svg\">\n            <path d=\"M1 15V1H9L14.5 8L9 15H1Z\" strokeWidth=\"2\"/>\n        </svg>\n    </div>\n)\n\nexport const VarPort = ({port} : PortIconProps) => (\n    <div className={`port-var ${port.getOptions().type} ${fillCls(port)}`}>\n        <svg width=\"18\" height=\"16\" viewBox=\"0 0 18 16\" stroke={'currentColor'} fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path d=\"M16.5 8L14.5 6.5V9.5L16.5 8Z\" />\n            <path d=\"M7 13C9.76142 13 12 10.7614 12 8C12 5.23858 9.76142 3 7 3C4.23858 3 2 5.23858 2 8C2 10.7614 4.23858 13 7 13Z\" strokeWidth=\"2\"/>\n        </svg>\n    </div>\n)\n\nconst ListPort = ({port} : PortIconProps) => (\n    <div className={`port-var ${port.getOptions().type} ${fillCls(port)}`}>\n        <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" stroke={'currentColor'} fill={'currentColor'} xmlns=\"http://www.w3.org/2000/svg\">\n            <path d=\"M1.5 1.5H4.5V4.5H1.5V1.5ZM6.5 1.5H9.5V4.5H6.5V1.5ZM11.5 1.5H14.5V4.5H11.5V1.5ZM1.5 6.5H4.5V9.5H1.5V6.5ZM11.5 6.5H14.5V9.5H11.5V6.5ZM1.5 11.5H4.5V14.5H1.5V11.5ZM6.5 11.5H9.5V14.5H6.5V11.5ZM11.5 11.5H14.5V14.5H11.5V11.5Z\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n            {size(port.getLinks()) > 0 ? <path d=\"M6.5 6.5H9.5V9.5H6.5V6.5Z\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/> : null}\n        </svg>\n    </div>\n\n)","import {Checkbox, Input, InputNumber, Space} from \"antd\";\nimport {DiagramEngine, PortModel, PortWidget} from \"@projectstorm/react-diagrams\";\nimport * as React from \"react\";\nimport {FlowPortModel} from \"./FlowPortModel\";\nimport {PortIcon} from \"./FlowPortIcons\";\nimport {size} from \"../../../../../../../utils/baseUtils\";\nimport {SetVariableModel} from \"../Node/Models/VariableModels\";\n\nexport interface PortWrapperProps{\n    port: FlowPortModel;\n    engine: DiagramEngine;\n    children?: JSX.Element[] | JSX.Element ;\n}\ninterface InputVariablePortsProps {\n    node: SetVariableModel\n}\n\nexport const isExistLinks = (post: FlowPortModel): boolean => {\n    return size(post.getLinks()) > 0\n}\n\nexport const PortWrapper = ({port, engine, children} : PortWrapperProps) => {\n    // const flowPort = port as FlowPortModel;\n    const PortBody = children ? children : (port.getOptions().hiddenLabel ? null :  port.getOptions().label)\n    // console.log('port => ', port);\n    return (\n        <Space className={'port-wrapper'}>\n            {!port.getOptions().in && PortBody}\n            <PortWidget port={port as PortModel} engine={engine} >\n                <PortIcon port={port}/>\n            </PortWidget>\n            {port.getOptions().in && PortBody}\n        </Space>\n    )\n}\n\nexport const InputVariable = ({node} : InputVariablePortsProps) => {\n    if(node.variable.type === 'bool') {\n        return <Checkbox defaultChecked={node.variable.value} onChange={({target: {checked}}) => node.variable.value = checked}/>\n    } else if(node.variable.type === 'float') {\n        return <InputNumber size={'small'} defaultValue={node.variable.value} onChange={(value) => node.variable.value = value}/>\n    } else {\n        return <Input size={'small'} defaultValue={node.variable.value} onChange={({target: {value}}) => node.variable.value = value}/>\n    }\n}\n\nexport const InputPort = ({port} : {port: FlowPortModel}) => {\n    if(port.getOptions().type === 'bool') {\n        return <Checkbox defaultChecked={port.getValue()} onChange={({target: {checked}}) => {port.setValue(checked)} }/>\n    } else if(port.getOptions().type === 'float') {\n        return <InputNumber size={'small'} defaultValue={port.getValue()} onChange={(value) => {port.setValue(value)} }/>\n    } else {\n        return <Input size={'small'} defaultValue={port.getValue()} onChange={({target: {value}}) => {port.setValue(value)} }/>\n    }\n}","import {BaseNodeModel} from \"../BaseNodeModel\";\nimport {FlowPortModel} from \"../../Port/FlowPortModel\";\nimport * as React from \"react\";\nimport {PortWrapper} from \"../../Port/FlowPortWidget\";\nimport {PortsProps} from \"../FlowNodeWidget\";\n\nexport class BranchModel extends BaseNodeModel {\n    constructor(options = {}) {\n        super(options, [\n            new FlowPortModel({type: 'exec', in: true, name: 'InExec', hiddenLabel: true}),\n            new FlowPortModel({type: 'bool', in: true, name: 'Condition', maximumLinks: 1}),\n            new FlowPortModel({type: 'exec', in: false, name: 'TrueExec', label: 'True', maximumLinks: 1}),\n            new FlowPortModel({type: 'exec', in: false, name: 'FalseExec', label: 'False', maximumLinks: 1})\n        ]);\n    }\n\n    getInPortsRender = BranchPortsIn;\n    getOutPortsRender = BranchPortsOut;\n}\n\nconst BranchPortsIn = ({engine, node} : PortsProps) : JSX.Element => (\n    <React.Fragment>\n        <PortWrapper port={node.getPort('InExec')} engine={engine} />\n        <PortWrapper port={node.getPort('Condition')} engine={engine}/>\n    </React.Fragment>\n)\nconst BranchPortsOut = ({engine, node} : PortsProps) : JSX.Element => (\n    <React.Fragment>\n        <PortWrapper port={node.getPort('TrueExec')} engine={engine} />\n        <PortWrapper port={node.getPort('FalseExec')} engine={engine} />\n    </React.Fragment>\n)","import {BaseNodeModel} from \"../BaseNodeModel\";\nimport {DefaultNodeModelOptions} from \"@projectstorm/react-diagrams\";\nimport {FlowPortModel} from \"../../Port/FlowPortModel\";\nimport {PortWrapper} from \"../../Port/FlowPortWidget\";\nimport * as React from \"react\";\nimport {PortsProps} from \"../FlowNodeWidget\";\n\nexport class AuthGetUserIdModel extends BaseNodeModel {\n    constructor(options: DefaultNodeModelOptions) {\n        super(options, [\n            new FlowPortModel({type: 'headers', in: true, name: 'Headers', label: 'Headers', maximumLinks: 1}),\n            new FlowPortModel({type: 'uuid', in: false, name: 'UserId', label: 'User id [uuid]'}),\n        ]);\n    }\n\n    getInPortsRender = AuthGetUserIdPortsIn;\n    getOutPortsRender = AuthGetUserIdPortsOut;\n}\n\nexport class AuthGetListUserRolesModel extends BaseNodeModel {\n    constructor(options: DefaultNodeModelOptions) {\n        super(options, [\n            new FlowPortModel({type: 'headers', in: true, name: 'Headers', label: 'Headers', maximumLinks: 1}),\n            new FlowPortModel({type: 'stringList', in: false, name: 'UserRoles', label: 'User roles [List<String>]'}),\n        ]);\n    }\n\n    getInPortsRender = AuthGetUserIdPortsIn;\n    getOutPortsRender = AuthGetListUserRolesPortsOut;\n}\n\nconst AuthGetUserIdPortsIn = ({engine, node} : PortsProps) =>\n    <PortWrapper port={node.getPort('Headers')} engine={engine} />\n\nconst AuthGetUserIdPortsOut = ({engine, node} : PortsProps) =>\n    <PortWrapper port={node.getPort('UserId')} engine={engine} />\n\nconst AuthGetListUserRolesPortsOut = ({engine, node} : PortsProps) =>\n    <PortWrapper port={node.getPort('UserRoles')} engine={engine} />","import {BaseNodeModel} from \"../BaseNodeModel\";\nimport {DefaultNodeModelOptions} from \"@projectstorm/react-diagrams\";\nimport {FlowPortModel} from \"../../Port/FlowPortModel\";\nimport * as React from \"react\";\nimport {PortWrapper} from \"../../Port/FlowPortWidget\";\nimport {PortsProps} from \"../FlowNodeWidget\";\n\nexport class RequestModel extends BaseNodeModel {\n    constructor(options: DefaultNodeModelOptions) {\n        super(options, [\n            new FlowPortModel({type: 'exec', in: false, name: 'OutExec', hiddenLabel: true, maximumLinks: 1}),\n            new FlowPortModel({type: 'string', in: false, name: 'FlowName', label: 'Flow name'}),\n            new FlowPortModel({type: 'headers', in: false, name: 'Headers', label: 'Headers [Map<String, String>]'}),\n            new FlowPortModel({type: 'uuid', in: false, name: 'UserId', label: 'User id [uuid]'}),\n            new FlowPortModel({type: 'stringList', in: false, name: 'UserRoles', label: 'User roles [List<String>]'}),\n            new FlowPortModel({type: 'json', in: false, name: 'RequestData', label: 'Request data [json]'}),\n            new FlowPortModel({type: 'int', in: false, name: 'PageNum', label: 'Page number [int]'}),\n            new FlowPortModel({type: 'int', in: false, name: 'PageSize', label: 'Page size [int]'}),\n        ]);\n    }\n\n    getOutPortsRender = RequestPortsOut;\n}\n\nconst getTypeFromNodeType = (nodeType?: string) : string => {\n    if(nodeType){\n        const type = nodeType.slice(8);\n        return type.charAt(0).toLowerCase() + type.slice(1)\n    } else return 'string'\n}\n\nexport class ResponseModel extends BaseNodeModel {\n    constructor(options: DefaultNodeModelOptions) {\n        super(options, [\n            new FlowPortModel({type: 'exec', in: true, name: 'InExec', hiddenLabel: true, maximumLinks: 1}),\n            new FlowPortModel({type: 'int', in: true, name: 'HttpStatus', label: 'Http status', maximumLinks: 1}),\n            new FlowPortModel({type: getTypeFromNodeType(options.type), in: true, name: 'Body', label: 'Body', maximumLinks: 1}),\n        ]);\n    }\n    getInPortsRender = ResponsePortsIn\n}\n\n\nconst RequestPortsOut = ({engine, node} : PortsProps) => (\n    <React.Fragment>\n        <PortWrapper port={node.getPort('OutExec')} engine={engine} />\n        <PortWrapper port={node.getPort('FlowName')} engine={engine} />\n        <PortWrapper port={node.getPort('Headers')} engine={engine} />\n        <PortWrapper port={node.getPort('UserId')} engine={engine} />\n        <PortWrapper port={node.getPort('UserRoles')} engine={engine} />\n        <PortWrapper port={node.getPort('RequestData')} engine={engine} />\n        <PortWrapper port={node.getPort('PageNum')} engine={engine} />\n        <PortWrapper port={node.getPort('PageSize')} engine={engine} />\n    </React.Fragment>\n)\n\nconst ResponsePortsIn = ({engine, node} : PortsProps) => (\n    <React.Fragment>\n        <PortWrapper port={node.getPort('InExec')} engine={engine} />\n        <PortWrapper port={node.getPort('HttpStatus')} engine={engine} />\n        <PortWrapper port={node.getPort('Body')} engine={engine} />\n    </React.Fragment>\n)\n\n","import {BaseNodeModel} from \"../BaseNodeModel\";\nimport {FlowPortModel} from \"../../Port/FlowPortModel\";\nimport * as React from \"react\";\nimport {InputPort, InputVariable, isExistLinks, PortWrapper} from \"../../Port/FlowPortWidget\";\nimport {PortsProps} from \"../FlowNodeWidget\";\nimport {DefaultNodeModelOptions} from \"@projectstorm/react-diagrams\";\nimport {SetVariableModel} from \"./VariableModels\";\n\n// flat, hierarchical, count, object, sql, sqlCount, save\n// List<ObjectNode>\n// List<ObjectNode>\n// Long\n// ObjectNode\n// ObjectNode\n// ObjectNode\n// Object\n// configName, userId, userRoles, filter, pageable\n\n\nclass ConfigModel extends BaseNodeModel {\n    constructor(options: DefaultNodeModelOptions, ports: FlowPortModel[] = []) {\n        super(options, [\n            new FlowPortModel({type: 'exec', in: true, name: 'InExec', hiddenLabel: true}),\n            new FlowPortModel({type: 'string', in: true, name: 'ConfigName', label: 'Config name', maximumLinks: 1}),\n            new FlowPortModel({type: 'uuid', in: true, name: 'UserId', label: 'User id [uuid]', maximumLinks: 1}),\n            new FlowPortModel({type: 'stringList', in: true, name: 'UserRoles', label: 'User roles [List<String>]', maximumLinks: 1}),\n            new FlowPortModel({type: 'json', in: true, name: 'Data', label: 'Json data', maximumLinks: 1}),\n            ...ports,\n        ]);\n    }\n}\n\nexport class QueryConfigModel extends ConfigModel {\n    constructor(options: DefaultNodeModelOptions){\n        super(options, [\n            new FlowPortModel({type: 'int', in: true, name: 'PageNum', label: 'Page number [int]', maximumLinks: 1}),\n            new FlowPortModel({type: 'int', in: true, name: 'PageSize', label: 'Page size [int]', maximumLinks: 1}),\n            new FlowPortModel({type: 'exec', in: false, name: 'OutExec', hiddenLabel: true, maximumLinks: 1}),\n            new FlowPortModel({type: 'jsonList', in: false, name: 'ReturnData'}),\n        ])\n    }\n    getInPortsRender = QueryConfigPortsIn;\n    getOutPortsRender = QueryConfigPortsOut;\n}\n\nconst QueryConfigPortsIn = ({engine, node} : PortsProps) : JSX.Element => (\n    <React.Fragment>\n        <PortWrapper port={node.getPort('InExec')} engine={engine} />\n        <PortWrapper port={node.getPort('ConfigName')} engine={engine}>\n            {isExistLinks(node.getPort('ConfigName')) ? undefined : <InputPort port={node.getPort('ConfigName')}/>}\n        </PortWrapper>\n        <PortWrapper port={node.getPort('UserId')} engine={engine}/>\n        <PortWrapper port={node.getPort('UserRoles')} engine={engine}/>\n        <PortWrapper port={node.getPort('Data')} engine={engine}/>\n        <PortWrapper port={node.getPort('PageNum')} engine={engine}/>\n        <PortWrapper port={node.getPort('PageSize')} engine={engine}/>\n    </React.Fragment>\n)\nconst QueryConfigPortsOut = ({engine, node} : PortsProps) : JSX.Element => (\n    <React.Fragment>\n        <PortWrapper port={node.getPort('OutExec')} engine={engine} />\n        <PortWrapper port={node.getPort('ReturnData')} engine={engine} />\n    </React.Fragment>\n)","import {BaseNodeModel} from \"../BaseNodeModel\";\nimport {DefaultNodeModelOptions} from \"@projectstorm/react-diagrams\";\nimport {FlowPortModel} from \"../../Port/FlowPortModel\";\nimport {PortsProps} from \"../FlowNodeWidget\";\nimport {PortWrapper} from \"../../Port/FlowPortWidget\";\nimport * as React from \"react\";\n\nexport class StringListLengthModel extends BaseNodeModel {\n    constructor(options: DefaultNodeModelOptions) {\n        super(options, [\n            new FlowPortModel({type: 'stringList', in: true, name: 'List', label: 'List', maximumLinks: 1}),\n            new FlowPortModel({type: 'int', in: false, name: 'Length', label: 'Length'}),\n        ]);\n    }\n    getInPortsRender = ListLengthPortsIn;\n    getOutPortsRender = ListLengthPortsOut;\n}\n\nexport class JsonListLengthModel extends BaseNodeModel {\n    constructor(options: DefaultNodeModelOptions) {\n        super(options, [\n            new FlowPortModel({type: 'jsonList', in: true, name: 'List', label: 'List', maximumLinks: 1}),\n            new FlowPortModel({type: 'int', in: false, name: 'Length', label: 'Length'}),\n        ]);\n    }\n    getInPortsRender = ListLengthPortsIn;\n    getOutPortsRender = ListLengthPortsOut;\n}\n\n\n\nconst ListLengthPortsIn = ({engine, node} : PortsProps) =>\n    <PortWrapper port={node.getPort('List')} engine={engine} />\n\nconst ListLengthPortsOut = ({engine, node} : PortsProps) =>\n    <PortWrapper port={node.getPort('Length')} engine={engine} />\n","import * as React from \"react\";\nimport {FlowDiagramModel, VariableModel} from \"./Diagram/FlowDiagramModel\";\nimport {ButtonProps} from \"antd\";\n\ninterface LinkModel {\n    node: string;\n    port: string;\n}\n\ninterface PortModel {\n    id: string;\n    in: boolean;\n    type: string;\n    name: string;\n    links: LinkModel[];\n    value: any\n}\n\ninterface NodeModel {\n    id: string;\n    type: string;\n    inPorts: PortModel[];\n    outPorts: PortModel[];\n    variable?: VariableModel;\n}\n\ninterface LinkSerializeModel {\n    source: string;\n    sourcePort: string;\n    target: string;\n    targetPort: string;\n}\ninterface PortSerializeModel {\n    id: string;\n    in: boolean;\n    type: string;\n    name: string;\n    value: any;\n    links: string[];\n}\n\ninterface NodeSerializeModel {\n    id: string;\n    type: string;\n    name: string;\n    ports: PortSerializeModel[]\n}\n\ninterface LayerSerializeModel {\n    type: string;\n    models: any //{ [id: string]: NodeSerializeModel | LinkSerializeModel };\n}\n\ninterface DiagramSerializeModel {\n    layers: LayerSerializeModel[],\n    variables: VariableModel[];\n}\n\nexport const serializeDiagramToBack = (diagram : DiagramSerializeModel) => {\n    const linkModels = diagram.layers[0].models//find(layer => layer.type === 'diagram-links');\n    const nodesModels = diagram.layers[1].models//.find(layer => layer.type === 'diagram-nodes');\n    let resultNodes: NodeModel[] = [];\n    Object.keys(nodesModels).forEach(nodeKey => {\n        const node = nodesModels[nodeKey];\n        const posts = node.ports;\n        let resultNode: NodeModel = {id: node.id, type: node.type, inPorts: [], outPorts: []};\n        // console.log('SerializeDiagramToBack node', node)\n        if(['getVariable', 'setVariable'].includes(node.type)){\n            resultNode.variable = node.variable\n        }\n        posts.forEach((port: PortSerializeModel) => {\n            let resultPort: PortModel = {id: port.id, in: port.in, type: port.type, name: port.name, links: [], value: port.value || undefined};\n            port.links.forEach(link => {\n                // console.log('serializeDiagramToBack link', link)\n\n                if(!port.in){ // Выходной порт\n                    resultPort.links.push({\n                        node: linkModels[link].target ,\n                        port: linkModels[link].targetPort\n                    })\n                } else { // Входной порт\n                    resultPort.links.push({\n                        node: linkModels[link].source,\n                        port: linkModels[link].sourcePort\n                    })\n                }\n            })\n            port.in && resultNode.inPorts.push(resultPort)\n            !port.in && resultNode.outPorts.push(resultPort)\n            // console.log('serializeDiagramToBack resultPort', resultPort)\n        });\n        // console.log('serializeDiagramToBack resultNode', resultNode)\n        resultNodes.push(resultNode);\n    });\n    // console.log('serializeDiagramToBack linkLayer', linkModels)\n    // console.log('serializeDiagramToBack variables', JSON.stringify(diagram.variables))\n    // console.log('serializeDiagramToBack resultNodes', JSON.stringify(resultNodes))\n    return {\n        variables: diagram.variables,\n        flows: resultNodes\n    }\n    // Object.keys(nodes).forEach(nodeKey => {\n    //     const node = nodes[nodeKey];\n    //     const posts = node.getPorts()\n    //     Object.keys(posts).forEach(portKey => {\n    //         const port = posts[portKey];\n    //         const links = port.getLinks();\n    //     })\n    // })\n    // console.log('serializeDiagramToBack ', nodes)\n}","import {Modal, FormBody, Input, Select} from \"rt-design\";\nimport {PlusOutlined} from \"@ant-design/icons\";\nimport {requestLoadData} from \"../../../../../../apis/network\";\nimport React from \"react\";\nimport {DATA_TYPES} from \"../Flow\";\n\nexport const AddVarModal = ({value, onFinish}) => (\n    <Modal\n        toolTipProps={{ title: 'Создать переменную' }}\n        buttonProps={{ type: 'text', icon: <PlusOutlined/>, size: 'small'}}\n        modalConfig={{\n            type: 'save',\n            title: (value ? 'Изменение' : 'Создание') +  ' переменной',\n            onFinish: (values) => onFinish(values),\n            form: {\n                name: 'AddVariable',\n                labelCol: {span: 8},\n                wrapperCol: {span: 16},\n                noPadding: false,\n                loadInitData: (callBack, row) => {\n                    // console.log('loadInitData', value, DATA_TYPES);\n                    // callBack({...value, routeSelect: 'fc0222bd-ff28-41dd-9f1c-8afbce01f043' })\n                    callBack(value)\n                },\n            },\n        }}\n    >\n        <FormBody>\n            <Input itemProps={{label: 'Наименование', name: 'name', className: 'mb-8'}} />\n            <Select\n                itemProps={{label: 'Тип', name: 'type', className: 'mb-0'}}\n                optionConverter={(option) => option}\n                options={DATA_TYPES.map(type => ({label: type, value: type}))}\n            />\n            {/*<Select*/}\n            {/*    itemProps={{name: 'routeSelect'}}*/}\n            {/*    mode={'single'}*/}\n            {/*    infinityMode={true}*/}\n            {/*    requestLoadRows={requestDataConfig('/MI_121.117(main)/data/flat/routes')}*/}\n            {/*    optionConverter={(option) => ({ label: option.name, value: option.id, })}*/}\n            {/*    pageSize={10}*/}\n            {/*/>*/}\n        </FormBody>\n    </Modal>\n)","import * as React from \"react\";\nimport {BaseNodeModel} from \"../BaseNodeModel\";\nimport {VariableModel} from \"../../Diagram/FlowDiagramModel\";\nimport {DefaultNodeModelOptions} from \"@projectstorm/react-diagrams\";\nimport {FlowPortModel} from \"../../Port/FlowPortModel\";\nimport {PortsProps} from \"../FlowNodeWidget\";\nimport {InputVariable, isExistLinks, PortWrapper} from \"../../Port/FlowPortWidget\";\n\ninterface VariableModelOptions extends DefaultNodeModelOptions{\n    variable: VariableModel;\n}\n\nexport class GetVariableModel extends BaseNodeModel {\n    public variable: VariableModel;\n    constructor({variable, ...options} : VariableModelOptions) {\n        super({name: `Get [${variable.name}]`, ...options}, [\n            new FlowPortModel({type: variable.type, in: false, name: 'GetData'})\n        ]);\n        this.variable = variable;\n    }\n    getOutPortsRender = GetVariablePortsOut;\n    serialize(): any {\n        return {\n            ...super.serialize(),\n            variable: this.variable.id\n        };\n    }\n}\n\nexport class SetVariableModel extends BaseNodeModel {\n    variable: VariableModel;\n    constructor({variable, ...options}: VariableModelOptions) {\n        super({name: `Set [${variable.name}]`, ...options}, [\n            new FlowPortModel({type: 'exec', in: true, name: 'InExec', hiddenLabel: true}),\n            new FlowPortModel({type: variable.type, in: true, name: 'SetData', hiddenLabel: true, maximumLinks: 1}),\n            new FlowPortModel({type: 'exec', in: false, name: 'OutExec', hiddenLabel: true, maximumLinks: 1}),\n        ]);\n        this.variable = variable;\n    }\n    getInPortsRender = SetVariablePortsIn\n    getOutPortsRender = SetVariablePortsOut;\n    serialize(): any {\n        return {\n            ...super.serialize(),\n            variable: this.variable.id\n        };\n    }\n}\n\nconst GetVariablePortsOut = ({engine, node} : PortsProps) => (\n    <React.Fragment>\n        <PortWrapper port={node.getPort('GetData')} engine={engine}/>\n    </React.Fragment>\n)\n\nconst SetVariablePortsIn = ({engine, node} : PortsProps) => (\n    <React.Fragment>\n        <PortWrapper port={node.getPort('InExec')} engine={engine} />\n        <PortWrapper port={node.getPort('SetData')} engine={engine} >\n            {isExistLinks(node.getPort('SetData')) ? undefined : <InputVariable node={(node as SetVariableModel)}/>}\n        </PortWrapper>\n    </React.Fragment>\n)\nconst SetVariablePortsOut = ({engine, node} : PortsProps) => (\n    <React.Fragment>\n        <PortWrapper port={node.getPort('OutExec')} engine={engine} />\n    </React.Fragment>\n)\n","import React, {useEffect, useState} from 'react';\nimport {FlowDiagramModel, VariableModel} from \"../FlowEditor/Diagram/FlowDiagramModel\";\nimport {Dropdown, Space, Tree, Menu, TreeDataNode as AntTreeDataNode} from \"antd\";\nimport {Point} from \"@projectstorm/geometry\";\nimport {AppstoreAddOutlined, DeleteOutlined, EditOutlined, LogoutOutlined, LoginOutlined} from \"@ant-design/icons\";\nimport {AddVarModal} from \"./AddVarModal\";\nimport {GetVariableModel, SetVariableModel} from \"../FlowEditor/Node/Models/VariableModels\";\nimport {uuid} from \"../../../../../../utils/baseUtils\";\nimport {DiagramEngine} from \"@projectstorm/react-diagrams\";\n\ninterface TreeVariablesProps {\n    diagram: FlowDiagramModel;\n    engine: DiagramEngine;\n}\n\ninterface TreeDataNode extends AntTreeDataNode{\n    variable?: VariableModel;\n}\n\nconst TreeVariables = ({diagram, engine}: TreeVariablesProps) => {\n\n    const [treeDataVars, setTreeDataVars] = useState<TreeDataNode[]>([])\n\n    useEffect(() => {\n        updateTreeDataVars();\n    }, [])\n\n    const updateTreeDataVars = () => {\n        console.log('TreeVariables updateTreeDataVars')\n        setTreeDataVars(\n            diagram.variables.map(v => {\n                return {\n                    key: v.id,\n                    title: v.name,\n                    variable: v\n                }\n            })\n        )\n    }\n\n    const onClickAddVariable = ({type, name}: VariableModel) => {\n        diagram.addVariable({id: uuid(), type: type, name: name, value: null})\n        updateTreeDataVars();\n    }\n\n    const onClickTitleContextMenu = (node: TreeDataNode) => ({key}: {key: string}) => {\n        // console.log('click', e);\n        switch (key){\n            case 'get':\n                if(node.variable)\n                    diagram.addNode(new GetVariableModel({variable: node.variable, type: 'getVariable', position: new Point(100, 100)}))\n                engine.repaintCanvas();\n                break;\n            case 'set':\n                if(node.variable)\n                    diagram.addNode(new SetVariableModel({variable: node.variable, type: 'setVariable', position: new Point(100, 100)}))\n                engine.repaintCanvas();\n            // case 'edit': onAddRow(null); break;\n            // case 'remove': onRemoveRow(rowIndex); break;\n        }\n    }\n\n    const menu = (node: TreeDataNode) => (\n        <Menu onClick={onClickTitleContextMenu(node)} className={'context-menu'}>\n            <Menu.Item key=\"get\"><LogoutOutlined />Добавить GET блок</Menu.Item>\n            <Menu.Item key=\"set\"><LoginOutlined />Добавить SET блок</Menu.Item>\n            <Menu.Divider />\n            <Menu.Item key=\"edit\"><EditOutlined/>Изменить</Menu.Item>\n            <Menu.Item key=\"remove\"><DeleteOutlined/>Удалить</Menu.Item>\n        </Menu>\n    );\n\n    const renderTitle = (node: TreeDataNode) => (\n        <Dropdown overlay={menu(node)} trigger={['click', 'contextMenu']}>\n            <div>{node.title}</div>\n        </Dropdown>\n    )\n\n    return (\n        <React.Fragment>\n            <div className={'flow-editor-left-side-divide-title'}>\n                <Space><AppstoreAddOutlined /><span>Переменные</span></Space>\n                <Space><AddVarModal value={undefined} onFinish={onClickAddVariable}/></Space>\n            </div>\n            <div className={'flow-editor-left-side-vars'}>\n                <Tree\n                    blockNode\n                    defaultExpandAll={true}\n                    showIcon={true}\n                    selectedKeys={[]}\n                    treeData={treeDataVars}\n                    titleRender={renderTitle}\n                />\n            </div>\n        </React.Fragment>\n\n    );\n};\n\nexport default TreeVariables;","import React, {useState} from 'react';\nimport {Button, Space, Tree} from \"antd\";\nimport {Input, Checkbox} from \"rt-design\";\nimport {FormOutlined, EyeOutlined, EyeInvisibleOutlined, PlusOutlined} from \"@ant-design/icons\";\nimport {\n    convertSharedForRolesStringToTable,\n    convertSharedForRolesTableToString,\n    convertSharedForUsersStringToTable,\n    convertSharedForUsersTableToString,\n    SmallModalArrayFields\n} from \"../Core/ModalArrayFields\";\n\ninterface SmallModalProps {\n    id: string;\n    span: string;\n    label: string;\n    name: string;\n    stringToTable: (value: string) => string[];\n    tableToString: (value: any) => string;\n}\n\nconst GeneralFields = ({data}: {data: { id: string; }}) => {\n\n    const [visibleFields, setVisibleFields] = useState<boolean>(false)\n\n    const toggleVisibleFields = () => setVisibleFields((prevState => !prevState))\n\n    //label={'Доступ ролям'}\n    return (\n        <React.Fragment>\n            <div className={'flow-editor-left-side-divide-title'}>\n                <Space><FormOutlined /><span>Поля конфига</span></Space>\n                <Button type={'text'} icon={visibleFields ? <EyeOutlined /> : <EyeInvisibleOutlined />} size={'small'} onClick={toggleVisibleFields}/>\n                {/*<Space onClick={toggleVisibleFields}>{visibleFields ? <EyeOutlined /> : <EyeInvisibleOutlined />}</Space>*/}\n            </div>\n            <Space direction={\"vertical\"} className={'flow-editor-left-side-fields'} style={{display: visibleFields ? 'flex' : 'none'}}>\n                <Input itemProps={{name: 'description'}} size={'small'}/>\n                {/*<Input itemProps={}/>*/}\n                <Space>\n                    <SmallModalArrayFields\n                        id={data.id}\n                        type={'flow'}\n                        // buttonLabel={({length}: {length: any}) => <Space><UsersIcon/><span>({length})</span></Space> }\n                        buttonLabel={({length}: { length: any }) => <span>Users: {length}</span>}\n                        modalTitle={'Доступ пользователям'}\n                        name={'sharedForUsers'}\n                        stringToTable={convertSharedForUsersStringToTable}\n                        tableToString={convertSharedForUsersTableToString}\n                    />\n                    <SmallModalArrayFields\n                        id={data.id}\n                        type={'flow'}\n                        buttonLabel={({length}: { length: any }) => <span>Roles: {length}</span>}\n                        modalTitle={'Доступ ролям'}\n                        name={'sharedForRoles'}\n                        stringToTable={convertSharedForRolesStringToTable}\n                        tableToString={convertSharedForRolesTableToString}\n                    />\n                    <Checkbox itemProps={{name: 'loggingQueries', valuePropName: 'checked'}}>Log flow</Checkbox>\n                </Space>\n            </Space>\n        </React.Fragment>\n    );\n};\n\nexport default GeneralFields;","import * as React from 'react';\nimport {AbstractModelFactory} from '@projectstorm/react-canvas-core';\nimport {DiagramEngine} from \"@projectstorm/react-diagrams\";\nimport {FlowPortModel} from \"./FlowPortModel\";\n\nexport class FlowPortFactory extends AbstractModelFactory<FlowPortModel, DiagramEngine> {\n    constructor(type: string) {\n        super(type);\n    }\n\n    generateModel(event: any) : FlowPortModel {\n        // console.log('FlowPortFactory generateModel', event)\n        return new FlowPortModel({type: this.type, name: 'unknown'});\n    }\n}\n","import React, {useEffect, useState} from 'react';\nimport PropTypes from 'prop-types';\nimport createEngine from '@projectstorm/react-diagrams';\nimport { CanvasWidget } from '@projectstorm/react-canvas-core';\nimport {Layout, notification, Space, Tree, Collapse} from \"antd\";\nimport {FlowNodeFactory as BranchFactory} from \"./FlowEditor/Node/FlowNodeFactory\";\nimport {Point} from \"@projectstorm/geometry\";\nimport {FlowDiagramModel, VariableModel} from \"./FlowEditor/Diagram/FlowDiagramModel\";\nimport {BranchModel} from \"./FlowEditor/Node/Models/BranchModel\";\nimport {uuid} from \"../../../../../utils/baseUtils\";\nimport {FolderFilled, SaveOutlined, AppstoreAddOutlined, AppstoreOutlined, PlusOutlined} from \"@ant-design/icons\";\nimport {AuthGetUserIdModel, AuthGetListUserRolesModel} from \"./FlowEditor/Node/Models/AuthGetUserModel\";\nimport {RequestModel, ResponseModel} from \"./FlowEditor/Node/Models/NetworkModel\";\nimport {QueryConfigModel} from \"./FlowEditor/Node/Models/QueryConfigModel\";\nimport {JsonListLengthModel, StringListLengthModel} from \"./FlowEditor/Node/Models/ArrayModels\";\nimport {serializeDiagramToBack} from \"./FlowEditor/SerializeDiagram\";\nimport {Form, Modal, FormBody, Input, Select, Button} from \"rt-design\";\nimport {apiPostReq, catchNotification, requestLoadData} from \"../../../../../apis/network\";\nimport TreeVariables from \"./TreeVariables/TreeVariables\";\nimport {GetVariableModel, SetVariableModel} from \"./FlowEditor/Node/Models/VariableModels\";\nimport GeneralFields from \"./GeneralFields\";\nimport { connect } from \"react-redux\";\n\nimport {\n    convertSharedForRolesStringToTable, convertSharedForRolesTableToString,\n    convertSharedForUsersStringToTable,\n    convertSharedForUsersTableToString,\n    SmallModalArrayFields\n} from \"../Core/ModalArrayFields\";\nimport {FlowPortFactory} from \"./FlowEditor/Port/FlowPortFactory\";\n\nconst NODE_TYPES = {\n    REQUEST: ['Request', 'request', RequestModel],\n    BRANCH: ['Branch', 'branch', BranchModel],\n}\n\nexport const DATA_TYPES = [\n    'bool',\n    // 'byte',\n    'int',\n    // 'int64',\n    'float',\n    // 'name',\n    'uuid',\n    'string',\n    'stringList',\n    // 'text',\n    'headers',\n    'json',\n    'jsonList',\n    'object',\n]\n\nexport const PORT_TYPES = [\n    'exec',\n    ...DATA_TYPES\n]\n\nconst getResponseItems = () => {\n    const items = {};\n    DATA_TYPES.forEach(dateType => {\n        const itemType = `response${dateType.charAt(0).toUpperCase() + dateType.slice(1)}`;\n        items[itemType.toUpperCase()] = [`Response [${dateType}]`, itemType, ResponseModel]\n    })\n    return items;\n}\n\nconst treeComponents = {\n    'Network': {\n        REQUEST: ['Request', 'request', RequestModel],\n        ...getResponseItems(),\n    },\n    'Flow control': {\n        BRANCH: ['Branch', 'branch', BranchModel],\n    },\n    'Data': {\n        GET_FLAT_DATA: ['Get flat data', 'getFlatData', QueryConfigModel]\n    },\n    'Utilities': {\n        'List': {\n            STRING_LIST_LENGTH: ['Get list string length', 'stringListLength', StringListLengthModel],\n            JSON_LIST_LENGTH: ['Get list json length', 'jsonListLength', JsonListLengthModel]\n        },\n        'Auth': {\n            GET_USER_ID_FROM_HEADERS: ['Get user id from headers', 'authGetUserId', AuthGetUserIdModel],\n            GET_USER_ROLES_FROM_HEADERS: ['Get user id from headers', 'authGetListUserRoles', AuthGetListUserRolesModel]\n        }\n    }\n\n}\n\nconst parseTree = (obj) => {\n    return Object.keys(obj).map(keyItem => {\n        const item = obj[keyItem]\n        if(Array.isArray(item)){\n            // console.log(`Title: [${item[0]}] Type: [${item[1]}]`)\n            return {\n                title: item[0],\n                key: uuid(),\n                type: item[1],\n                model: item[2],\n            }\n        } else {\n            // console.log(`Key item: [${keyItem}]`)\n            return {\n                title: keyItem,\n                key: uuid(),\n                icon:  <FolderFilled/>,\n                children: parseTree(item)\n            }\n        }\n    })\n\n}\n\nconst treeDataNodes = parseTree(treeComponents)\n\nconst createNodeFactories = (engine, data) => {\n    for (let i = 0; i < data.length; i++) {\n        if (data[i].type && data[i].model)\n            engine.getNodeFactories().registerFactory(new BranchFactory({type: data[i].type, model: data[i].model}))\n        else if (data[i].children)\n            createNodeFactories(engine, data[i].children);\n    }\n}\n\nconst Flow = ({data}) => {\n    let selectedVar = undefined;\n\n    // create engine\n    const engine = createEngine();\n    // Запретить свободные ссылки\n    const state = engine.getStateMachine().getCurrentState();\n    state.dragNewLink.config.allowLooseLinks = false;\n\n    // Создаем фабрики по каждый тип node\n    createNodeFactories(engine, treeDataNodes)\n    engine.getNodeFactories().registerFactory(new BranchFactory({type: 'getVariable', model: GetVariableModel}))\n    engine.getNodeFactories().registerFactory(new BranchFactory({type: 'setVariable', model: SetVariableModel}))\n\n    PORT_TYPES.forEach(type =>\n        engine.getPortFactories().registerFactory(new FlowPortFactory(type))\n    )\n\n    // create diagram model\n    const diagram = new FlowDiagramModel({name: 'MyFistFlow'});\n    diagram.deserializeModel(JSON.parse(data.uiDiagram), engine)\n    engine.setModel(diagram);\n\n    // const [treeDataVars, setTreeDataVars] = useState([])\n\n    // useEffect(() => {\n    //     updateTreeDataVars();\n    // }, [])\n    //\n    // let treeDataVars;\n    // const updateTreeDataVars = () => {\n    //     console.log('updateTreeDataVars')\n    //     treeDataVars =\n    //         Object.keys(diagram.variables).map(key => {\n    //             const v = diagram.variables[key];\n    //             return {\n    //                 key: key,\n    //                 title: v.name,\n    //             }\n    //         })\n    // }\n\n\n    // const onAddRequestMapping = () => {\n    //     const nodes = diagram.getNodes();\n    //     const existNode = !!nodes.find(node => node.getOptions().type === NODE_TYPES.REQUEST_MAPPING);\n    //     if(existNode)\n    //         notification.error({message: `REQUEST_MAPPING в данном flow[${diagram.getOptions().name}] уже существует`})\n    //     else {\n    //         diagram.addNode(new RequestMappingModel({name: diagram.getOptions().name, position: new Point(100, 100)}))\n    //         engine.repaintCanvas();\n    //     }\n    // }\n    // const onAddSetVariable = () => {\n    //     const variable = diagram.getVariable(selectedVar)\n    //     diagram.addNode(new SetVariableModel({variable: variable, position: new Point(100, 100)}))\n    //     engine.repaintCanvas();\n    // }\n    //\n    // const onAddGetVariable = () => {\n    //     const variable = diagram.getVariable(selectedVar)\n    //     diagram.addNode(new GetVariableModel({variable: variable, position: new Point(100, 100)}))\n    //     engine.repaintCanvas();\n    // }\n    //\n    // const renderVarSelect = () => {\n    //     const variables = diagram.getVariables();\n    //     return Object.keys(variables).map(varKey =>\n    //         <Select.Option key={varKey} value={varKey}>{variables[varKey].name}</Select.Option>)\n    // }\n\n    const onClickSaveDiagram = (values) => {\n        if(data.dataBase.readOnly){\n            notification.error({\n                message: 'База доступна только на чтение'\n            });\n        } else {\n            const saveObject = {\n                ...values,\n                logic: JSON.stringify(values.logic),\n                execDiagram: JSON.stringify(serializeDiagramToBack(diagram.serialize())),\n                uiDiagram: JSON.stringify(diagram.serialize())\n            };\n            apiPostReq(data.url.configuration.set, saveObject)\n                .then(res => {\n                    // setLocalData(newData)\n                    console.log('onClickSaveDiagram', saveObject)\n                    notification.success({message: `Save [${data.configName}]`})\n                })\n                .catch(err => catchNotification(err))\n        }\n\n    }\n\n    const onSelectTreeNode = (selectedKeys, {node}) => {\n        if(node.model){\n            console.log('Create model', node)\n            if(node.type === NODE_TYPES.REQUEST && !!diagram.getNodes().find(node => node.getOptions().type === NODE_TYPES.REQUEST)) {\n                notification.error({message: `REQUEST_MAPPING в данном flow[${diagram.getOptions().name}] уже существует`})\n                return;\n            }\n            diagram.addNode(new node.model({type: node.type, name: node.title, position: new Point(100, 100)}))\n            engine.repaintCanvas();\n        } else {\n            console.log('Skip create model', node)\n        }\n    }\n\n    return (\n        <Form\n            loadInitData={(callBack) => callBack(data)}\n            onFinish={onClickSaveDiagram}\n        >\n            <FormBody noPadding={true}>\n                <div className={'flow-editor'}>\n                    <div className={'flow-editor-left-side'}>\n                        <Space className={'flow-editor-left-side-header'}>\n                            {/*<Button size={'small'} onClick={onClickSaveDiagram}>Add variable</Button>*/}\n                                <Button htmlType={'submit'} size={'small'} icon={<SaveOutlined/>}/>\n                        </Space>\n                        <GeneralFields data={data}/>\n                        <TreeVariables diagram={diagram} engine={engine}/>\n                        <div className={'flow-editor-left-side-divide-title'}>\n                            <Space><AppstoreOutlined /><span>Компоненты</span></Space>\n                        </div>\n                        <div className={'flow-editor-left-side-nodes'}>\n                            <Tree\n                                blockNode\n                                defaultExpandAll={true}\n                                showIcon={true}\n                                selectedKeys={[]}\n                                treeData={treeDataNodes}\n                                onSelect={onSelectTreeNode}\n                            />\n                        </div>\n                    </div>\n                    {/*    <Button onClick={onAddAuthGetUserId}>Add AuthGetUserId</Button>*/}\n                    {/*    <Button onClick={onAddAuthGetListUserRoles}>Add AuthGetListUserRoles</Button>*/}\n                    {/*    <Button onClick={onAddBranch}>Add Branch</Button>*/}\n                    {/*    <Button onClick={onAddRequestMapping}>Add request mapping</Button>*/}\n                    {/*    <Select style={{width: 100}} onChange={(value) => selectedVar = value}>*/}\n                    {/*        {renderVarSelect()}*/}\n                    {/*    </Select>*/}\n                    {/*    <Button onClick={onAddSetVariable}>SetVariable</Button>*/}\n                    {/*    <Button onClick={onAddGetVariable}>GetVariable</Button>*/}\n\n                    {/*    <Button onClick={onSaveModal}>Save</Button>*/}\n                    <CanvasWidget className={'flow-editor-canvas'} engine={engine}/>\n                </div>\n            </FormBody>\n        </Form>\n    );\n};\n\nFlow.propTypes = {\n\n};\n\nexport default Flow;","import React, {ReactNode, useState} from 'react';\nimport {Layout} from \"antd\";\nimport {CloseOutlined} from \"@ant-design/icons\";\nimport {Tabs, Custom, TabPane} from 'rt-design';\nimport {NODE_TYPE_TABS} from \"../App\";\n\n\ninterface MainProps {\n\n}\n\ninterface TabData {\n    key: string;\n    type: string;\n}\n\ninterface Tab {\n    key: string;\n    data: TabData;\n    title: ReactNode,\n    content: ReactNode\n}\n\nconst Main = () => {\n\n    /** ===================== Right side states ====================== */\n    const [activeTabKey, setActiveTabKey] = useState<string | undefined>(undefined);\n    const [tabs, setTabs] = useState<Tab[]>([]); //flowTab\n\n    /** ===================== Right side handlers ====================== */\n    const onClickTabRightPanel = (activeKey: string) => { //() => {\n        setActiveTabKey(activeKey);\n        // console.log('onClickTabRightPanel =>', activeKey)\n\n    }\n    const onClickCloseTabRightPanel = (targetKey: string) => (e: React.MouseEvent<HTMLElement>) => {\n        let newActiveKey = activeTabKey;\n        const lastIndex = tabs.findIndex((tab, i) => tab.key === targetKey) - 1;\n        const filteredTabs = tabs.filter(tab => tab.key !== targetKey)\n        if (filteredTabs.length && newActiveKey === targetKey) {\n            // console.log('A newActiveKey =>', newActiveKey, lastIndex)\n            newActiveKey = lastIndex < 0 ? filteredTabs[0].key : filteredTabs[lastIndex].key;\n            // console.log('B newActiveKey =>', newActiveKey, lastIndex)\n        }\n        setActiveTabKey(newActiveKey);\n        setTabs(filteredTabs);\n        e.stopPropagation();\n        e.preventDefault();\n    }\n\n    const onOpenTab = (data: TabData) => {\n        const tab = tabs.find(tab => tab.key === data.key)\n        if(tab) {\n            setActiveTabKey(tab.key);\n        } else {\n            setActiveTabKey(data.key);\n        \tsetTabs([...tabs, NODE_TYPE_TABS[data.type](data)])\n        \t// console.log(\"dddd => \", data.type, NODE_TYPE_TABS[data.type])\n        }\n    }\n\n    return (\n        <React.Fragment>\n            <Custom\n                render={() => null}\n                subscribe={[\n                    {\n                        name: 'onOpenTab',\n                        path: 'rtd.main.tabs.events.onOpenTab',\n                        onChange: ({value}: any) => {\n                            onOpenTab(value)\n                            // console.log('onOpenTab value', value.value)\n                        },\n                    },\n                ]}\n            />\n            <Tabs\n                className={'app-page-tabs app-page-tabs-horizontal'}\n                activeKey={activeTabKey}\n                size={'small'}\n                onTabClick={onClickTabRightPanel}\n            >\n\n                {tabs.map((tab) => (\n                    <TabPane\n                        key={tab.key}\n                        tab={\n                            <React.Fragment>\n                                <span>{tab.title}</span>\n                                <CloseOutlined onClick={onClickCloseTabRightPanel(tab.key)}/>\n                            </React.Fragment>\n                        }\n                    >\n                        {tab.content}\n                    </TabPane>\n                ))}\n            </Tabs>\n        </React.Fragment>\n    );\n};\n\nexport default Main;","import React, {useEffect, useState} from 'react';\nimport {Button, Dropdown, Menu, Select, Space, Tooltip} from \"antd\";\nimport {apiGetDataBases, catchNotification} from \"../../../../../apis/network\";\nimport {DatabaseFilled, ReloadOutlined, ToolOutlined, DeploymentUnitOutlined} from \"@ant-design/icons\";\nimport {FormBody, Modal} from \"rt-design\";\n\nexport const SelectDataBase = props => {\n\n    const {onChange, databases} = props;\n\n    const onChangeHandler = (value) => {\n        onChange(databases[value]);\n    }\n\n    return (\n        <Select\n            size={'small'}\n            style={{width: '100%'}}\n            bordered={false}\n            placeholder={\"Выберите базу\"}\n            onChange={onChangeHandler}\n        >\n            {databases.map((db, index) => {\n                return (\n                    <Select.Option key={index} value={index}>\n                        <Space>\n                            <DatabaseFilled style={{color: \"rgb(0, 129, 189)\"}}/>\n                            <span>{db.name}</span>\n                            <span>{db.readOnly ? '[read only]' : ''}</span>\n                        </Space>\n                    </Select.Option>\n                )\n            })}\n        </Select>\n    );\n};","import React, {useEffect, useState} from 'react';\nimport {apiDeleteReq, apiGetReq, apiPostReq, catchNotification} from \"../../../../apis/network\";\nimport {\n    FolderFilled,\n    PlusOutlined,\n    EllipsisOutlined,\n    ApartmentOutlined,\n    CopyOutlined,\n    DeleteOutlined,\n    EditOutlined,\n} from \"@ant-design/icons\";\nimport {Button, Dropdown, Input, Menu, Modal, notification, Space, Tooltip, Tree, Typography} from \"antd\";\nimport { AutoResizer } from \"react-base-table\";\nimport {NODE_TYPE_ICONS, NODE_TYPES} from \"../../App\";\nimport {uuid} from \"../../../../utils/baseUtils\";\nimport {SqlIcon} from \"../../../../imgs/icons\";\n\nconst listConfigsToTree = (list, parentKey, nodeType, dataBase) => {\n    let roots = [], map = {}, i, node;\n\n    for (i = 0; i < list.length; i += 1) {\n        map[list[i].id] = i; // initialize the map\n        list[i].children = []; // initialize the children\n    }\n\n    for (i = 0; i < list.length; i += 1) {\n        node = list[i];\n        node.key = `${dataBase.name}/${nodeType}/${node.id}`;\n        node.dataBase = dataBase;\n        node.url = {configuration: {}, data: {}};\n        node.url.configuration.get = `${parentKey}/${node.configName}`;\n        node.url.configuration.set = parentKey;\n        node.url.data.flat = `/${dataBase.name}/data/flat/${node.configName}`;\n        node.url.data.hierarchical = `/${dataBase.name}/data/hierarchical/${node.configName}`;\n        node.url.data.sql = `/${dataBase.name}/data/sql/${node.configName}`;\n        node.title = node.configName;\n        node.type = nodeType;\n        node.icon = node.isGroup ? <FolderFilled/> : NODE_TYPE_ICONS[nodeType]; // === NODE_TYPES.QUERY_CONFIG ? <QueryIcon/> : <SaveIcon/>)\n        node.isLeaf = !node.isGroup;\n\n        // Если родителя нет - рутовая нода\n        if (node.parentId === null) {\n            roots.push(node);\n        }else {\n            list[map[node.parentId]].children.push(node);\n        }\n    }\n    return roots;\n}\n\nconst findByPrams = (data, key, rowKey, callback) => {\n    for (let i = 0; i < data.length; i++) {\n        if (data[i][rowKey] === key)\n            return callback(data[i], i, data);\n        if (data[i].children)\n            findByPrams(data[i].children, key, rowKey, callback);\n    }\n};\n\nconst findByKey = (data, key, callback) => findByPrams(data, key, 'key', callback);\n\nconst savaPositionRecursively = (url, data, type) => {\n    for (let i = 0; i < data.length; i++) {\n        if(data[i].type === type){\n            data[i].position = i;\n            // console.log(\"savaPositionRecursively => \", data[i].configName, data[i].position)\n            apiPostReq(url, data[i])\n                .then()\n                .catch(err => catchNotification(err))\n        }\n        if (data[i].children)\n            savaPositionRecursively(url, data[i].children, type);\n    }\n};\n\nconst isQueryType = (node) =>\n    node.type === NODE_TYPES.QUERY_CONFIGS || node.type === NODE_TYPES.QUERY_CONFIG\n\nconst ModalWithInput = ({node, parentNode, nodeNormalize, title, icon, request, onOk, onCancel}) => {\n    let newName = node.configName;\n    Modal.confirm({\n        title: title,\n        icon: icon,\n        content: <Input defaultValue={node.configName} onChange={e => newName = e.target.value} />,\n        okText: 'Сохранить',\n        cancelText: 'Отмена',\n        onOk() {\n            console.log(parentNode);\n            if(parentNode.dataBase.readOnly){\n                notification.error({\n                    message: 'База доступна только на чтение'\n                });\n            } else {\n                const newNode = nodeNormalize({...node, configName: newName});\n                request(newNode)\n                    .then(res => {\n                        notification.success({message: `Save [${newName}]`})\n                        onOk(newNode)\n                    })\n                    .catch(err => catchNotification(err))\n            }\n        },\n        onCancel() {onCancel()}\n    })\n}\n\nconst TreeConfigs = props => {\n\n    const {dataBase, setRightPanelData} = props;\n\n    const [expandedKeys, setExpandedKeys] = useState([]);\n    const [treeData, setTreeData] = useState(undefined);\n\n    const positionUrls = {\n        [NODE_TYPES.QUERY_CONFIG]: `/${dataBase.name}/configurations/query/position`,\n        [NODE_TYPES.SAVE_CONFIG]: `/${dataBase.name}/configurations/save/position`,\n        [NODE_TYPES.FLOW_CONFIG]: `/${dataBase.name}/configurations/flow/position`,\n    }\n\n    useEffect(() => {\n        loadConfigs().then(r => r);\n    }, [dataBase]);\n\n    const loadConfigs = async () => {\n        if (dataBase && dataBase.name) {\n            const urlQueryConfigs = `/${dataBase.name}/configurations/query`;\n            const urlSaveConfigs = `/${dataBase.name}/configurations/save`;\n            const urlFlowConfigs = `/${dataBase.name}/configurations/flow`;\n\n            try {\n                const queryConfigs = listConfigsToTree(\n                    (await apiGetReq(urlQueryConfigs)).data,\n                    urlQueryConfigs,\n                    NODE_TYPES.QUERY_CONFIG, dataBase);\n                const saveConfigs = listConfigsToTree(\n                    (await apiGetReq(urlSaveConfigs)).data,\n                    urlSaveConfigs,\n                    NODE_TYPES.SAVE_CONFIG, dataBase);\n                const flowConfigs = listConfigsToTree(\n                    (await apiGetReq(urlFlowConfigs)).data,\n                    urlFlowConfigs,\n                    NODE_TYPES.FLOW_CONFIG, dataBase);\n\n                setTreeData([{\n                    id: null,\n                    key: uuid(),\n                    dataBase: dataBase,\n                    url: { configuration: {set: urlQueryConfigs}},\n                    type: NODE_TYPES.QUERY_CONFIGS,\n                    icon: <FolderFilled/>,\n                    configName: 'Конфигурации запросов',\n                    isLeaf: false,\n                    isGroup: true,\n                    children: queryConfigs\n                }, {\n                    id: null,\n                    key: uuid(),\n                    dataBase: dataBase,\n                    // url: urlSaveConfigs,\n                    url: { configuration: {set: urlSaveConfigs}},\n                    type: NODE_TYPES.SAVE_CONFIGS,\n                    icon: <FolderFilled/>,\n                    configName: 'Конфигурации сохранения',\n                    isLeaf: false,\n                    isGroup: true,\n                    children: saveConfigs\n                }, {\n                    id: null,\n                    key: uuid(),\n                    dataBase: dataBase,\n                    // url: urlFlowConfigs,\n                    url: { configuration: {set: urlFlowConfigs}},\n                    type: NODE_TYPES.FLOW_CONFIGS,\n                    icon: <FolderFilled/>,\n                    configName: 'Конфигурации потоков',\n                    isLeaf: false,\n                    isGroup: true,\n                    children: flowConfigs\n                }])\n\n            } catch (err) {\n                setTreeData([])\n                catchNotification(err);\n            }\n        }\n    }\n\n    const getAllowDrop = (dropNode, dragNode) => {\n        return dropNode.type === dragNode.type\n            || (dropNode.type === NODE_TYPES.QUERY_CONFIGS && dragNode.type === NODE_TYPES.QUERY_CONFIG)\n            || (dropNode.type === NODE_TYPES.SAVE_CONFIGS && dragNode.type === NODE_TYPES.SAVE_CONFIG)\n            || (dropNode.type === NODE_TYPES.FLOW_CONFIGS && dragNode.type === NODE_TYPES.FLOW_CONFIG);\n    }\n\n    const onDrop = info => {\n        // console.log(info.node)\n        const dropKey = info.node.key;\n        const dragKey = info.dragNode.key;\n        const dropPos = info.node.pos.split('-');\n        const dropPosition = info.dropPosition - Number(dropPos[dropPos.length - 1]);\n        const data = [...treeData];\n\n        // Find dragObject\n        const getDragObj = () => {\n            let dragObj;\n            findByKey(data, dragKey, (item, index, arr) => {\n                arr.splice(index, 1);\n                dragObj = item;\n            });\n            return dragObj;\n        }\n\n        if (!getAllowDrop(info.node, info.dragNode)) {\n            notification.error({message: 'Невозможно переместить между типами'});\n            return;\n        }\n\n        if (info.dropToGap) {\n            // Найти объект который тащим\n            const dragObj = getDragObj();\n            findByKey(data, dropKey, (item, index, arr) => {\n                // Присвоить родителя\n                dragObj.parentId = info.node.parentId;\n                if (dropPosition === -1) {\n                    // Добавить в место\n                    arr.splice(index, 0, dragObj);\n                } else {\n                    // Добавить в место\n                    arr.splice(index + 1, 0, dragObj);\n                }\n                // Обновить стейт\n                setTreeData(data);\n                console.log('Добавить в место => ', dragObj)\n            });\n        } else {\n            // Если объект в который кидаем не группа, то выходим\n            if (!info.node.isGroup) {\n                notification.error({message: 'Невозможно переместить в конфиг'});\n                return;\n            }\n            findByKey(data, dropKey, item => {\n                // Найти объект который тащим\n                const dragObj = getDragObj();\n                // Создать детей\n                item.children = item.children || [];\n                // Присвоить родителя\n                dragObj.parentId = info.node.id || null;\n                // Добавить в начало\n                item.children.unshift(dragObj);\n                // Обновить стейт\n                setTreeData(data);\n                console.log('Добавить в начало => ', dragObj);\n            });\n        }\n\n        const url = positionUrls[info.dragNode.type]\n        // console.log('Save drop url => ', url);\n        savaPositionRecursively(url, data, info.dragNode.type);\n    };\n\n    const onExpand = (expandedKeys) => {\n        setExpandedKeys(expandedKeys);\n    }\n\n    const onSelect = (selectedKeys, {node}) => {\n        // console.log(\"onSelect: \", node);\n        !node.isGroup && setRightPanelData({...node});\n    }\n\n    const onClickTitleContextMenu = (node) => ({key}) => {\n        // console.log('onClickTitleContextMenu', node, key);\n        switch (key) {\n            case 'addGroup':\n                addGroup(node);\n                break;\n            case 'addConfig':\n                addConfig(node);\n                break;\n            case 'rename':\n                renameConfig(node);\n                break;\n            case 'removeGroup':\n                if (node.children && node.children.length > 0) {\n                    notification.error({message: \"Невозможно удалить папку с конфигами\"})\n                } else {\n                    // notification.success({message: \"Удалить папку\"})\n                    removeConfig(node);\n                }\n                break;\n            case 'copyAs':\n                copyConfig(node);\n                break;\n            case 'remove':\n                removeConfig(node);\n                break;\n\n        }\n    }\n\n    const updateTreeData = (node) => {\n        // loadConfigs().then(r => r);\n        const _treeData = [...treeData];\n        findByKey(_treeData, node.key, (item, index, arr)=> {\n            arr[index] = node;\n            // arr.splice(index, 1);\n            // arr.splice(index, 0, node);\n            // console.log(\"_treeData => \", arr);\n            setTreeData(_treeData);\n        });\n    }\n\n    const addGroup = (parentNode) => {\n        ModalWithInput({\n            node: {},\n            parentNode: parentNode,\n            nodeNormalize: (node) => ({\n                ...node,\n                id: uuid(),\n                isGroup: true,\n                parentId: parentNode.id,\n                position: (parentNode.children && parentNode.children.length) || 0,\n                userId: '0be7f31d-3320-43db-91a5-3c44c99329ab',\n                loggingQueries: false,\n                logic: \"{}\",\n            }),\n            title: 'Создание папки',\n            icon: <EditOutlined/>,\n            request: (newNode) => apiPostReq(parentNode.url.configuration.set, newNode),\n            onOk: (newNode) => loadConfigs().then(r => r),\n            onCancel: () => {\n            }\n        })\n    }\n\n    const addConfig = (parentNode) => {\n        ModalWithInput({\n            node: {},\n            parentNode: parentNode,\n            nodeNormalize: (node) => ({\n                ...node,\n                id: uuid(),\n                isGroup: false,\n                parentId: parentNode.id,\n                position: (parentNode.children && parentNode.children.length) || 0,\n                userId: '0be7f31d-3320-43db-91a5-3c44c99329ab',\n                loggingQueries: false,\n                logic: \"{}\",\n            }),\n            title: 'Создание конфигурации',\n            icon: <EditOutlined/>,\n            request: (newNode) => apiPostReq(parentNode.url.configuration.set, newNode),\n            onOk: (newNode) => loadConfigs().then(r => r),\n            onCancel: () => {\n            }\n        })\n    }\n\n    const renameConfig = (node) => {\n        ModalWithInput({\n            node: node,\n            parentNode: node,\n            nodeNormalize: (node) => node,\n            title: 'Переименование конфигурации',\n            icon: <EditOutlined/>,\n            request: (newNode) => apiPostReq(node.url.configuration.set, newNode),\n            onOk: (newNode) => updateTreeData(newNode),\n            onCancel: () => {\n            }\n        })\n    }\n    const copyConfig = (node) => {\n        ModalWithInput({\n            node: node,\n            parentNode: node,\n            nodeNormalize: (node) => ({...node, id: uuid()}),\n            title: 'Дублирование конфигурации',\n            icon: <CopyOutlined/>,\n            request: (newNode) => apiPostReq(node.url.configuration.set, newNode),\n            onOk: (newNode) => loadConfigs().then(r => r),\n            onCancel: () => {\n            }\n        })\n    }\n    const removeConfig = (node) => {\n        ModalWithInput({\n            node: node,\n            parentNode: node,\n            nodeNormalize: (node) => ({...node, id: null}),\n            title: 'Удалиние конфигурации',\n            icon: <DeleteOutlined/>,\n            request: (newNode) => apiDeleteReq(`${node.url.configuration.set}/${node.id}`, newNode),\n            onOk: (newNode) => loadConfigs().then(r => r),\n            onCancel: () => {\n            }\n        })\n    }\n\n    const TitleContextMenu = (node) => {\n        let menuItems = [];\n        if(node.isGroup){\n            menuItems.push(<Menu.Item key=\"addGroup\"><FolderFilled/>Создать папку</Menu.Item>)\n            menuItems.push(<Menu.Item key=\"addConfig\">{NODE_TYPE_ICONS[node.type]}Создать конфиг</Menu.Item>)\n            if([NODE_TYPES.QUERY_CONFIG, NODE_TYPES.SAVE_CONFIG, NODE_TYPES.FLOW_CONFIG].includes(node.type)) {\n                menuItems.push(<Menu.Item key=\"rename\"><EditOutlined/>Переименовать</Menu.Item>)\n                menuItems.push(<Menu.Item key=\"removeGroup\"><DeleteOutlined/>Удалить папку</Menu.Item>)\n            }\n        } else {\n            menuItems.push(<Menu.Item key=\"rename\"><EditOutlined/>Переименовать</Menu.Item>)\n            menuItems.push(<Menu.Item key=\"copyAs\"><CopyOutlined/>Дублировать конфиг</Menu.Item>);\n            menuItems.push(<Menu.Item key=\"remove\"><DeleteOutlined/>Удалить конфиг</Menu.Item>);\n        }\n        return (\n            <Menu onClick={onClickTitleContextMenu(node)} className={'context-menu'}>\n                {menuItems}\n            </Menu>\n        )\n    }\n\n    /** ===================== Renders ====================== */\n    const renderTitle = (nodeData) => (\n        <Dropdown overlay={TitleContextMenu(nodeData)} trigger={['contextMenu']}>\n            <div style={{display: \"flex\", justifyContent: 'space-between', paddingRight: '8px'}}>\n                <Tooltip title={nodeData.description} placement=\"topLeft\" mouseEnterDelay={0.75}>\n                    <span style={{width: '100%'}} onClick={() => {!nodeData.isGroup && setRightPanelData({...nodeData});}}>{nodeData.configName}</span>\n                </Tooltip>\n                {!nodeData.isGroup && nodeData.type === NODE_TYPES.QUERY_CONFIG &&\n                    <Space>\n                        {/*{nodeData.customSql && <DatabaseOutlined />}*/}\n                        {nodeData.customSql && <Tooltip title={'Exist custom SQL'}><SqlIcon/></Tooltip>}\n                        {nodeData.hierarchical && <Tooltip title={'Hierarchical'}><ApartmentOutlined/></Tooltip>}\n                    </Space>\n                }\n                {nodeData.isGroup\n                    // && (nodeData.type === NODE_TYPES.QUERY_CONFIG\n                    // || nodeData.type === NODE_TYPES.SAVE_CONFIG)\n                    && <Space>\n                        <Tooltip title=\"Создать конфиг\">\n                            <Button onClick={() => onClickTitleContextMenu(nodeData)({key: 'addConfig'})} size={'small'} className={'ant-tree-title-btn'} icon={<PlusOutlined/>} type=\"text\"/>\n                        </Tooltip>\n                        <Dropdown size={'small'} className={'ant-tree-title-btn'} trigger={['click']} overlay={TitleContextMenu(nodeData)}>\n                            <Tooltip title=\"Доп. действия\">\n                                <Button size={'small'} className={'ant-tree-title-btn'} icon={<EllipsisOutlined />} type=\"text\"/>\n                            </Tooltip>\n                        </Dropdown>\n                    </Space>\n                }\n            </div>\n        </Dropdown>\n    )\n\n    const renderTreePlaceholder = (height, width, msg) => ( // style={{color: 'rgba(0,0,0,.45)'}}\n        <div style={{ width: width, height: height, overflow: 'auto', display: 'flex', flexDirection: 'column', alignItems: 'center', justifyContent: 'center'}}>\n            {Array.isArray(msg)\n                ? msg.map((m, i) => <Typography.Title key={i} level={4} type={'secondary'} style={{marginTop: 0}}>{m}</Typography.Title>)\n                : <Typography.Title level={4} type={'secondary'} >{msg}</Typography.Title>\n            }\n        </div>\n    )\n\n    const renderTree = (height, width) => {\n        if(!treeData)\n            return renderTreePlaceholder(height, width, \"Выберите базу данных\")\n        else if(treeData && treeData.length === 0)\n            return renderTreePlaceholder(height, width, [\"Ошибка загрузки базы данных\", \"Выберите другую базу данных\"])\n        else if(treeData && treeData.length > 0) {\n            return (\n                <div style={{ width: width, height: height, overflow: 'auto'}}>\n                    <Tree\n                        blockNode\n                        showIcon={true}\n                        treeData={treeData}\n                        draggable={(nodeData) => [NODE_TYPES.QUERY_CONFIG, NODE_TYPES.SAVE_CONFIG, NODE_TYPES.FLOW_CONFIG].includes(nodeData.type)}\n                        expandedKeys={expandedKeys}\n                        onDrop={onDrop}\n                        onExpand={onExpand}\n                        // onSelect={onSelect}\n                        titleRender={renderTitle}\n                    />\n                </div>\n            )\n        }\n    }\n\n    return (\n        <div style={{height: '100%'}} >\n            <AutoResizer>\n                {({height, width}) => (\n                    renderTree(height, width)\n                )}\n            </AutoResizer>\n        </div>\n    );\n};\n\nTreeConfigs.propTypes = {\n\n};\n\nexport default TreeConfigs;","import React from 'react';\nimport {FormBody, Modal} from \"rt-design\";\nimport {SelectDataBase} from \"./SelectDataBase\";\n\nconst MigrateModal = (props: {databases: any[]}) => {\n\n    const {databases = []} = props;\n\n    return (\n        <Modal\n            buttonProps={{ hidden: true }}\n            modalConfig={{\n                type: 'save',\n                // @ts-ignore\n                title: `Migrate configs`,\n                // width: 600,\n                // bodyStyle: {height: 320},\n                form: {\n                    name: 'migrateConfigs',\n                    labelCol: {span: 10},\n                    wrapperCol: {span: 12},\n                },\n            }}\n            // dispatch={{\n            //     path: '2debug.form.table.events.onEditModal',\n            //     //type: 'event',\n            // }}\n            subscribe={[\n                {\n                    name: `migrateConfigsModal`,\n                    path: `rtd.leftSide.configs.events.onMigrateConfigs`,\n                    onChange: ({value, setModalData, openModal}) => {\n                        openModal();\n                    },\n                },\n            ]}\n\n        >\n            <FormBody noPadding={false} scrollable={false}>\n                <SelectDataBase databases={databases}/>\n                <SelectDataBase databases={databases}/>\n            </FormBody>\n        </Modal>\n    );\n};\n\nMigrateModal.propTypes = {\n    \n};\n\nexport default MigrateModal;","import React, {useEffect, useState} from 'react';\nimport {SelectDataBase} from \"./SelectDataBase\";\nimport {apiGetDataBases, apiPostReq, catchNotification} from \"../../../../../apis/network\";\nimport {Button, Dropdown, Menu, notification, Select, Space, Tooltip} from \"antd\";\nimport {FormBody, Modal, withStore} from \"rt-design\";\nimport {DatabaseFilled, DeploymentUnitOutlined, ReloadOutlined, ToolOutlined} from \"@ant-design/icons\";\nimport {StoreProps} from \"rt-design/dist/components/core/wrappers\";\nimport moment from 'moment';\nimport {useDispatch} from \"react-redux\";\nimport {dispatchToStore} from \"../../../../../utils/redux\";\nimport MigrateModal from \"./MigrateModal\";\nimport {notificationError} from \"../../../../../utils/baseUtils\";\n\nconst Header = (props: StoreProps & {onChangeDataBase: (value: any) => void}) => {\n\n    const dispatch = useDispatch();\n\n    const {onChangeDataBase} = props;\n\n    const [databases, setDatabases] = useState<any>([]);\n    const [selectedDB, setSelectedDB] = useState({});\n\n    useEffect(() => {\n        apiGetDataBases()\n            .then(res => setDatabases(res.data))\n            .catch(catchNotification)\n\n    }, [])\n\n    const onChangeDataBaseHandler = (value: number) => {\n        console.log('onChangeDataBaseHandler', databases, value)\n        setSelectedDB(value);\n        onChangeDataBase(value);\n    }\n\n    const onClickReload = () => {\n        onChangeDataBase({...selectedDB});\n    }\n\n    const onClickMigrate = () => {\n        apiPostReq('/migrate-configs', {dataBaseSource: 'MI_DEV_121.117', dataBaseTarget: 'MI_DEMO_31.117', type: 'FULL'})\n            .then(res => notification.success({message: `Успешная миграция`}) )\n            .catch(err => notificationError(err, 'Ошибка миграции'))\n    }\n\n    const onClickToolsMenu = () => {\n        // dispatchToStore({dispatch, path: 'leftSide.configs.events.onMigrateConfigs', value: { timestamp: moment() }});\n        onClickMigrate()\n    }\n\n    const toolsMenu = (\n        <Menu onClick={onClickToolsMenu}>\n            <Menu.Item key=\"0\">\n                <Space><DeploymentUnitOutlined />Migrate configs 121.117 to 31.117</Space>\n            </Menu.Item>\n        </Menu>\n    );\n\n    return (\n        <div style={{padding: '4px', borderBottom: '2px solid #f0f0f0'}}>\n            <div style={{display: 'flex'}}>\n                <SelectDataBase databases={databases} onChange={onChangeDataBaseHandler}/>\n                <Tooltip title={'Reload configs'}>\n                    <Button size={\"small\"} type={\"text\"} icon={<ReloadOutlined/>} onClick={onClickReload}/>\n                </Tooltip>\n                <Dropdown overlay={toolsMenu} trigger={['click']}>\n                    <Tooltip title={'Tools'}>\n                        <Button size={\"small\"} type={\"text\"} icon={<ToolOutlined />} onClick={onClickReload}/>\n                    </Tooltip>\n                </Dropdown>\n                <MigrateModal databases={databases}/>\n            </div>\n        </div>\n    );\n};\n\nexport default Header;\n\n","import React, {useState} from 'react';\nimport {Button, notification, Space} from \"antd\";\nimport { SelectDataBase } from \"./Header/SelectDataBase\";\nimport TreeConfigs from \"./TreeConfigs\";\nimport {apiPostReq} from \"../../../../apis/network\";\nimport {notificationError} from \"../../../../utils/baseUtils\";\nimport Header from \"./Header/Header\";\nconst Configs = props => {\n\n    const { setRightPanelData } = props\n\n    const [dataBase, setDataBase] = useState({name: undefined});\n\n    const onChangeDataBaseHandler = (value) => {\n        console.log('onChangeDataBaseHandler', value)\n        setDataBase(value);\n    }\n\n\n\n    return (\n        <div style={{display: 'flex', flexDirection: 'column', width: '100%'}}>\n            <Header onChangeDataBase={onChangeDataBaseHandler}/>\n            {/*<div style={{padding: '4px', borderBottom: '2px solid #f0f0f0'}}>*/}\n            {/*    <SelectDataBase onChange={onChangeDataBaseHandler}/>*/}\n                {/*<Button onClick={onClickMigrate}>Migrate</Button>*/}\n            {/*</div>*/}\n            <TreeConfigs setRightPanelData={setRightPanelData} dataBase={dataBase}/>\n        </div>\n    );\n};\n\nexport default Configs;","import React, {useEffect, useState} from 'react';\nimport {apiGetReq, catchNotification, genericRequest} from \"../../../apis/network\";\nimport {NODE_TYPES} from \"../App\";\nimport {Button, Form} from 'rt-design';\nimport {Input, Space, Tree} from \"antd\";\nimport {CodeFilled, FilterFilled} from \"@ant-design/icons\";\nimport {JiraIcon} from \"../../../imgs/icons\";\n\ninterface Credentials {\n    username?: string;\n    password?: string;\n    hash?: string;\n}\n\nconst Jira = ({setRightPanelData}: {setRightPanelData: (data: any) => void}) => {\n\n    const [credentials, setCredentials] = useState<Credentials>({username: '', password: '', hash: ''});\n    const [treeData, setTreeData] = useState([]);\n\n    // useEffect(() => {\n    const loadFilters = () => {\n        const auth = `Basic ${btoa(credentials.username + ':' + credentials.password)}`;\n        genericRequest({\n            method: 'GET',\n            // headers: {'jiraAuth': 'Basic YW50b24uZWxpc2VldjpTaHZhcmM5Ng=='},\n            headers: {'jiraAuth': auth},\n            url: `/api/jira/rest/api/2/filter/favourite`\n        })\n            .then(res => {\n                // console.log('JIRA => ', res.data)\n                setTreeData(res.data.map((srv: any) => {\n                    return {\n                        ...srv,\n                        type: NODE_TYPES.JIRA_FILTER,\n                        title:\n                            <Space>\n                                <FilterFilled style={{color: \"rgb(0, 129, 189)\"}}/>\n                                <span>{srv.name}</span>\n                            </Space>,\n                        key: `jiraFilter/${srv.name}/${srv.id}`,\n                        isLeaf: true\n                    }\n                }))\n            })\n            .catch(catchNotification)\n    }\n    // }, [])\n\n    // 'username' | 'password'\n    const onChangeUsername = (e: React.ChangeEvent<HTMLInputElement>) => {\n        setCredentials({...credentials,\n            username: e.target.value,\n            hash: `Basic ${btoa(e.target.value + ':' + credentials.password)}`})\n    }\n\n    const onChangePassword = (e: React.ChangeEvent<HTMLInputElement>) => {\n        setCredentials({...credentials,\n            password: e.target.value,\n            hash: `Basic ${btoa(credentials.username + ':' + e.target.value)}`})\n    }\n\n    const onLoadFilters = () => {\n        loadFilters();\n    }\n\n    const onSelect = (selectedKeys: React.Key[], {node}: any) => {\n        // console.log(\"onSelect: \", node);\n        setRightPanelData({...node, 'jiraAuth': credentials.hash});\n    }\n    // bordered={false}\n    return (\n        <div style={{display: 'flex', flexDirection: 'column', width: '100%'}}>\n            <div style={{display: 'flex', alignItems: 'center', height: '34px', padding: '4px 11px', borderBottom: '2px solid #f0f0f0', }}>\n                <JiraIcon style={{margin: '0 8px 0 0', color: \"rgb(0, 129, 189)\"}}/>JIRA Filters\n            </div>\n            <Space direction={'vertical'} style={{margin: '8px 16px 8px 16px'}}>\n                <Input allowClear size={'small'} type={'text'} placeholder={'Login'}\n                       value={credentials.username} onChange={onChangeUsername}/>\n                <Input allowClear size={'small'} type={'password'} placeholder={'Password'}\n                       value={credentials.password} onChange={onChangePassword}/>\n                <Button size={'small'} style={{width: '100%'}} onClick={onLoadFilters}>Load filters</Button>\n                {/*<Button size={\"small\"} type={\"text\"}/>*/}\n\n            </Space>\n            <div style={{ overflow: 'auto'}}>\n                <Tree\n                    onSelect={onSelect}\n                    treeData={treeData}\n                />\n            </div>\n        </div>\n    );\n};\n\nexport default Jira;","import React, {useState} from 'react';\nimport {Tabs} from \"antd\";\nimport {CodeFilled, DatabaseFilled, TeamOutlined} from \"@ant-design/icons\";\nimport Configs from \"./Configs/Configs\";\nimport Ssh from \"./Ssh\";\nimport {dispatchToStore} from \"../../../utils/redux\";\nimport {useDispatch} from \"react-redux\";\nimport Jira from \"./Jira\";\nimport {JiraIcon} from \"../../../imgs/icons\";\n\ninterface LeftSideProps {\n    SplitPaneProps: any;\n    splitPaneSize: number;\n    setSplitPaneSize: (arg: number) => void;\n}\n\nconst LeftSide = ({SplitPaneProps, splitPaneSize, setSplitPaneSize}: LeftSideProps) => {\n\n    const dispatch = useDispatch();\n    const [activeTabKey, setActiveTabKey] = useState<string>(\"1\");\n\n\n    const onClickTabLeftPanel = (activeKey: string) => {\n        // console.log('onChangeTab => ', activeKey);\n        if(activeTabKey === activeKey){\n            setActiveTabKey('0');\n            setSplitPaneSize(SplitPaneProps.blockedSize);\n        } else {\n            setActiveTabKey(activeKey);\n            setSplitPaneSize(splitPaneSize === SplitPaneProps.blockedSize ? SplitPaneProps.defaultSize : splitPaneSize);\n        }\n    }\n    const onClickTreeNodeHandler = (data: any) => {\n        dispatchToStore({dispatch, path: 'main.tabs.events.onOpenTab', value: data});\n    }\n\n    return (\n        <Tabs\n            className={'app-page-tabs app-page-tabs-vertical'}\n            tabPosition={'left'}\n            size={'small'}\n            defaultActiveKey={activeTabKey}\n            activeKey={activeTabKey}\n            onChange={onClickTabLeftPanel}\n        >\n            <Tabs.TabPane tab={<span><DatabaseFilled style={{margin: '0 8px 0 0'}}/>Конфиги</span>} key=\"1\" className={'app-page-tab data-bases'}>\n                <Configs setRightPanelData={onClickTreeNodeHandler}/>\n            </Tabs.TabPane>\n            {/*<Tabs.TabPane tab={<span><CodeFilled style={{margin: '0 8px 0 0'}}/>SSH</span>} key=\"2\" className={'app-page-tab'}>*/}\n            {/*    <Ssh setRightPanelData={onClickTreeNodeHandler}/>*/}\n            {/*</Tabs.TabPane>*/}\n            <Tabs.TabPane tab={<span><JiraIcon style={{margin: '0 8px 0 0'}}/>JIRA</span>} key=\"3\" className={'app-page-tab'}>\n                <Jira setRightPanelData={onClickTreeNodeHandler}/>\n            </Tabs.TabPane>\n            {/*<Tabs.TabPane tab={<span><TeamOutlined style={{marginTop: '0 8px 0 0'}}/>Пользователи</span>} key=\"20\">*/}\n            {/*    Users*/}\n            {/*</Tabs.TabPane>*/}\n        </Tabs>\n    );\n};\n\nexport default LeftSide;","import moment from 'moment';\nimport {setDataStore} from 'rt-design/lib/redux/rtd.actions';\n\ninterface DispatchToStoreOptions {\n    dispatch: (any)\n    path: string;\n    value: any;\n    type?: string;\n}\n\nexport const dispatchToStore = ({dispatch, path, value, type} : DispatchToStoreOptions) => {\n    // console.log(\"storeHOC => dispatchToStore\", dispatch, setDateStore);\n    if(dispatch && path && setDataStore) {\n        if(type === 'event')\n            dispatch(setDataStore(path,  {\n                timestamp: moment(),\n                value: value,\n            }));\n        else\n            dispatch(setDataStore(path, value));\n    }\n}","import React, {ChangeEvent, useState} from 'react';\nimport SplitPane from \"react-split-pane\";\nimport {Layout, TextArea, Space} from \"rt-design\";\nimport {Row, Col, Select, Button, Input, Modal} from \"antd\";\nimport {CodeFilled, ExclamationCircleOutlined} from \"@ant-design/icons\";\nimport {ShellCommand} from \"../../LeftSide/Ssh\";\nimport {apiPostReq} from \"../../../../apis/network\";\n\nconst Executor = ({commands}: {commands: ShellCommand[]}) => {\n\n\n    return null;\n}\n\nconst Ssh = ({data}: {data: any}) => {\n    // console.log('ssh => ', data);\n\n    const [cmd, setCmd] = useState<string | undefined>(undefined);\n\n    const onChangeHandler = (value: string) => {\n        setCmd(value);\n    }\n    const onClickExecute = () => {\n        Modal.confirm({\n            width: 440,\n            title: 'Вы действительно хотите выполнить команду?',\n            icon: <ExclamationCircleOutlined />,\n            content: cmd,\n            onOk() {\n                console.log('onClickExecute => ', cmd);\n                apiPostReq('/execute', {serverName: data.name, cmd: cmd})\n                    .then(res => console.log('res => ', res.data))\n            },\n            onCancel() {\n                console.log('Cancel');\n            },\n        });\n    }\n\n    return (\n        <SplitPane\n            className={'ssh-tab'}\n            split='vertical'\n            minSize={'30%'}\n            maxSize={'70%'}\n            defaultSize={'50%'}\n        >\n            {/*<Executor commands={data.commands}/>*/}\n            <Space direction={\"vertical\"} className={'ssh-tab-left'}>\n                <Row gutter={8}>\n                    <Col span={12}>\n                        <Select\n                            size={'small'}\n                            style={{ width: '100%' }}\n                            placeholder={\"Выберите команду\"}\n                            onChange={onChangeHandler}\n                        >\n                            {data.commands.map((db: ShellCommand, index: number) => { //marginRight: '8px'\n                                return (\n                                    <Select.Option key={index} value={db.command}>\n                                        <Space>\n                                            <CodeFilled style={{color: \"rgb(0, 129, 189)\"}}/>\n                                            <span>{db.name}</span>\n                                        </Space>\n                                    </Select.Option>\n                                )\n                            })}\n                        </Select>\n                    </Col>\n                    <Col span={12}>\n                        <Button onClick={onClickExecute} size={'small'} style={{ width: '100%' }}>Выполнить команду</Button>\n                    </Col>\n                </Row>\n                <Input.TextArea\n                    value={cmd}\n                    onChange={(e: React.ChangeEvent<HTMLTextAreaElement>) => setCmd(`${e.target.value}`) }\n                    autoSize={{ minRows: 2, maxRows: 10 }}\n                />\n            </Space>\n            <div style={{display: 'flex', width: '100%'}}>\n            </div>\n        </SplitPane>\n    );\n};\n\nexport default Ssh;","import React from 'react';\nimport {Tag, Tooltip} from \"antd\"\n\ninterface StatusModel {\n    \"id\": string;\n    \"name\": string;\n    \"statusCategory\": {\n        \"colorName\": 'blue-gray' | 'yellow' | 'green'\n    }\n}\n\ninterface issueType {\n    id: string;\n    iconUrl: string;//\t\"https://atlassian.dias-dev.ru/jira/images/icons/issuetypes/epic.svg\"\n    name: string; //\"Epic\"\n}\n\nconst defFieldParams = {\n    \"alias\": null,\n    \"position\": 0,\n    \"visible\": true,\n    \"resizable\": true,\n    \"sortable\": false,\n    \"align\": \"left\",\n    // \"width\": 200,\n    \"defaultSort\": null,\n    \"defaultFilter\": null\n}\n\nexport const config = {\n    \"hierarchical\": false,\n    \"hierarchyField\": \"\",\n    \"hierarchyView\": \"\",\n    \"hierarchyLazyLoad\": false,\n    \"fields\": [{\n        ...defFieldParams,\n        // \"name\": ['fields', 'issuetype'],\n        \"name\": 'issuetype',\n        \"header\": 'Type',\n        \"align\": \"center\",\n        \"resizable\": false,\n        \"width\": 50,\n    }, {\n        ...defFieldParams,\n        // \"name\": ['fields', 'priority', 'name'],\n        \"name\": 'priority',\n        \"header\": 'Priority',\n        \"width\": 100,\n    },{\n        ...defFieldParams,\n        \"name\": 'status', //['fields', 'status'],\n        \"header\": 'Status',\n        \"alias\": 'status',\n        // \"width\": 205,\n        \"width\": 140,\n    },{\n        ...defFieldParams,\n        \"name\": ['fields', 'project', 'name'],\n        \"header\": 'Project',\n        \"width\": 150,\n    },{\n        ...defFieldParams,\n        \"name\": 'key',\n        \"header\": 'Key',\n        \"width\": 150,\n    },{\n        ...defFieldParams,\n        \"name\": ['fields', 'assignee', 'displayName'],\n        \"header\": 'Assignee',\n        \"width\": 130,\n    },{\n        ...defFieldParams,\n        \"name\": ['fields', 'summary'],\n        \"header\": 'Summary', // priority\n    },]\n}\n\nexport const configRenders = [{\n    name: 'issuetype',\n    cellRenderer: ({rowData}: any) => {\n        return <Tooltip title={rowData.fields.issuetype.name}><img src={rowData.fields.issuetype.iconUrl}/></Tooltip>\n    }\n}, {\n    name: 'key',\n    cellRenderer: ({cellData}: any) => <a href={`https://atlassian.dias-dev.ru/jira/browse/${cellData}`} target={'_blank'}>{cellData}</a>\n}, {\n    name: 'priority',\n    cellRenderer: ({rowData}: any) => {\n        const priority = rowData.fields.priority as StatusModel;\n        return <div className={`jira-priority jira-priority-${priority.name}`}>{priority.name}</div>\n    }\n}, {\n    name: 'status',\n    cellRenderer: ({rowData}: any) => {\n        const status = rowData.fields.status as StatusModel;\n        return <div className={`jira-status jira-status-${status.statusCategory.colorName}`}>{status.name}</div>\n    }\n}]","import React, {useEffect, useState} from 'react';\nimport {apiGetReq, catchNotification, genericRequest, requestLoadConfig} from \"../../../../apis/network\";\nimport {Table, Layout} from \"rt-design\";\nimport {config, configRenders} from \"./tasksConfig\";\nimport {Button, Input, Space, Spin} from \"antd\";\nimport {ReloadOutlined} from \"@ant-design/icons\";\n\nconst Jira = ({data}: {data: any}) => {\n\n    const [loaded, setLoaded] = useState(false);\n    // const [issueTypes, setIssueTypes] = useState([]);\n    const [jql, setJql] = useState(data.jql);\n\n    // useEffect(() => {\n    //     genericRequest({\n    //         headers: {'jiraAuth': data.jiraAuth},\n    //         url: \"/api/jira/rest/api/2/issuetype\",\n    //     }).then(res => setIssueTypes(res.data))\n    // }, [])\n\n    useEffect(() => {\n        if (!loaded)\n            setTimeout(() => setLoaded(true), 20);\n    }, [loaded])\n\n    const requestLoadConfigHandler = () => {\n        return new Promise((resolve) => resolve({data: config}));\n    }\n\n    const requestLoadRowsHandler = () => {\n        return genericRequest({\n            method: 'POST',\n            // headers: {'jiraAuth': 'Basic YW50b24uZWxpc2VldjpTaHZhcmM5Ng=='},\n            headers: {'jiraAuth': data.jiraAuth},\n            url: \"/api/jira/rest/api/2/search\",\n            data: {\n                jql: jql\n            }\n        })\n            .then(res => new Promise((resolve) => resolve({...res, data: res.data.issues})))\n            .catch(err => new Promise((resolve, reject) => reject(err)))\n    }\n\n    const onChangeJql = (e: React.ChangeEvent<HTMLInputElement>) => setJql(e.target.value)\n\n    const onClickReload = () => setLoaded(false);\n\n    if (loaded)\n        return (\n            <Layout>\n                <div style={{display: 'flex', marginBottom: '8px'}}>\n                    <Input size={\"small\"} value={jql} onChange={onChangeJql} onPressEnter={onClickReload} style={{marginRight: '8px'}}/>\n                    <Button size={\"small\"} icon={<ReloadOutlined/>} onClick={onClickReload}>Reload tasks</Button>\n                </div>\n                <Table\n                    fixWidthColumn={true}\n                    customColumnProps={configRenders}\n                    requestLoadRows={requestLoadRowsHandler}\n                    requestLoadConfig={requestLoadConfigHandler}\n                />\n            </Layout>\n        );\n    else\n        return <Spin/>\n};\n\nexport default Jira;","import React, {useState} from 'react';\nimport SplitPane from 'react-split-pane';\nimport {Layout, Space} from 'antd';\nimport axios from \"axios\";\nimport logo from \"../../imgs/logo.png\";\nimport {DatabaseFilled, FilterFilled} from \"@ant-design/icons\";\nimport Query from \"./Main/Configs/Query/Query\";\nimport {FlowIcon, JiraIcon, LogOutIcon, QueryIcon, SaveIcon} from \"../../imgs/icons\";\nimport SaveForm from \"./Main/Configs/Save/SaveForm\";\nimport Flow from \"./Main/Configs/Flow/Flow\";\nimport {uuid} from \"../../utils/baseUtils\";\nimport Main from \"./Main/Main\";\nimport LeftSide from \"./LeftSide/LeftSide\";\nimport Ssh from \"./Main/Ssh/Ssh\";\nimport Jira from \"./Main/Jira/Jira\";\n\nconst SplitPaneProps = {\n\tminSize: 315,\n\tmaxSize: 800,\n\tdefaultSize: 350,\n\tblockedSize: 32,\n}\n\nconst createConfigTab = (data) => ({\n\tkey: data.key,\n\tdata: {...data},\n\ttitle: (\n\t\t<React.Fragment>\n\t\t\t{NODE_TYPE_ICONS[data.type]}\n\t\t\t{`${data.configName} [${data.dataBase.name}]`}\n\t\t</React.Fragment>\n\t),\n\tcontent: (\n\t\t<Layout className={'app-page-tab-content'}>\n\t\t\t{data.type === NODE_TYPES.QUERY_CONFIG && <Query data={data}/>}\n\t\t\t{data.type === NODE_TYPES.SAVE_CONFIG && <SaveForm data={data}/>}\n\t\t\t{data.type === NODE_TYPES.FLOW_CONFIG && <Flow data={data}/>}\n\t\t</Layout>\n\t)\n})\n\nconst createSshTab = (data) => ({\n\tkey: data.key,\n\tdata: {...data},\n\ttitle: (\n\t\t<React.Fragment>\n\t\t\t{NODE_TYPE_ICONS[data.type]}\n\t\t\t{`SSH [${data.name}]`}\n\t\t</React.Fragment>\n\t),\n\tcontent: (\n\t\t<Layout className={'app-page-tab-content'}>\n\t\t\t<Ssh data={data}/>\n\t\t</Layout>\n\t)\n})\n\nconst createJiraTab = (data) => ({\n\tkey: data.key,\n\tdata: {...data},\n\ttitle: (\n\t\t<React.Fragment>\n\t\t\t{NODE_TYPE_ICONS[data.type]}\n\t\t\t{`${data.name}`}\n\t\t</React.Fragment>\n\t),\n\tcontent: (\n\t\t<Layout className={'app-page-tab-content'}>\n\t\t\t<Jira data={data}/>\n\t\t</Layout>\n\t)\n})\n\nexport const NODE_TYPES = {\n\t// DATABASE: 'database',\n\tQUERY_CONFIGS: 'query_configs',\n\tQUERY_CONFIG: 'query_config',\n\tSAVE_CONFIGS: 'save_configs',\n\tSAVE_CONFIG: 'save_config',\n\tFLOW_CONFIGS: 'flow_configs',\n\tFLOW_CONFIG: 'flow_config',\n\tSSH_SERVER: 'ssh_server',\n\tJIRA_FILTER: 'jira_filter'\n}\n\nexport const NODE_TYPE_ICONS = {\n\t[NODE_TYPES.QUERY_CONFIGS]: <QueryIcon style={{margin: '0 4px 0 0'}}/>,\n\t[NODE_TYPES.QUERY_CONFIG]: <QueryIcon style={{margin: '0 4px 0 0'}}/>,\n\t[NODE_TYPES.SAVE_CONFIGS]: <SaveIcon style={{margin: '0 4px 0 0'}}/>,\n\t[NODE_TYPES.SAVE_CONFIG]: <SaveIcon style={{margin: '0 4px 0 0'}}/>,\n\t[NODE_TYPES.FLOW_CONFIGS]: <FlowIcon style={{margin: '0 4px 0 0'}}/>,\n\t[NODE_TYPES.FLOW_CONFIG]: <FlowIcon style={{margin: '0 4px 0 0'}}/>,\n\t[NODE_TYPES.SSH_SERVER]: <DatabaseFilled style={{margin: '0 4px 0 0', color: \"rgb(0, 129, 189)\"}}/>,\n\t[NODE_TYPES.JIRA_FILTER]: <JiraIcon style={{margin: '0 4px 0 0', color: \"rgb(0, 129, 189)\"}}/>,\n}\n\nexport const NODE_TYPE_TABS = {\n\t[NODE_TYPES.QUERY_CONFIGS]: createConfigTab,\n\t[NODE_TYPES.QUERY_CONFIG]: createConfigTab,\n\t[NODE_TYPES.SAVE_CONFIGS]: createConfigTab,\n\t[NODE_TYPES.SAVE_CONFIG]: createConfigTab,\n\t[NODE_TYPES.FLOW_CONFIGS]: createConfigTab,\n\t[NODE_TYPES.FLOW_CONFIG]: createConfigTab,\n\t[NODE_TYPES.SSH_SERVER]: createSshTab,\n\t[NODE_TYPES.JIRA_FILTER]: createJiraTab,\n}\n\nconst flowTab = {\n\tkey: 'flowTab',\n\tdata: {},\n\ttitle: (\n\t\t<React.Fragment>\n\t\t\t{`Flow []`}\n\t\t</React.Fragment>\n\t),\n\tcontent: (\n\t\t<Layout className={'app-page-tab-content'}>\n\t\t\t<Flow data={{id: uuid()}}/>\n\t\t</Layout>\n\t)\n}\n\nconst App = () => {\n\n\t/** ===================== Common states ====================== */\n\tconst [splitPaneSize, setSplitPaneSize] = useState(SplitPaneProps.defaultSize)\n\n\tconst changePassword = () => {\n\t\taxios.post(\"/api/users/change-password\", {oldPassword: \"admin\", newPassword: \"qwerty\"})\n\t\t\t.then(res => console.log(\"changePassword => \", res))\n\t\t\t.catch(err => console.error(\"changePassword => \", err))\n\t}\n\n\t/** ===================== Render ====================== */\n\treturn (\n\t\t<Layout style={{height: '100%', background: 'white'}}>\n\t\t\t<Layout className={'app'}>\n\t\t\t\t<Layout.Header className={'app-header'}>\n\t\t\t\t\t<img src={logo} alt={\"Logo\"} className={'app-header-logo'}/>\n\t\t\t\t\t<Space size={16}>\n\t\t\t\t\t\t<span className={'app-header-version'}>v1.0.12</span>\n\t\t\t\t\t\t<a href={'/logout'} className={'app-header-logout'}>\n\t\t\t\t\t\t\t<LogOutIcon />\n\t\t\t\t\t\t\t{/*<LogoutOutlined></LogoutOutlined>*/}\n\t\t\t\t\t\t\t<span>Logout</span>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</Space>\n\t\t\t\t</Layout.Header>\n\t\t\t\t<Layout.Content className={'app-page'}>\n\t\t\t\t\t<SplitPane\n\t\t\t\t\t\t// className={'Catalog'}\n\t\t\t\t\t\tsplit='vertical'\n\t\t\t\t\t\tminSize={SplitPaneProps.minSize}\n\t\t\t\t\t\tmaxSize={SplitPaneProps.maxSize}\n\t\t\t\t\t\tsize={splitPaneSize}\n\t\t\t\t\t\tdefaultSize={SplitPaneProps.defaultSize}\n\t\t\t\t\t\tallowResize={splitPaneSize !== SplitPaneProps.blockedSize}\n\t\t\t\t\t\tonChange={(size) =>  {setSplitPaneSize(size)} }\n\t\t\t\t\t>\n\t\t\t\t\t\t<LeftSide SplitPaneProps={SplitPaneProps} splitPaneSize={splitPaneSize} setSplitPaneSize={setSplitPaneSize}/>\n\t\t\t\t\t\t<Layout style={{width: '100%'}}>\n\t\t\t\t\t\t\t<Main/>\n\t\t\t\t\t\t</Layout>\n\t\t\t\t\t</SplitPane>\n\t\t\t\t</Layout.Content>\n\t\t\t</Layout>\n\t\t</Layout>\n\t);\n};\n\nexport default App;","export default \"data:image/png;base64,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\"","import React, {useEffect, useState} from 'react';\nimport {Form, Input, Button, Checkbox, Alert} from 'antd';\nimport {parseQueryParams} from \"../../utils/baseUtils\";\nimport axios from \"axios\";\nimport logo from '../../imgs/logo_.png';\n\nconst layout = {\n    wrapperCol: { span: 24 },\n};\nconst tailLayout = {\n    wrapperCol: { offset: 16, span: 16 },\n};\n\nconst Login = props => {\n\n    const {history} = props;\n\n    const [isAuth, setIsAuth] = useState(undefined);\n\n    const onFinish = (values) => {\n        console.log('Success:', values);\n\n        const params = new URLSearchParams();\n        params.append('username', values.username);\n        params.append('password', values.password);\n        axios.post('/login', params)\n            .then(res => {\n                setIsAuth(true);\n                const data = res.data;\n                // console.log(history);\n                if(data.redirect){\n                    history.push(data.redirect)\n                }\n            })\n            .catch(err => setIsAuth(false))\n    };\n\n    const onFinishFailed = (errorInfo) => {\n        console.log('Failed:', errorInfo);\n    };\n    return (\n        <div className={'login-page'}>\n            <Form\n                {...layout}\n                className={'login-form'}\n                name=\"Login\"\n                onFinish={onFinish}\n                onFinishFailed={onFinishFailed}\n            >\n                <Form.Item>\n                    <div className=\"logo\">\n                        <img src={logo} alt={\"Logo\"} width={\"75%\"}/>\n                    </div>\n                </Form.Item>\n                <Form.Item\n                    name=\"username\"\n                    rules={[{ required: true, message: 'Введите имя пользователя' }]}\n                >\n                    <Input placeholder={\"Имя пользователя\"}/>\n                </Form.Item>\n\n                <Form.Item\n                    name=\"password\"\n                    rules={[{ required: true, message: 'Введите пароль' }]}\n                >\n                    <Input.Password placeholder={\"Пароль\"}/>\n                </Form.Item>\n                {isAuth === false && (\n                    <Form.Item>\n                        <Alert message=\"Ошибка логина/пароля\" type=\"error\" />\n                    </Form.Item>\n                )}\n                <Form.Item {...tailLayout} className={'mb-0'}>\n                    <Button type=\"primary\" htmlType=\"submit\" style={{width: '100%'}}>\n                        Вход\n                    </Button>\n                </Form.Item>\n            </Form>\n        </div>\n    );\n};\n\nLogin.propTypes = {\n\n};\n\nexport default Login;","export default \"data:image/png;base64,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\"","import React from 'react';\nimport App from '../components/App/App';\nimport Login from \"../components/Login/Login\";\n\nconst pathPrefix = process && process.env && process.env.PUBLIC_URL;\n\nexport const PATHS = {\n\tPATH_PREFIX: {\n\t\ttitle: 'Advanced management',\n\t\tpath: `${pathPrefix}`,\n\t\t// isGroup: true,\n\t\t// redirect: `${pathPrefix}`,\n\t},\n\t// 404: {\n\t// \ttitle: '404',\n\t// \tpath: `/404`,\n\t// \tisGroup: true,\n\t// },\n\tLOGIN: {\n\t\ttitle: 'Вход',\n\t\tpath: `${pathPrefix}/login`,\n\t\tcomponent: Login,\n\t},\n\t// AUTHORIZATION_CODE: {\n\t// \ttitle: 'Authorization code',\n\t// \tpath: `${pathPrefix}/authorization_code`,\n\t// \tcomponent: AuthorizationCode,\n\t// },\n\tAPP: {\n\t\ttitle: 'Главная',\n\t\tpath: `${pathPrefix}`,\n\t\tcomponent: App,\n\t\t// roles: ['ROLE_ADMIN', 'ROLE_MOBILE_APP'],\n\t},\n\t// DEBUG_LIB: {\n\t// \ttitle: 'Отладка библиотеки',\n\t// \tpath: `/debug-lib`,\n\t// \tcomponent: Debug,\n\t// \troles: ['ROLE_ADMIN']\n\t// },\n\t//\n\t// /** КОНФИГУРАЦИИ API */\n\t// CONFIGURATIONS_PORTAL: {\n\t// \ttitle: 'Конфигурации API',\n\t// \tpath: `/configurations`,\n\t// \tisGroup: true,\n\t// \tredirect: `/configurations/get`,\n\t// \troles: ['ROLE_ADMIN', 'ROLE_MOBILE_APP'],\n\t// },\n\t// /** Конфигурации получения (портал) */\n\t// CONFIGURATIONS_PORTAL_GET: {\n\t// \ttitle: 'Получение данных',\n\t// \tpath: `/configurations/get`,\n\t// \tcomponent: () => <ConfigurationRegistry />, // <ConfigurationRegistry />, // <GetRegistry />\n\t// \troles: ['ROLE_ADMIN'],\n\t// },\n\t// CONFIGURATIONS_PORTAL_GET_EDIT: {\n\t// \ttitle: 'Изменение конфигурации',\n\t// \tpath: `/configurations/get/:id`,\n\t// \tcomponent: () => <ConfigurationForm />,\n\t// },\n\t// CONFIGURATIONS_GET: {\n\t// \ttitle: 'Получение данных (Beta)',\n\t// \tpath: `/get-configurations`,\n\t// \tcomponent: () => <GetRegistry />,\n\t// \troles: ['ROLE_ADMIN'],\n\t// },\n\t// CONFIGURATIONS_GET_EDIT: {\n\t// \ttitle: 'Изменение конфигурации',\n\t// \tpath: `/get-configurations/:id`,\n\t// \tcomponent: () => <GetForm/> // <ConfigurationForm />,\n\t// },\n\t//\n\t// /** Конфигурации сохранения (портал) */\n\t// CONFIGURATIONS_PORTAL_SAVE: {\n\t// \ttitle: 'Сохранение данных',\n\t// \tpath: `/configurations/save`,\n\t// \tcomponent: () => <SaveRegistry />,\n\t// \troles: ['ROLE_ADMIN'],\n\t// },\n\t// CONFIGURATIONS_PORTAL_SAVE_EDIT: {\n\t// \ttitle: 'Изменение конфигурации',\n\t// \tpath: `/configurations/save/:id`,\n\t// \tcomponent: () => <SaveForm />,\n\t// },\n\t//\n\t// DOCUMENTATION: {\n\t// \ttitle: 'Документация API',\n\t// \tpath: `/configurations/documentation`,\n\t// \tcomponent: Documentation,\n\t// \troles: ['ROLE_ADMIN', 'ROLE_MOBILE_APP'],\n\t// },\n\t// MONITORING: {\n\t// \ttitle: 'Мониторинг и логирование',\n\t// \tpath: `/monitoring`,\n\t// \tcomponent: Monitoring,\n\t// \t//roles: ['ROLE_ADMIN']\n\t// },\n\t// TESTING: {\n\t// \ttitle: 'Тестирование АПИ',\n\t// \tpath: `/testing`,\n\t// \tcomponent: App,\n\t// \t//roles: ['ROLE_ADMIN']\n\t// },\n\t// TESTING_LIST: {\n\t// \ttitle: 'Список тестов',\n\t// \tpath: `/testing/tests`,\n\t// \tcomponent: TestsList,\n\t// \t//roles: ['ROLE_ADMIN']\n\t// },\n\t// TESTING_TEST_EDIT: {\n\t// \ttitle: 'Список тестов',\n\t// \tpath: `/testing/tests/:id`,\n\t// \tcomponent: TestEdit,\n\t// },\n\t// TESTING_LOGS: {\n\t// \ttitle: 'Логи тестирования',\n\t// \tpath: `/testing/logs`,\n\t// \tcomponent: TestingApi,\n\t// \t//roles: ['ROLE_ADMIN']\n\t// },\n\t// PLAYGROUND: {\n\t// \ttitle: 'Песочница',\n\t// \tpath: `/playground`,\n\t// \tcomponent: UiForms,\n\t// \t//roles: ['ROLE_ADMIN']\n\t// },\n};\n","import {combineReducers} from 'redux';\nimport {rtdReducer} from \"rt-design\";\n\nconst reducer = combineReducers({\n\trtd: rtdReducer,\n});\n\nexport default reducer;\n","import {createStore, applyMiddleware, compose} from 'redux';\nimport thunk from 'redux-thunk';\n\nimport rootReducer from './reducers';\n\nconst composeEnhancers =\n\t(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ &&\n\t\twindow.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({\n\t\t\ttrace: true,\n\t\t\ttraceLimit: 25\n\t\t})) ||\n\tcompose;\n\nexport const store = createStore(\n\trootReducer,\n\tcomposeEnhancers(applyMiddleware(thunk))\n);\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n\twindow.location.hostname === 'localhost' ||\n\t\t// [::1] is the IPv6 localhost address.\n\t\twindow.location.hostname === '[::1]' ||\n\t\t// 127.0.0.1/8 is considered localhost for IPv4.\n\t\twindow.location.hostname.match(\n\t\t\t/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n\t\t)\n);\n\nexport function register(config) {\n\tif (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n\t\t// The URL constructor is available in all browsers that support SW.\n\t\tconst publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n\t\tif (publicUrl.origin !== window.location.origin) {\n\t\t\t// Our service worker won't work if PUBLIC_URL is on a different origin\n\t\t\t// from what our page is served on. This might happen if a CDN is used to\n\t\t\t// serve assets; see https://github.com/facebook/create-react-app/issues/2374\n\t\t\treturn;\n\t\t}\n\n\t\twindow.addEventListener('load', () => {\n\t\t\tconst swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n\t\t\tif (isLocalhost) {\n\t\t\t\t// This is running on localhost. Let's check if a service worker still exists or not.\n\t\t\t\tcheckValidServiceWorker(swUrl, config);\n\n\t\t\t\t// Add some additional logging to localhost, pointing developers to the\n\t\t\t\t// service worker/PWA documentation.\n\t\t\t\tnavigator.serviceWorker.ready.then(() => {\n\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t'This web app is being served cache-first by a service ' +\n\t\t\t\t\t\t\t'worker. To learn more, visit https://bit.ly/CRA-PWA'\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t// Is not localhost. Just register service worker\n\t\t\t\tregisterValidSW(swUrl, config);\n\t\t\t}\n\t\t});\n\t}\n}\n\nfunction registerValidSW(swUrl, config) {\n\tnavigator.serviceWorker\n\t\t.register(swUrl)\n\t\t.then(registration => {\n\t\t\tregistration.onupdatefound = () => {\n\t\t\t\tconst installingWorker = registration.installing;\n\t\t\t\tif (installingWorker == null) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tinstallingWorker.onstatechange = () => {\n\t\t\t\t\tif (installingWorker.state === 'installed') {\n\t\t\t\t\t\tif (navigator.serviceWorker.controller) {\n\t\t\t\t\t\t\t// At this point, the updated precached content has been fetched,\n\t\t\t\t\t\t\t// but the previous service worker will still serve the older\n\t\t\t\t\t\t\t// content until all client tabs are closed.\n\t\t\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t\t\t'New content is available and will be used when all ' +\n\t\t\t\t\t\t\t\t\t'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t// Execute callback\n\t\t\t\t\t\t\tif (config && config.onUpdate) {\n\t\t\t\t\t\t\t\tconfig.onUpdate(registration);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// At this point, everything has been precached.\n\t\t\t\t\t\t\t// It's the perfect time to display a\n\t\t\t\t\t\t\t// \"Content is cached for offline use.\" message.\n\t\t\t\t\t\t\tconsole.log('Content is cached for offline use.');\n\n\t\t\t\t\t\t\t// Execute callback\n\t\t\t\t\t\t\tif (config && config.onSuccess) {\n\t\t\t\t\t\t\t\tconfig.onSuccess(registration);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t};\n\t\t})\n\t\t.catch(error => {\n\t\t\tconsole.error('Error during service worker registration:', error);\n\t\t});\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n\t// Check if the service worker can be found. If it can't reload the page.\n\tfetch(swUrl)\n\t\t.then(response => {\n\t\t\t// Ensure service worker exists, and that we really are getting a JS file.\n\t\t\tconst contentType = response.headers.get('content-type');\n\t\t\tif (\n\t\t\t\tresponse.status === 404 ||\n\t\t\t\t(contentType != null &&\n\t\t\t\t\tcontentType.indexOf('javascript') === -1)\n\t\t\t) {\n\t\t\t\t// No service worker found. Probably a different app. Reload the page.\n\t\t\t\tnavigator.serviceWorker.ready.then(registration => {\n\t\t\t\t\tregistration.unregister().then(() => {\n\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t// Service worker found. Proceed as normal.\n\t\t\t\tregisterValidSW(swUrl, config);\n\t\t\t}\n\t\t})\n\t\t.catch(() => {\n\t\t\tconsole.log(\n\t\t\t\t'No internet connection found. App is running in offline mode.'\n\t\t\t);\n\t\t});\n}\n\nexport function unregister() {\n\tif ('serviceWorker' in navigator) {\n\t\tnavigator.serviceWorker.ready.then(registration => {\n\t\t\tregistration.unregister();\n\t\t});\n\t}\n}\n","import {\n\tHomeOutlined,\n\tBugOutlined,\n\tControlOutlined,\n\tMonitorOutlined,\n\tIssuesCloseOutlined,\n\tApiOutlined,\n\tCodeSandboxOutlined,\n\tSaveOutlined,\n\tReadOutlined,\n\tDatabaseOutlined,\n} from '@ant-design/icons';\n\nimport {PATHS} from './PATHS';\n\nexport const menu = [\n\t{\n\t\t...PATHS.APP,\n\t\ticon: HomeOutlined,\n\t},\n\t{\n\t\t...PATHS.DEBUG_LIB,\n\t\ticon: BugOutlined,\n\t},\n\t// {\n\t// \t...paths.CONFIGURATIONS_PORTAL,\n\t// \ticon: ApiOutlined, //ControlOutlined,\n\t// \tchildren: [\n\t{...PATHS.CONFIGURATIONS_PORTAL_GET, icon: DatabaseOutlined},\n\t{...PATHS.CONFIGURATIONS_GET, icon: DatabaseOutlined},\n\n\t{...PATHS.CONFIGURATIONS_PORTAL_SAVE, icon: SaveOutlined},\n\t{...PATHS.DOCUMENTATION, icon: ReadOutlined},\n\t\t// ],\n\t// },\n\t{\n\t\t...PATHS.MONITORING,\n\t\ticon: MonitorOutlined,\n\t},\n\t{\n\t\t...PATHS.TESTING,\n\t\ticon: IssuesCloseOutlined,\n\t\tchildren: [PATHS.TESTING_LIST, PATHS.TESTING_LOGS],\n\t},\n\t{\n\t\t...PATHS.PLAYGROUND,\n\t\ticon: CodeSandboxOutlined,\n\t},\n];\n","var _path, _path2;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgLogoSmall(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    height: 20,\n    viewBox: \"0 0 248 195\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    clipRule: \"evenodd\",\n    d: \"M141.562 92.907L163.04 32.3212H164.689L216.655 179.684C218.672 185.345 221.605 189.179 225.454 191.188C229.486 193.197 233.427 194.201 237.277 194.201C240.943 194.201 243.601 193.379 245.25 191.736C247.083 189.91 248 187.719 248 185.162C248 184.249 247.817 182.879 247.45 181.053L184.486 7.39553C183.753 5.02165 181.737 3.1956 178.437 1.91736C175.321 0.63912 171.747 0 167.714 0C164.048 0 160.748 0.63912 157.816 1.91736C155.066 3.013 153.325 4.56515 152.592 6.5738L131.115 64.2043L141.562 92.907Z\",\n    fill: \"white\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    clipRule: \"evenodd\",\n    d: \"M16.4971 191.462C19.4299 189.453 21.9962 185.527 24.1958 179.684L34.5416 150.5H77H107.351L99.3975 127.915H42.5481L76.4366 32.3212H78.0864L111.797 127.915H111.77L119.723 150.5H119.761L130.052 179.684C132.069 185.345 135.001 189.179 138.851 191.188C142.883 193.197 146.824 194.201 150.674 194.201C154.34 194.201 156.998 193.379 158.647 191.736C160.48 189.91 161.397 187.719 161.397 185.162C161.397 184.249 161.214 182.879 160.847 181.053L129.365 94.2245L97.8829 7.39553C97.1497 5.02165 95.1334 3.1956 91.834 1.91736C88.7178 0.63912 85.1435 0 81.1108 0C77.4448 0 74.1454 0.63912 71.2126 1.91736C68.463 3.013 66.7217 4.56515 65.9885 6.5738L1.37476 179.958C0.458255 182.332 0 184.614 0 186.806C0 188.997 0.549904 190.823 1.64971 192.284C2.93282 193.562 4.85748 194.201 7.4237 194.201C10.7231 194.201 13.7476 193.288 16.4971 191.462Z\",\n    fill: \"white\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgLogoSmall);\nexport default __webpack_public_path__ + \"static/media/logo-small.131afde2.svg\";\nexport { ForwardRef as ReactComponent };","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgToggleBtnLeft(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 5,\n    height: 6,\n    viewBox: \"0 0 5 6\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M2.62718e-07 2.99485L5 6L5 0L2.62718e-07 2.99485Z\",\n    fill: \"white\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgToggleBtnLeft);\nexport default __webpack_public_path__ + \"static/media/toggle-btn-left.b845cf66.svg\";\nexport { ForwardRef as ReactComponent };","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgToggleBtnRight(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 5,\n    height: 6,\n    viewBox: \"0 0 5 6\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M5 3.00515L0 0L0 6L5 3.00515Z\",\n    fill: \"white\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgToggleBtnRight);\nexport default __webpack_public_path__ + \"static/media/toggle-btn-right.02dc817d.svg\";\nexport { ForwardRef as ReactComponent };","import moment from 'moment';\nimport 'moment/locale/ru';\n// import 'babel-polyfill';\n\nmoment.locale('ru');\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport {BrowserRouter, Route, Switch} from 'react-router-dom';\nimport {Provider} from 'react-redux';\nimport {store} from './store';\nimport * as serviceWorker from './serviceWorker';\nimport {ConfigProvider} from 'antd';\nimport ru_RU from 'antd/lib/locale-provider/ru_RU';\nimport {menu} from './constants/menu';\nimport {PATHS} from './constants/PATHS';\n// import {ReactComponent as LogoBig} from './imgs/logo-big.svg';\nimport {ReactComponent as LogoSmall} from './imgs/logo-small.svg';\nimport {ReactComponent as ToggleBtnLeft} from './imgs/toggle-btn-left.svg';\nimport {ReactComponent as ToggleBtnRight} from './imgs/toggle-btn-right.svg';\nimport './index.less';\nimport './init';\n\nReactDOM.render(\n\t<Provider store={store}>\n\t\t<BrowserRouter>\n\t\t\t<Switch>\n\t\t\t\t{/** Авторизация */}\n\t\t\t\t<Route path={PATHS.LOGIN.path} component={PATHS.LOGIN.component} />\n\n\t\t\t\t{/*<Route exact path={paths.AUTHORIZATION_CODE.path}>*/}\n\t\t\t\t{/*\t<paths.AUTHORIZATION_CODE.component*/}\n\t\t\t\t{/*\t\tredirectUrl={paths.HOME.path}*/}\n\t\t\t\t{/*\t/>*/}\n\t\t\t\t{/*</Route>*/}\n\n\t\t\t\t{/** Приложение */}\n\t\t\t\t<Route path={PATHS.PATH_PREFIX.path}>\n\t\t\t\t\t<ConfigProvider locale={ru_RU}>\n\t\t\t\t\t\t<Route exact path={PATHS.APP.path} component={PATHS.APP.component}/>\n\t\t\t\t\t</ConfigProvider>\n\t\t\t\t</Route>\n\t\t\t</Switch>\n\t\t</BrowserRouter>\n\t</Provider>,\n\tdocument.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}